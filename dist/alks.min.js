((global,t)=>{"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((global="undefined"!=typeof globalThis?globalThis:global||self).alks={})})(this,function(t){var global=window||this,e="undefined"!=typeof document?document.currentScript:null,x=function(t,e){return(x=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}))(t,e)};var l=function(){return(l=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function o(t,s,u,c){return new(u=u||Promise)(function(r,e){function n(t){try{i(c.next(t))}catch(t){e(t)}}function o(t){try{i(c.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?r(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(n,o)}i((c=c.apply(t,s||[])).next())})}function f(n,o){var i,s,u,c={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=t(0),a.throw=t(1),a.return=t(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function t(r){return function(t){var e=[r,t];if(i)throw new TypeError("Generator is already executing.");for(;c=a&&e[a=0]?0:c;)try{if(i=1,s&&(u=2&e[0]?s.return:e[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,e[1])).done)return u;switch(s=0,(e=u?[2&e[0],u.value]:e)[0]){case 0:case 1:u=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,s=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!(u=0<(u=c.trys).length&&u[u.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!u||e[1]>u[0]&&e[1]<u[3]))c.label=e[1];else if(6===e[0]&&c.label<u[1])c.label=u[1],u=e;else{if(!(u&&c.label<u[2])){u[2]&&c.ops.pop(),c.trys.pop();continue}c.label=u[2],c.ops.push(e)}}e=o.call(n,c)}catch(t){e=[6,t],s=0}finally{i=u=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}}var global=void 0!==global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},c=[],a=[],C="undefined"!=typeof Uint8Array?Uint8Array:Array,h=!1;function Y(){h=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=t.length;e<r;++e)c[e]=t[e],a[t.charCodeAt(e)]=e;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63}function F(t,e,r){for(var n,o=[],i=e;i<r;i+=3)n=(t[i]<<16)+(t[i+1]<<8)+t[i+2],o.push(c[n>>18&63]+c[n>>12&63]+c[n>>6&63]+c[63&n]);return o.join("")}function j(t){h||Y();for(var e,r=t.length,n=r%3,o="",i=[],s=0,u=r-n;s<u;s+=16383)i.push(F(t,s,u<s+16383?u:s+16383));return 1==n?(e=t[r-1],o=(o+=c[e>>2])+c[e<<4&63]+"=="):2==n&&(e=(t[r-2]<<8)+t[r-1],o=(o=(o+=c[e>>10])+c[e>>4&63])+c[e<<2&63]+"="),i.push(o),i.join("")}function r(t,e,r,n,o){var i,s,u=8*o-n-1,c=(1<<u)-1,a=c>>1,l=-7,f=r?o-1:0,h=r?-1:1,o=t[e+f];for(f+=h,i=o&(1<<-l)-1,o>>=-l,l+=u;0<l;i=256*i+t[e+f],f+=h,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=n;0<l;s=256*s+t[e+f],f+=h,l-=8);if(0===i)i=1-a;else{if(i===c)return s?NaN:1/0*(o?-1:1);s+=Math.pow(2,n),i-=a}return(o?-1:1)*s*Math.pow(2,i-n)}function N(t,e,r,n,o,i){var s,u,c=8*i-o-1,a=(1<<c)-1,l=a>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,p=n?1:-1,i=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=a):(s=Math.floor(Math.log(e)/Math.LN2),e*(n=Math.pow(2,-s))<1&&(s--,n*=2),2<=(e+=1<=s+l?f/n:f*Math.pow(2,1-l))*n&&(s++,n/=2),a<=s+l?(u=0,s=a):1<=s+l?(u=(e*n-1)*Math.pow(2,o),s+=l):(u=e*Math.pow(2,l-1)*Math.pow(2,o),s=0));8<=o;t[r+h]=255&u,h+=p,u/=256,o-=8);for(s=s<<o|u,c+=o;0<c;t[r+h]=255&s,h+=p,s/=256,c-=8);t[r+h-p]|=128*i}var D={}.toString,K=Array.isArray||function(t){return"[object Array]"==D.call(t)};function W(){return p.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(W()<e)throw new RangeError("Invalid typed array length");return p.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=p.prototype:(t=null===t?new p(e):t).length=e,t}function p(t,e,r){if(!(p.TYPED_ARRAY_SUPPORT||this instanceof p))return new p(t,e,r);if("number"!=typeof t)return z(this,t,e,r);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return q(this,t)}function z(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer){var o=t,i=e,s=r;if(i.byteLength,s<0||i.byteLength<s)throw new RangeError("'offset' is out of bounds");if(i.byteLength<s+(n||0))throw new RangeError("'length' is out of bounds");return i=void 0===s&&void 0===n?new Uint8Array(i):void 0===n?new Uint8Array(i,s):new Uint8Array(i,s,n),p.TYPED_ARRAY_SUPPORT?(o=i).__proto__=p.prototype:o=J(o,i),o}if("string"!=typeof e){s=t,n=e;if(d(n))return i=0|V(n.length),0!==(s=u(s,i)).length&&n.copy(s,0,0,i),s;if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||(t=>t!=t)(n.length)?u(s,0):J(s,n);if("Buffer"===n.type&&K(n.data))return J(s,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}o=t,n=e,t=r;if(p.isEncoding(t="string"==typeof t&&""!==t?t:"utf8"))return e=0|H(n,t),o=(n=(o=u(o,e)).write(n,t))!==e?o.slice(0,n):o;throw new TypeError('"encoding" must be a valid string encoding')}function G(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function q(t,e){if(G(e),t=u(t,e<0?0:0|V(e)),!p.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function J(t,e){var r=e.length<0?0:0|V(e.length);t=u(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function V(t){if(W()<=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+W().toString(16)+" bytes");return 0|t}function d(t){return null!=t&&t._isBuffer}function H(t,e){if(d(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;var r=(t="string"!=typeof t?""+t:t).length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return v(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ut(t).length;default:if(n)return v(t).length;e=(""+e).toLowerCase(),n=!0}}function Z(t,e,r){var n,o=!1;if((e=void 0===e||e<0?0:e)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":var i=this,s=e,u=r,c=i.length;(!u||u<0||c<u)&&(u=c);for(var a="",l=s=!s||s<0?0:s;l<u;++l)a+=(t=>t<16?"0"+t.toString(16):t.toString(16))(i[l]);return a;case"utf8":case"utf-8":return et(this,e,r);case"ascii":var f=this,c=e,h=r,p="";h=Math.min(f.length,h);for(var d=c;d<h;++d)p+=String.fromCharCode(127&f[d]);return p;case"latin1":case"binary":var y=this,s=e,g=r,v="";g=Math.min(y.length,g);for(var w=s;w<g;++w)v+=String.fromCharCode(y[w]);return v;case"base64":return A=this,n=r,0===(b=e)&&n===A.length?j(A):j(A.slice(b,n));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var A=e,b=r,R=this.slice(A,b),m="",T=0;T<R.length;T+=2)m+=String.fromCharCode(R[T]+256*R[T+1]);return m;default:if(o)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),o=!0}}function n(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function $(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,(r=(r=isNaN(r)?o?0:t.length-1:r)<0?t.length+r:r)>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if(d(e="string"==typeof e?p.from(e,n):e))return 0===e.length?-1:Q(t,e,r,n,o);if("number"==typeof e)return e&=255,p.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(o?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,e,r):Q(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function Q(t,e,r,n,o){var i=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s/=i=2,u/=2,r/=2}function c(t,e){return 1===i?t[e]:t.readUInt16BE(e*i)}if(o)for(var a=-1,l=r;l<s;l++)if(c(t,l)===c(e,-1===a?0:l-a)){if(l-(a=-1===a?l:a)+1===u)return a*i}else-1!==a&&(l-=l-a),a=-1;else for(l=r=s<r+u?s-u:r;0<=l;l--){for(var f=!0,h=0;h<u;h++)if(c(t,l+h)!==c(e,h)){f=!1;break}if(f)return l}return-1}function X(t,e,r,n){return w((t=>{for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e})(e),t,r,n)}function tt(t,e,r,n){return w(((t,e)=>{for(var r,n,o=[],i=0;i<t.length&&!((e-=2)<0);++i)r=t.charCodeAt(i),n=r>>8,o.push(r%256),o.push(n);return o})(e,t.length-r),t,r,n)}function et(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var i,s,u,c,a=t[o],l=null,f=239<a?4:223<a?3:191<a?2:1;if(o+f<=r)switch(f){case 1:a<128&&(l=a);break;case 2:128==(192&(i=t[o+1]))&&127<(c=(31&a)<<6|63&i)&&(l=c);break;case 3:i=t[o+1],s=t[o+2],128==(192&i)&&128==(192&s)&&2047<(c=(15&a)<<12|(63&i)<<6|63&s)&&(c<55296||57343<c)&&(l=c);break;case 4:i=t[o+1],s=t[o+2],u=t[o+3],128==(192&i)&&128==(192&s)&&128==(192&u)&&65535<(c=(15&a)<<18|(63&i)<<12|(63&s)<<6|63&u)&&c<1114112&&(l=c)}null===l?(l=65533,f=1):65535<l&&(n.push((l-=65536)>>>10&1023|55296),l=56320|1023&l),n.push(l),o+=f}var h=n,p=h.length;if(p<=rt)return String.fromCharCode.apply(String,h);for(var d="",y=0;y<p;)d+=String.fromCharCode.apply(String,h.slice(y,y+=rt));return d}p.TYPED_ARRAY_SUPPORT=void 0===global.TYPED_ARRAY_SUPPORT||global.TYPED_ARRAY_SUPPORT,p.poolSize=8192,p._augment=function(t){return t.__proto__=p.prototype,t},p.from=function(t,e,r){return z(null,t,e,r)},p.TYPED_ARRAY_SUPPORT&&(p.prototype.__proto__=Uint8Array.prototype,p.__proto__=Uint8Array),p.alloc=function(t,e,r){return n=null,e=e,r=r,G(t=t),!(t<=0)&&void 0!==e?"string"==typeof r?u(n,t).fill(e,r):u(n,t).fill(e):u(n,t);var n},p.allocUnsafe=function(t){return q(null,t)},p.allocUnsafeSlow=function(t){return q(null,t)},p.isBuffer=function(t){return null!=t&&(!!t._isBuffer||ct(t)||(t=>"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&ct(t.slice(0,0)))(t))},p.compare=function(t,e){if(!d(t)||!d(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},p.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(t,e){if(!K(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return p.alloc(0);if(void 0===e)for(o=e=0;o<t.length;++o)e+=t[o].length;for(var r=p.allocUnsafe(e),n=0,o=0;o<t.length;++o){var i=t[o];if(!d(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,n),n+=i.length}return r},p.byteLength=H,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)n(this,e,e+1);return this},p.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)n(this,e,e+3),n(this,e+1,e+2);return this},p.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)n(this,e,e+7),n(this,e+1,e+6),n(this,e+2,e+5),n(this,e+3,e+4);return this},p.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?et(this,0,t):Z.apply(this,arguments)},p.prototype.equals=function(t){if(d(t))return this===t||0===p.compare(this,t);throw new TypeError("Argument must be a Buffer")},p.prototype.inspect=function(){var t="";return 0<this.length&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length)&&(t+=" ... "),"<Buffer "+t+">"},p.prototype.compare=function(t,e,r,n,o){if(!d(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),(e=void 0===e?0:e)<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(o<=n&&r<=e)return 0;if(o<=n)return-1;if(r<=e)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),u=Math.min(i,s),c=this.slice(n,o),a=t.slice(e,r),l=0;l<u;++l)if(c[l]!==a[l]){i=c[l],s=a[l];break}return i<s?-1:s<i?1:0},p.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},p.prototype.indexOf=function(t,e,r){return $(this,t,e,r,!0)},p.prototype.lastIndexOf=function(t,e,r){return $(this,t,e,r,!1)},p.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||o<r)&&(r=o),0<t.length&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var i,s,u,c=!1;;)switch(n){case"hex":var a=this,l=t,f=e,h=r,p=(f=Number(f)||0,a.length-f);if((!h||p<(h=Number(h)))&&(h=p),(p=l.length)%2!=0)throw new TypeError("Invalid hex string");p/2<h&&(h=p/2);for(var d=0;d<h;++d){var y=parseInt(l.substr(2*d,2),16);if(isNaN(y))return d;a[f+d]=y}return d;case"utf8":case"utf-8":return p=e,u=r,w(v(t,(s=this).length-p),s,p,u);case"ascii":return X(this,t,e,r);case"latin1":case"binary":return X(this,t,e,r);case"base64":return s=this,u=e,i=r,w(ut(t),s,u,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return tt(this,t,e,r);default:if(c)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),c=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var rt=4096;function s(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(r<t+e)throw new RangeError("Trying to access beyond buffer length")}function y(t,e,r,n,o,i){if(!d(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<e||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function i(t,e,r,n){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-r,2);o<i;++o)t[r+o]=(e&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function g(t,e,r,n){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-r,4);o<i;++o)t[r+o]=e>>>8*(n?o:3-o)&255}function nt(t,e,r,n){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function ot(t,e,r,n,o){return o||nt(t,0,r,4),N(t,e,r,n,23,4),r+4}function it(t,e,r,n,o){return o||nt(t,0,r,8),N(t,e,r,n,52,8),r+8}p.prototype.slice=function(t,e){var r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t),p.TYPED_ARRAY_SUPPORT)(o=this.subarray(t,e)).__proto__=p.prototype;else for(var n=e-t,o=new p(n,void 0),i=0;i<n;++i)o[i]=this[i+t];return o},p.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||s(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},p.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||s(t,e,this.length);for(var n=this[t+--e],o=1;0<e&&(o*=256);)n+=this[t+--e]*o;return n},p.prototype.readUInt8=function(t,e){return e||s(t,1,this.length),this[t]},p.prototype.readUInt16LE=function(t,e){return e||s(t,2,this.length),this[t]|this[t+1]<<8},p.prototype.readUInt16BE=function(t,e){return e||s(t,2,this.length),this[t]<<8|this[t+1]},p.prototype.readUInt32LE=function(t,e){return e||s(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},p.prototype.readUInt32BE=function(t,e){return e||s(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},p.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||s(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return(o*=128)<=n&&(n-=Math.pow(2,8*e)),n},p.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||s(t,e,this.length);for(var n=e,o=1,i=this[t+--n];0<n&&(o*=256);)i+=this[t+--n]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*e)),i},p.prototype.readInt8=function(t,e){return e||s(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},p.prototype.readInt16LE=function(t,e){e||s(t,2,this.length);e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},p.prototype.readInt16BE=function(t,e){e||s(t,2,this.length);e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},p.prototype.readInt32LE=function(t,e){return e||s(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},p.prototype.readInt32BE=function(t,e){return e||s(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},p.prototype.readFloatLE=function(t,e){return e||s(t,4,this.length),r(this,t,!0,23,4)},p.prototype.readFloatBE=function(t,e){return e||s(t,4,this.length),r(this,t,!1,23,4)},p.prototype.readDoubleLE=function(t,e){return e||s(t,8,this.length),r(this,t,!0,52,8)},p.prototype.readDoubleBE=function(t,e){return e||s(t,8,this.length),r(this,t,!1,52,8)},p.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||y(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},p.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||y(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[e+o]=255&t;0<=--o&&(i*=256);)this[e+o]=t/i&255;return e+r},p.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||y(this,t,e,1,255,0),p.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},p.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||y(this,t,e,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):i(this,t,e,!0),e+2},p.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||y(this,t,e,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):i(this,t,e,!1),e+2},p.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||y(this,t,e,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):g(this,t,e,!0),e+4},p.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||y(this,t,e,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):g(this,t,e,!1),e+4},p.prototype.writeIntLE=function(t,e,r,n){t=+t,e|=0,n||y(this,t,e,r,(n=Math.pow(2,8*r-1))-1,-n);var o=0,i=1,s=0;for(this[e]=255&t;++o<r&&(i*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/i>>0)-s&255;return e+r},p.prototype.writeIntBE=function(t,e,r,n){t=+t,e|=0,n||y(this,t,e,r,(n=Math.pow(2,8*r-1))-1,-n);var o=r-1,i=1,s=0;for(this[e+o]=255&t;0<=--o&&(i*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/i>>0)-s&255;return e+r},p.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||y(this,t,e,1,127,-128),p.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&(t=t<0?255+t+1:t),e+1},p.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||y(this,t,e,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):i(this,t,e,!0),e+2},p.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||y(this,t,e,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):i(this,t,e,!1),e+2},p.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||y(this,t,e,4,2147483647,-2147483648),p.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):g(this,t,e,!0),e+4},p.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||y(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):g(this,t,e,!1),e+4},p.prototype.writeFloatLE=function(t,e,r){return ot(this,t,e,!0,r)},p.prototype.writeFloatBE=function(t,e,r){return ot(this,t,e,!1,r)},p.prototype.writeDoubleLE=function(t,e,r){return it(this,t,e,!0,r)},p.prototype.writeDoubleBE=function(t,e,r){return it(this,t,e,!1,r)},p.prototype.copy=function(t,e,r,n){if(r=r||0,n||0===n||(n=this.length),e>=t.length&&(e=t.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===t.length||0===this.length)return 0;if((e=e||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var o,i=(n=t.length-e<n-r?t.length-e+r:n)-r;if(this===t&&r<e&&e<n)for(o=i-1;0<=o;--o)t[o+e]=this[o+r];else if(i<1e3||!p.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},p.prototype.fill=function(t,e,r,n){if("string"==typeof t){var o;if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length&&(o=t.charCodeAt(0))<256&&(t=o),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!p.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(!(r<=e))if(e>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(t=t||0))for(u=e;u<r;++u)this[u]=t;else for(var i=d(t)?t:v(new p(t,n).toString()),s=i.length,u=0;u<r-e;++u)this[u+e]=i[u%s];return this};var st=/[^+\/0-9A-Za-z-_]/g;function v(t,e){e=e||1/0;for(var r,n=t.length,o=null,i=[],s=0;s<n;++s){if(55295<(r=t.charCodeAt(s))&&r<57344){if(!o){if(56319<r){-1<(e-=3)&&i.push(239,191,189);continue}if(s+1===n){-1<(e-=3)&&i.push(239,191,189);continue}o=r;continue}if(r<56320){-1<(e-=3)&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&-1<(e-=3)&&i.push(239,191,189);if(o=null,r<128){if(--e<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function ut(t){var e=(t=>{var e;if((t=((e=t).trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(st,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t})(t);h||Y();var r,t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");for(var n="="===e[t-2]?2:"="===e[t-1]?1:0,o=new C(3*t/4-n),i=0<n?t-4:t,s=0,u=0;u<i;u+=4)r=a[e.charCodeAt(u)]<<18|a[e.charCodeAt(u+1)]<<12|a[e.charCodeAt(u+2)]<<6|a[e.charCodeAt(u+3)],o[s++]=r>>16&255,o[s++]=r>>8&255,o[s++]=255&r;return 2==n?(r=a[e.charCodeAt(u)]<<2|a[e.charCodeAt(u+1)]>>4,o[s++]=255&r):1==n&&(r=a[e.charCodeAt(u)]<<10|a[e.charCodeAt(u+1)]<<4|a[e.charCodeAt(u+2)]>>2,o[s++]=r>>8&255,o[s++]=255&r),o}function w(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}function ct(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function at(){throw new Error("setTimeout has not been defined")}function lt(){throw new Error("clearTimeout has not been defined")}var A=at,b=lt;function ft(e){if(A===setTimeout)return setTimeout(e,0);if((A===at||!A)&&setTimeout)return(A=setTimeout)(e,0);try{return A(e,0)}catch(t){try{return A.call(null,e,0)}catch(t){return A.call(this,e,0)}}}"function"==typeof global.setTimeout&&(A=setTimeout),"function"==typeof global.clearTimeout&&(b=clearTimeout);var R,m=[],T=!1,E=-1;function ht(){T&&R&&(T=!1,R.length?m=R.concat(m):E=-1,m.length)&&pt()}function pt(){if(!T){for(var t=ft(ht),e=(T=!0,m.length);e;){for(R=m,m=[];++E<e;)R&&R[E].run();E=-1,e=m.length}R=null,T=!1,!function(e){if(b===clearTimeout)return clearTimeout(e);if((b===lt||!b)&&clearTimeout)return(b=clearTimeout)(e);try{b(e)}catch(t){try{return b.call(null,e)}catch(t){return b.call(this,e)}}}(t)}}function dt(t,e){this.fun=t,this.array=e}dt.prototype.run=function(){this.fun.apply(null,this.array)};function _(){}var S=_,I=_,P=_,U=_,M=_,yt=_,gt=_;var O=global.performance||{},vt=O.now||O.mozNow||O.msNow||O.oNow||O.webkitNow||function(){return(new Date).getTime()};var wt=new Date;var At={nextTick:function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];m.push(new dt(t,e)),1!==m.length||T||ft(pt)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:S,addListener:I,once:P,off:U,removeListener:M,removeAllListeners:yt,emit:gt,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*vt.call(O),r=Math.floor(e),e=Math.floor(e%1*1e9);return t&&(r-=t[0],(e-=t[1])<0)&&(r--,e+=1e9),[r,e]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-wt)/1e3}};function bt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Rt(r){var e,n;return r.__esModule?r:("function"==typeof(e=r.default)?(n=function t(){return this instanceof t?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)}).prototype=e.prototype:n={},Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(r).forEach(function(t){var e=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(n,t,e.get?e:{enumerable:!0,get:function(){return r[t]}})}),n)}var mt=Rt(Object.freeze({__proto__:null,default:{}}));function Tt(t,e){for(var r=0,n=t.length-1;0<=n;n--){var o=t[n];"."===o?t.splice(n,1):".."===o?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;)t.unshift("..");return t}var Et=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,_t=function(t){return Et.exec(t).slice(1)};function B(){for(var t="",e=!1,r=arguments.length-1;-1<=r&&!e;r--){var n=0<=r?arguments[r]:"/";if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(t=n+"/"+t,e="/"===n.charAt(0))}return(e?"/":"")+(t=Tt(kt(t.split("/"),function(t){return!!t}),!e).join("/"))||"."}function St(t){var e=It(t),r="/"===Ct(t,-1);return(t=(t=Tt(kt(t.split("/"),function(t){return!!t}),!e).join("/"))||e?t:".")&&r&&(t+="/"),(e?"/":"")+t}function It(t){return"/"===t.charAt(0)}function Pt(){return St(kt(Array.prototype.slice.call(arguments,0),function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))}function Ut(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;0<=r&&""===t[r];r--);return r<e?[]:t.slice(e,r-e+1)}t=B(t).substr(1),e=B(e).substr(1);for(var n=r(t.split("/")),o=r(e.split("/")),i=Math.min(n.length,o.length),s=i,u=0;u<i;u++)if(n[u]!==o[u]){s=u;break}for(var c=[],u=s;u<n.length;u++)c.push("..");return(c=c.concat(o.slice(s))).join("/")}function Mt(t){var t=_t(t),e=t[0],t=t[1];return e||t?e+(t=t&&t.substr(0,t.length-1)):"."}function Ot(t,e){t=_t(t)[2];return t=e&&t.substr(-1*e.length)===e?t.substr(0,t.length-e.length):t}function Bt(t){return _t(t)[3]}global={extname:Bt,basename:Ot,dirname:Mt,sep:"/",delimiter:":",relative:Ut,join:Pt,isAbsolute:It,normalize:St,resolve:B};function kt(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}var Lt,xt,Ct="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)},Yt=Rt(Object.freeze({__proto__:null,basename:Ot,default:global,delimiter:":",dirname:Mt,extname:Bt,isAbsolute:It,join:Pt,normalize:St,relative:Ut,resolve:B,sep:"/"})),Ft=Rt(Object.freeze({__proto__:null,default:{}}));var jt=bt((()=>{if(!xt){xt=1;let r=mt,n=Yt,o=Ft;Lt=function(t){return(t=>{try{return o.lstatSync(t).isDirectory()}catch(t){}})(t=t||At.cwd())&&(t=n.join(t,"index.js")),r.createRequire?r.createRequire(t):r.createRequireFromPath?r.createRequireFromPath(t):(t=t,(e=new r.Module(t,null)).filename=t,e.paths=r.Module._nodeModulePaths(n.dirname(t)),e._compile("module.exports = require;",t),e.exports);var e}}return Lt})())("undefined"==typeof document&&"undefined"==typeof location?require("url").pathToFileURL(__filename).href:"undefined"==typeof document?location.href:e&&"SCRIPT"===e.tagName.toUpperCase()&&e.src||new URL("alks.umd.js",document.baseURI).href)("../package.json"),S=window.fetch.bind(window);t.TrustType=void 0,(I=t.TrustType||(t.TrustType={})).CrossAccount="Cross Account",I.InnerAccount="Inner Account",t.PseudoBoolean=void 0,(P=t.PseudoBoolean||(t.PseudoBoolean={}))[P.True=1]="True",P[P.False=0]="False";k.prototype.create=function(t){return new k(l(l({},this.config),t))},k.prototype.getAccounts=function(r){return o(this,void 0,void 0,function(){var e;return f(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("getAccounts",r)];case 1:return e=t.sent(),[2,Object.keys(e.accountListRole).map(function(t){return{account:t,role:e.accountListRole[t][0].role,iamKeyActive:e.accountListRole[t][0].iamKeyActive,maxKeyDuration:e.accountListRole[t][0].maxKeyDuration,securityLevel:e.accountListRole[t][0].securityLevel,skypieaAccount:e.accountListRole[t][0].skypieaAccount}})]}})})},k.prototype.getKeys=function(e){return o(this,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("getKeys",e)];case 1:return[2,L(t.sent(),["accessKey","secretKey","sessionToken","consoleURL","sessionTime"])]}})})},k.prototype.getIAMKeys=function(e){return o(this,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("getIAMKeys",e)];case 1:return[2,L(t.sent(),["accessKey","secretKey","sessionToken","consoleURL","sessionTime"])]}})})},k.prototype.getAllAWSRoleTypes=function(r){return o(this,void 0,void 0,function(){var e;return f(this,function(t){switch(t.label){case 0:return e=r.getDynamicValues?"allAwsRoleTypes?getDynamicValues=true":"allAwsRoleTypes",[4,this.internalFetch(e,r,"GET")];case 1:return[2,t.sent().roleTypes]}})})},k.prototype.getAWSRoleTypes=function(r){return o(this,void 0,void 0,function(){var e;return f(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("getAWSRoleTypes",r)];case 1:return e=t.sent(),[2,JSON.parse(e.roleTypes)]}})})},k.prototype.getNonServiceAWSRoleTypes=function(r){return o(this,void 0,void 0,function(){var e;return f(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("getNonServiceAWSRoleTypes",r)];case 1:return e=t.sent(),[2,JSON.parse(e.roleTypes)]}})})},k.prototype.createRole=function(r){return o(this,void 0,void 0,function(){var e;return f(this,function(t){switch(t.label){case 0:return null!=r.roleType==(null!=r.trustPolicy)?[3,2]:[4,this.internalFetch("createRole",r)];case 1:return(e=t.sent()).denyArns=e.denyArns.split(","),[2,L(e,["roleArn","denyArns","instanceProfileArn","addedRoleToInstanceProfile","tags"])];case 2:throw new Error("Must include roleType or trustPolicy, but not both.")}})})},k.prototype.createNonServiceRole=function(r){return o(this,void 0,void 0,function(){var e;return f(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("createNonServiceRole",r)];case 1:return(e=t.sent()).denyArns=e.denyArns.split(","),[2,L(e,["roleArn","denyArns","instanceProfileArn","addedRoleToInstanceProfile","tags"])]}})})},k.prototype.awsAccountRoles=function(e){return o(this,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("awsAccountRoles?account=".concat(e.account),e,"GET")];case 1:return[2,t.sent().awsRoleList]}})})},k.prototype.listAWSAccountRoles=function(r){return o(this,void 0,void 0,function(){var e;return f(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("listAWSAccountRoles",r)];case 1:return e=t.sent(),[2,JSON.parse(e.jsonAWSRoleList).map(function(t){return t.split("/").slice(-1)[0]})]}})})},k.prototype.getAccountRole=function(r){return o(this,void 0,void 0,function(){var e;return f(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("getAccountRole",r)];case 1:if((e=t.sent()).roleExists)return[2,l(l({},L(e,["roleArn","isMachineIdentity","tags","maxSessionDurationInSeconds"])),{instanceProfileArn:e.instanceProfileARN})];throw new Error("Role ".concat(r.roleName," does not exist in this account"))}})})},k.prototype.updateRole=function(r){return o(this,void 0,void 0,function(){var e;return f(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("role",r,"PATCH")];case 1:if((e=t.sent()).roleExists)return[2,l(l({},L(e,["roleArn","isMachineIdentity","tags"])),{instanceProfileArn:e.instanceProfileARN})];throw new Error("Role ".concat(r.roleName," does not exist in this account"))}})})},k.prototype.deleteRole=function(e){return o(this,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("deleteRole",e)];case 1:return t.sent(),[2,!0]}})})},k.prototype.addRoleMachineIdentity=function(e){return o(this,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("roleMachineIdentity",e)];case 1:return[2,L(t.sent(),["machineIdentityArn"])]}})})},k.prototype.deleteRoleMachineIdentity=function(e){return o(this,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("roleMachineIdentity",e,"DELETE")];case 1:return[2,L(t.sent(),["machineIdentityArn"])]}})})},k.prototype.getUserAccess=function(r){return o(this,void 0,void 0,function(){var e;return f(this,function(t){switch(t.label){case 0:return e=r.accountId,[4,this.internalFetch("userAccess/".concat(e),r,"GET")];case 1:return[2,t.sent().users]}})})},k.prototype.getUserAccessByRole=function(r){return o(this,void 0,void 0,function(){var e;return f(this,function(t){switch(t.label){case 0:return e=r.accountId,[4,this.internalFetch("reports/users-by-role?accountId=".concat(e),r,"GET")];case 1:return[2,t.sent().users]}})})},k.prototype.getUserRoleAccess=function(r){return o(this,void 0,void 0,function(){var e;return f(this,function(t){switch(t.label){case 0:return e=r.accountId,[4,this.internalFetch("userAccess/roles/".concat(e),r)];case 1:return[2,t.sent().roles]}})})},k.prototype.getAccountOwners=function(r){return o(this,void 0,void 0,function(){var e;return f(this,function(t){switch(t.label){case 0:return e=r.accountId,[4,this.internalFetch("userAccess/owners/".concat(e),r,"GET")];case 1:return[2,t.sent().accountOwners]}})})},k.prototype.createAccessKeys=function(e){return o(this,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("accessKeys",e)];case 1:return[2,L(t.sent(),["iamUserArn","accessKey","secretKey","addedIAMUserToGroup","tags"])]}})})},k.prototype.getIamUser=function(e){return o(this,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("iam-users/id/".concat(e.account,"/").concat(e.iamUserName),e,"GET")];case 1:return[2,L(t.sent().item,["arn","accountId","userName","accessKey","tags"])]}})})},k.prototype.updateIamUser=function(r){return o(this,void 0,void 0,function(){var e;return f(this,function(t){switch(t.label){case 0:return delete(e=l(l({},r),{user:{tags:r.tags}})).tags,[4,this.internalFetch("iam-users/id/".concat(r.account,"/").concat(r.iamUserName),e,"PATCH")];case 1:return[2,L(t.sent().item,["arn","accountId","userName","accessKey","tags"])]}})})},k.prototype.deleteIAMUser=function(e){return o(this,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("IAMUser",e,"DELETE")];case 1:return t.sent(),[2,!0]}})})},k.prototype.version=function(e){return o(this,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("version",e,"GET")];case 1:return[2,L(t.sent(),["version"])]}})})},k.prototype.getLoginRole=function(n){return o(this,void 0,void 0,function(){var e,r;return f(this,function(t){switch(t.label){case 0:return e=n.accountId,r=n.role,[4,this.internalFetch("loginRoles/id/".concat(e,"/").concat(r),n,"GET")];case 1:return[2,L(t.sent().loginRole,["account","role","iamKeyActive","maxKeyDuration","securityLevel"])]}})})},k.prototype.getAccessToken=function(e){return o(this,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("accessToken",e)];case 1:return[2,L(t.sent(),["accessToken","expiresIn"])]}})})},k.prototype.getRefreshTokens=function(e){return o(this,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("refreshTokens",e,"GET")];case 1:return[2,t.sent().refreshTokens.map(function(t){return L(t,["clientId","id","userId","value"])})]}})})},k.prototype.revoke=function(e){return o(this,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("revoke",e)];case 1:return[2,"Success"==t.sent().statusMessage]}})})},k.prototype.getCostTotals=function(e){return o(this,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("costTotals/".concat(e.accountId),e,"GET")];case 1:return[2,L(t.sent().costTotals,["awsAccountId","yyyy","mm","dd","daily","weekly","monthly","yearly","dailyCostsByService","monthlyCostsByService"])]}})})},k.prototype.internalFetch=function(t){return o(this,arguments,void 0,function(e,r,n){var o,i,s,u,c,a;return void 0===r&&(r={}),void 0===n&&(n="POST"),f(this,function(t){switch(t.label){case 0:return a=l(l({},this.config),r),o=l({},a),i={"Content-Type":"application/json","User-Agent":"AlksJS/".concat(jt.version)},void 0!==a.accessToken?(i.Authorization="Bearer ".concat(a.accessToken),delete o.accessToken):void 0!==a.accessKey?(i["ALKS-STS-Access-Key"]=a.accessKey,i["ALKS-STS-Secret-Key"]=a.secretKey,i["ALKS-STS-Session-Token"]=a.sessionToken,delete o.accessKey,delete o.secretKey,delete o.sessionToken):void 0!==a.userid&&(console.error("The userid and password properties are deprecated and should be replaced with an access token"),s=(t=>p.from(t=void 0===t?"":t).toString("base64"))("".concat(a.userid,":").concat(a.password)),i.Authorization="Basic ".concat(s),delete o.userid,delete o.password),a.userAgent&&(i["User-Agent"]+=" ".concat(a.userAgent),delete o.userAgent),s="".concat(a.baseUrl,"/").concat(e),[4,a._fetch(s,{method:n,headers:i,credentials:"omit",body:"GET"==n?void 0:JSON.stringify(o)})];case 1:u=t.sent(),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,u.json()];case 3:return c=t.sent(),[3,5];case 4:return a=t.sent(),c={errors:[a.message]},[3,5];case 5:if(this.config.requestLogger)try{this.config.requestLogger({method:n,url:s,statusCode:u.status,statusMessage:c.statusMessage,requestId:c.requestId})}catch(t){}if(u.ok)return[2,c];throw new Nt(u,c)}})})};U=k;function k(t){this.config=t}var Nt=(o=>{var t=n,e=o;if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}function n(t,e){var r=this,n=Array.isArray(null==e?void 0:e.errors)?e.errors:[],n=(t.statusText&&n.unshift(t.statusText),n.join("; "));return(r=o.call(this,n)||this).status=t.status,r.message=n,Object.assign(r,e),r}return x(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r),n})(Error);function L(r,t){return t.reduce(function(t,e){return t[e]=r[e],t},{})}var M=U.prototype.create.call({},{_fetch:S}),yt=U.prototype.create.bind(M),gt=U.prototype.getAccounts.bind(M),global=U.prototype.getKeys.bind(M),e=U.prototype.getIAMKeys.bind(M),I=U.prototype.getAllAWSRoleTypes.bind(M),P=U.prototype.getAWSRoleTypes.bind(M),S=U.prototype.getNonServiceAWSRoleTypes.bind(M),Dt=U.prototype.createRole.bind(M),Kt=U.prototype.createNonServiceRole.bind(M),Wt=U.prototype.awsAccountRoles.bind(M),zt=U.prototype.listAWSAccountRoles.bind(M),Gt=U.prototype.getAccountRole.bind(M),qt=U.prototype.updateRole.bind(M),Jt=U.prototype.deleteRole.bind(M),Vt=U.prototype.addRoleMachineIdentity.bind(M),Ht=U.prototype.deleteRoleMachineIdentity.bind(M),Zt=U.prototype.getUserAccess.bind(M),$t=U.prototype.getUserAccessByRole.bind(M),Qt=U.prototype.getUserRoleAccess.bind(M),Xt=U.prototype.getAccountOwners.bind(M),te=U.prototype.createAccessKeys.bind(M),ee=U.prototype.getIamUser.bind(M),re=U.prototype.updateIamUser.bind(M),ne=U.prototype.deleteIAMUser.bind(M),oe=U.prototype.version.bind(M),ie=U.prototype.getLoginRole.bind(M),se=U.prototype.getAccessToken.bind(M),ue=U.prototype.getRefreshTokens.bind(M),ce=U.prototype.revoke.bind(M),M=U.prototype.getCostTotals.bind(M),ae=Object.freeze({__proto__:null,Alks:U,AlksError:Nt,get PseudoBoolean(){return t.PseudoBoolean},get TrustType(){return t.TrustType},addRoleMachineIdentity:Vt,awsAccountRoles:Wt,create:yt,createAccessKeys:te,createNonServiceRole:Kt,createRole:Dt,deleteIAMUser:ne,deleteRole:Jt,deleteRoleMachineIdentity:Ht,getAWSRoleTypes:P,getAccessToken:se,getAccountOwners:Xt,getAccountRole:Gt,getAccounts:gt,getAllAWSRoleTypes:I,getCostTotals:M,getIAMKeys:e,getIamUser:ee,getKeys:global,getLoginRole:ie,getNonServiceAWSRoleTypes:S,getRefreshTokens:ue,getUserAccess:Zt,getUserAccessByRole:$t,getUserRoleAccess:Qt,listAWSAccountRoles:zt,revoke:ce,updateIamUser:re,updateRole:qt,version:oe});t.Alks=U,t.AlksError=Nt,t.addRoleMachineIdentity=Vt,t.awsAccountRoles=Wt,t.create=yt,t.createAccessKeys=te,t.createNonServiceRole=Kt,t.createRole=Dt,t.default=ae,t.deleteIAMUser=ne,t.deleteRole=Jt,t.deleteRoleMachineIdentity=Ht,t.getAWSRoleTypes=P,t.getAccessToken=se,t.getAccountOwners=Xt,t.getAccountRole=Gt,t.getAccounts=gt,t.getAllAWSRoleTypes=I,t.getCostTotals=M,t.getIAMKeys=e,t.getIamUser=ee,t.getKeys=global,t.getLoginRole=ie,t.getNonServiceAWSRoleTypes=S,t.getRefreshTokens=ue,t.getUserAccess=Zt,t.getUserAccessByRole=$t,t.getUserRoleAccess=Qt,t.listAWSAccountRoles=zt,t.revoke=ce,t.updateIamUser=re,t.updateRole=qt,t.version=oe,Object.defineProperty(t,"__esModule",{value:!0}),Object.assign(t,alks)});
