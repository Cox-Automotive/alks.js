!function(global,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("node:http"),require("node:https"),require("node:zlib"),require("node:stream"),require("node:buffer"),require("node:util"),require("node:url"),require("node:net"),require("node:fs"),require("node:path"),require("worker_threads"),require("node:process"),require("node:stream/web")):"function"==typeof define&&define.amd?define(["exports","node:http","node:https","node:zlib","node:stream","node:buffer","node:util","node:url","node:net","node:fs","node:path","worker_threads","node:process","node:stream/web"],e):e((global="undefined"!=typeof globalThis?globalThis:global||self).alks={},global.http,global.https,global.zlib,global.Stream,global.node_buffer,global.node_util,global.node_url,global.node_net,global.node_fs,global.node_path,global.require$$0$2,global.require$$0$1,global.require$$1$1)}(this,function(I,M,e,D,w,u,c,U,F,z,x,W,N,t){"use strict";var global=window||this;function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var Y=r(M),H=r(e),$=r(D),v=r(w),M=r(W),e=r(N),D=r(t),oo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==global?global:"undefined"!=typeof self?self:{};function V(r){if(r.__esModule)return r;var n=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(r).forEach(function(e){var t=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(n,e,t.get?t:{enumerable:!0,get:function(){return r[e]}})}),n}var K=function(e,t){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};var G=function(){return(G=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var Q=Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]};function J(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Z(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function X(e){return this instanceof X?(this.v=e,this):new X(e)}var ee=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};var W=V(Object.freeze({__proto__:null,__extends:function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}K(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},get __assign(){return G},__rest:function(e,t){var r={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]]);return r},__decorate:function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(o=e[s])&&(a=(i<3?o(a):3<i?o(t,r,a):o(t,r))||a);return 3<i&&a&&Object.defineProperty(t,r,a),a},__param:function(r,n){return function(e,t){n(e,t,r)}},__metadata:function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter:function(e,a,s,l){return new(s=s||Promise)(function(r,t){function n(e){try{i(l.next(e))}catch(e){t(e)}}function o(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((l=l.apply(e,a||[])).next())})},__generator:function(n,o){var i,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){l.label=t[1];break}if(6===t[0]&&l.label<s[1]){l.label=s[1],s=t;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(t);break}s[2]&&l.ops.pop(),l.trys.pop();continue}t=o.call(n,l)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},__createBinding:Q,__exportStar:function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||Q(t,e,r)},__values:J,__read:Z,__spread:function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Z(arguments[t]));return e},__spreadArrays:function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n},__spreadArray:function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},__await:X,__asyncGenerator:function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=r.apply(e,t||[]),i=[],a={};return n("next"),n("throw"),n("return"),a[Symbol.asyncIterator]=function(){return this},a;function n(n){o[n]&&(a[n]=function(r){return new Promise(function(e,t){1<i.push([n,r,e,t])||s(n,r)})})}function s(e,t){try{(r=o[e](t)).value instanceof X?Promise.resolve(r.value.v).then(l,u):c(i[0][2],r)}catch(e){c(i[0][3],e)}var r}function l(e){s("next",e)}function u(e){s("throw",e)}function c(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}},__asyncDelegator:function(n){var o,e={};return t("next"),t("throw",function(e){throw e}),t("return"),e[Symbol.iterator]=function(){return this},e;function t(t,r){e[t]=n[t]?function(e){return(o=!o)?{value:X(n[t](e)),done:"return"===t}:r?r(e):e}:r}},__asyncValues:function(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=a[Symbol.asyncIterator];return t?t.call(a):(a=J(a),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(i){e[i]=a[i]&&function(o){return new Promise(function(e,t){var r,n;o=a[i](o),r=e,e=t,n=o.done,t=o.value,Promise.resolve(t).then(function(e){r({value:e,done:n})},e)})}}},__makeTemplateObject:function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__importStar:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&Q(t,e,r);return ee(t,e),t},__importDefault:function(e){return e&&e.__esModule?e:{default:e}},__classPrivateFieldGet:function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e===t&&n:t.has(e))return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e);throw new TypeError("Cannot read private member from an object whose class did not declare it")},__classPrivateFieldSet:function(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e===t&&o:t.has(e))return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r;throw new TypeError("Cannot write private member to an object whose class did not declare it")}})),N={name:"alks.js",version:"2.2.0",description:"JavaScript client for the ALKS API, usable in both modern browsers and node.js",main:"dist/alks.cjs.js",types:"dist/src/alks.d.ts",unpkg:"dist/alks.min.js",browser:"dist/alks.umd.js",module:"dist/alks.esm.js",scripts:{rmdirs:"rimraf dist lib",mkdirs:"mkdirp dist lib",clean:"npm run rmdirs && npm run mkdirs",rollup:"rollup -c rollup.config.js",minify:'uglifyjs -m reserved=["global"] -c < dist/alks.umd.js > dist/alks.min.js',build:"npm run clean && npm run compile && npm run rollup && npm run minify",lint:"prettier --write --no-error-on-unmatched-pattern {src,test}/**/*.{ts,js,json,md}",test:"npm run build && npm run lint && npm run mocha && npm run karma",mocha:"nyc mocha test/test.js",coverage:"nyc report --reporter=text-lcov | coveralls",karma:"karma start",docs:"typedoc src/alks.ts",prepare:"husky install",compile:"tsc"},files:["dist/"],repository:{type:"git",url:"https://github.com/Cox-Automotive/alks.js.git"},author:{name:"Cox Automotive",email:"paul.ofallon@coxautoinc.com",url:"https://github.com/Cox-Automotive/"},bugs:{url:"https://github.com/Cox-Automotive/alks.js/issues"},license:"MIT",engines:{node:">=14.0.0"},dependencies:{encoding:"^0.1.13","node-fetch":"^3.2.6",tslib:"^2.3.1",typedoc:"^0.22.15"},devDependencies:{"@rollup/plugin-commonjs":"^19.0.0","@rollup/plugin-node-resolve":"^13.0.0","@rollup/plugin-typescript":"^8.2.1","@types/node":"^15.0.2","@types/node-fetch":"^2.5.10",browserify:"^17.0.0",chai:"^4.3.4","chai-as-promised":"^7.1.1",coveralls:"^3.1.1",eslint:"^7.25.0","eslint-plugin-jsdoc":"^39.3.3","fetch-mock":"^9.11.0",husky:"^6.0.0",karma:"^6.3.2","karma-browserify":"^8.0.0","karma-chrome-launcher":"^3.1.0","karma-mocha":"^2.0.1","karma-mocha-reporter":"^2.2.5","lint-staged":"^11.0.0",mkdirp:"^1.0.4",mocha:"^10.0.0",nyc:"^15.1.0",prettier:"^2.3.0",rimraf:"^3.0.2",rollup:"^2.75.7","rollup-plugin-json":"^3.1.0","rollup-plugin-node-polyfills":"^0.2.1","rollup-plugin-replace":"^2.2.0",sinon:"^10.0.0",tslint:"^6.1.3",typescript:"^4.2.4","uglify-js":"^3.16.1"},prettier:{singleQuote:!0,semi:!0,arrowParens:"always",endOfLine:"lf",trailingComma:"es5"},"lint-staged":{"{src,test}/**/*.{js,ts,json,md}":["prettier --write"]}},t=void 0!==global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},l=[],f=[],te="undefined"!=typeof Uint8Array?Uint8Array:Array,re=!1;function ne(){re=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=e.length;t<r;++t)l[t]=e[t],f[e.charCodeAt(t)]=t;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63}function oe(e,t,r){for(var n,o=[],i=t;i<r;i+=3)n=(e[i]<<16)+(e[i+1]<<8)+e[i+2],o.push(l[n>>18&63]+l[n>>12&63]+l[n>>6&63]+l[63&n]);return o.join("")}function ie(e){re||ne();for(var t,r=e.length,n=r%3,o="",i=[],a=0,s=r-n;a<s;a+=16383)i.push(oe(e,a,s<a+16383?s:a+16383));return 1==n?(t=e[r-1],o=(o+=l[t>>2])+l[t<<4&63]+"=="):2==n&&(t=(e[r-2]<<8)+e[r-1],o=(o=(o+=l[t>>10])+l[t>>4&63])+l[t<<2&63]+"="),i.push(o),i.join("")}function ae(e,t,r,n,o){var i,a,s=8*o-n-1,l=(1<<s)-1,u=l>>1,c=-7,f=r?o-1:0,d=r?-1:1,o=e[t+f];for(f+=d,i=o&(1<<-c)-1,o>>=-c,c+=s;0<c;i=256*i+e[t+f],f+=d,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=n;0<c;a=256*a+e[t+f],f+=d,c-=8);if(0===i)i=1-u;else{if(i===l)return a?NaN:1/0*(o?-1:1);a+=Math.pow(2,n),i-=u}return(o?-1:1)*a*Math.pow(2,i-n)}function se(e,t,r,n,o,i){var a,s,l=8*i-o-1,u=(1<<l)-1,c=u>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:i-1,h=n?1:-1,i=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(n=Math.pow(2,-a))<1&&(a--,n*=2),2<=(t+=1<=a+c?f/n:f*Math.pow(2,1-c))*n&&(a++,n/=2),u<=a+c?(s=0,a=u):1<=a+c?(s=(t*n-1)*Math.pow(2,o),a+=c):(s=t*Math.pow(2,c-1)*Math.pow(2,o),a=0));8<=o;e[r+d]=255&s,d+=h,s/=256,o-=8);for(a=a<<o|s,l+=o;0<l;e[r+d]=255&a,d+=h,a/=256,l-=8);e[r+d-h]|=128*i}var le={}.toString,ue=Array.isArray||function(e){return"[object Array]"==le.call(e)},global=(S.TYPED_ARRAY_SUPPORT=void 0===t.TYPED_ARRAY_SUPPORT||t.TYPED_ARRAY_SUPPORT,ce());function ce(){return S.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(ce()<t)throw new RangeError("Invalid typed array length");return S.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=S.prototype:(e=null===e?new S(t):e).length=t,e}function S(e,t,r){if(!(S.TYPED_ARRAY_SUPPORT||this instanceof S))return new S(e,t,r);if("number"!=typeof e)return fe(this,e,t,r);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return he(this,e)}function fe(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var o=e,i=t,a=r;if(i.byteLength,a<0||i.byteLength<a)throw new RangeError("'offset' is out of bounds");if(i.byteLength<a+(n||0))throw new RangeError("'length' is out of bounds");return i=void 0===a&&void 0===n?new Uint8Array(i):void 0===n?new Uint8Array(i,a):new Uint8Array(i,a,n),S.TYPED_ARRAY_SUPPORT?(o=i).__proto__=S.prototype:o=pe(o,i),o}if("string"!=typeof t){a=e,n=t;if(d(n))return i=0|ye(n.length),0===(a=s(a,i)).length||n.copy(a,0,0,i),a;if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||function(e){return e!=e}(n.length)?s(a,0):pe(a,n);if("Buffer"===n.type&&ue(n.data))return pe(a,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}o=e,n=t,e=r;if(!S.isEncoding(e="string"==typeof e&&""!==e?e:"utf8"))throw new TypeError('"encoding" must be a valid string encoding');t=0|be(n,e);return o=(n=(o=s(o,t)).write(n,e))!==t?o.slice(0,n):o}function de(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function he(e,t){if(de(t),e=s(e,t<0?0:0|ye(t)),!S.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function pe(e,t){var r=t.length<0?0:0|ye(t.length);e=s(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function ye(e){if(e>=ce())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ce().toString(16)+" bytes");return 0|e}function d(e){return null!=e&&e._isBuffer}function be(e,t){if(d(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;var r=(e="string"!=typeof e?""+e:e).length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Ce(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Be(e).length;default:if(n)return Ce(e).length;t=(""+t).toLowerCase(),n=!0}}function ge(e,t,r){var n,o=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var i=this,a=t,s=r,l=i.length;(!s||s<0||l<s)&&(s=l);for(var u="",c=a=!a||a<0?0:a;c<s;++c)u+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(i[c]);return u;case"utf8":case"utf-8":return Se(this,t,r);case"ascii":var f=this,l=t,d=r,h="";d=Math.min(f.length,d);for(var p=l;p<d;++p)h+=String.fromCharCode(127&f[p]);return h;case"latin1":case"binary":var y=this,a=t,b=r,g="";b=Math.min(y.length,b);for(var _=a;_<b;++_)g+=String.fromCharCode(y[_]);return g;case"base64":return m=this,n=r,0===(w=t)&&n===m.length?ie(m):ie(m.slice(w,n));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var m=t,w=r,v=this.slice(m,w),S="",T=0;T<v.length;T+=2)S+=String.fromCharCode(v[T]+256*v[T+1]);return S;default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function n(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function _e(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,(r=(r=isNaN(r)?o?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if(d(t="string"==typeof t?S.from(t,n):t))return 0===t.length?-1:me(e,t,r,n,o);if("number"==typeof t)return t&=255,S.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(o?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):me(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function me(e,t,r,n,o){var i=1,a=e.length,s=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a/=i=2,s/=2,r/=2}function l(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o)for(var u=-1,c=r;c<a;c++)if(l(e,c)===l(t,-1===u?0:c-u)){if(c-(u=-1===u?c:u)+1===s)return u*i}else-1!==u&&(c-=c-u),u=-1;else for(c=r=a<r+s?a-s:r;0<=c;c--){for(var f=!0,d=0;d<s;d++)if(l(e,c+d)!==l(t,d)){f=!1;break}if(f)return c}return-1}function we(e,t,r,n){return je(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function ve(e,t,r,n){return je(function(e,t){for(var r,n,o=[],i=0;i<e.length&&!((t-=2)<0);++i)n=e.charCodeAt(i),r=n>>8,n=n%256,o.push(n),o.push(r);return o}(t,e.length-r),e,r,n)}function Se(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,a,s,l,u=e[o],c=null,f=239<u?4:223<u?3:191<u?2:1;if(o+f<=r)switch(f){case 1:u<128&&(c=u);break;case 2:128==(192&(i=e[o+1]))&&127<(l=(31&u)<<6|63&i)&&(c=l);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&2047<(l=(15&u)<<12|(63&i)<<6|63&a)&&(l<55296||57343<l)&&(c=l);break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&65535<(l=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&s)&&l<1114112&&(c=l)}null===c?(c=65533,f=1):65535<c&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),o+=f}var d=n,h=d.length;if(h<=Te)return String.fromCharCode.apply(String,d);for(var p="",y=0;y<h;)p+=String.fromCharCode.apply(String,d.slice(y,y+=Te));return p}S.poolSize=8192,S._augment=function(e){return e.__proto__=S.prototype,e},S.from=function(e,t,r){return fe(null,e,t,r)},S.TYPED_ARRAY_SUPPORT&&(S.prototype.__proto__=Uint8Array.prototype,S.__proto__=Uint8Array),S.alloc=function(e,t,r){return n=null,t=t,r=r,de(e=e),!(e<=0)&&void 0!==t?"string"==typeof r?s(n,e).fill(t,r):s(n,e).fill(t):s(n,e);var n},S.allocUnsafe=function(e){return he(null,e)},S.allocUnsafeSlow=function(e){return he(null,e)},S.isBuffer=Le,S.compare=function(e,t){if(!d(e)||!d(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},S.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},S.concat=function(e,t){if(!ue(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return S.alloc(0);if(void 0===t)for(o=t=0;o<e.length;++o)t+=e[o].length;for(var r=S.allocUnsafe(t),n=0,o=0;o<e.length;++o){var i=e[o];if(!d(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,n),n+=i.length}return r},S.byteLength=be,S.prototype._isBuffer=!0,S.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)n(this,t,t+1);return this},S.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)n(this,t,t+3),n(this,t+1,t+2);return this},S.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)n(this,t,t+7),n(this,t+1,t+6),n(this,t+2,t+5),n(this,t+3,t+4);return this},S.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?Se(this,0,e):ge.apply(this,arguments)},S.prototype.equals=function(e){if(d(e))return this===e||0===S.compare(this,e);throw new TypeError("Argument must be a Buffer")},S.prototype.inspect=function(){var e="";return 0<this.length&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(e+=" ... ")),"<Buffer "+e+">"},S.prototype.compare=function(e,t,r,n,o){if(!d(e))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),(t=void 0===t?0:t)<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(o<=n&&r<=t)return 0;if(o<=n)return-1;if(r<=t)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(i,a),l=this.slice(n,o),u=e.slice(t,r),c=0;c<s;++c)if(l[c]!==u[c]){i=l[c],a=u[c];break}return i<a?-1:a<i?1:0},S.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},S.prototype.indexOf=function(e,t,r){return _e(this,e,t,r,!0)},S.prototype.lastIndexOf=function(e,t,r){return _e(this,e,t,r,!1)},S.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||o<r)&&(r=o),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var i,a,s,l=!1;;)switch(n){case"hex":var u=this,c=e,f=t,d=r,h=(f=Number(f)||0,u.length-f);if((!d||h<(d=Number(d)))&&(d=h),(h=c.length)%2!=0)throw new TypeError("Invalid hex string");h/2<d&&(d=h/2);for(var p=0;p<d;++p){var y=parseInt(c.substr(2*p,2),16);if(isNaN(y))return p;u[f+p]=y}return p;case"utf8":case"utf-8":return h=t,s=r,je(Ce(e,(a=this).length-h),a,h,s);case"ascii":return we(this,e,t,r);case"latin1":case"binary":return we(this,e,t,r);case"base64":return a=this,s=t,i=r,je(Be(e),a,s,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,e,t,r);default:if(l)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),l=!0}},S.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Te=4096;function a(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function h(e,t,r,n,o,i){if(!d(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<t||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function Re(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);o<i;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function Ae(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);o<i;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function Ee(e,t,r,n){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Pe(e,t,r,n,o){return o||Ee(e,0,r,4),se(e,t,r,n,23,4),r+4}function Oe(e,t,r,n,o){return o||Ee(e,0,r,8),se(e,t,r,n,52,8),r+8}S.prototype.slice=function(e,t){var r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),S.TYPED_ARRAY_SUPPORT)(o=this.subarray(e,t)).__proto__=S.prototype;else for(var n=t-e,o=new S(n,void 0),i=0;i<n;++i)o[i]=this[i+e];return o},S.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||a(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},S.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||a(e,t,this.length);for(var n=this[e+--t],o=1;0<t&&(o*=256);)n+=this[e+--t]*o;return n},S.prototype.readUInt8=function(e,t){return t||a(e,1,this.length),this[e]},S.prototype.readUInt16LE=function(e,t){return t||a(e,2,this.length),this[e]|this[e+1]<<8},S.prototype.readUInt16BE=function(e,t){return t||a(e,2,this.length),this[e]<<8|this[e+1]},S.prototype.readUInt32LE=function(e,t){return t||a(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},S.prototype.readUInt32BE=function(e,t){return t||a(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},S.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||a(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return(o*=128)<=n&&(n-=Math.pow(2,8*t)),n},S.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||a(e,t,this.length);for(var n=t,o=1,i=this[e+--n];0<n&&(o*=256);)i+=this[e+--n]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*t)),i},S.prototype.readInt8=function(e,t){return t||a(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},S.prototype.readInt16LE=function(e,t){t||a(e,2,this.length);t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},S.prototype.readInt16BE=function(e,t){t||a(e,2,this.length);t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},S.prototype.readInt32LE=function(e,t){return t||a(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},S.prototype.readInt32BE=function(e,t){return t||a(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},S.prototype.readFloatLE=function(e,t){return t||a(e,4,this.length),ae(this,e,!0,23,4)},S.prototype.readFloatBE=function(e,t){return t||a(e,4,this.length),ae(this,e,!1,23,4)},S.prototype.readDoubleLE=function(e,t){return t||a(e,8,this.length),ae(this,e,!0,52,8)},S.prototype.readDoubleBE=function(e,t){return t||a(e,8,this.length),ae(this,e,!1,52,8)},S.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||h(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},S.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||h(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;0<=--o&&(i*=256);)this[t+o]=e/i&255;return t+r},S.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||h(this,e,t,1,255,0),S.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},S.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||h(this,e,t,2,65535,0),S.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Re(this,e,t,!0),t+2},S.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||h(this,e,t,2,65535,0),S.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Re(this,e,t,!1),t+2},S.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||h(this,e,t,4,4294967295,0),S.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):Ae(this,e,t,!0),t+4},S.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||h(this,e,t,4,4294967295,0),S.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Ae(this,e,t,!1),t+4},S.prototype.writeIntLE=function(e,t,r,n){e=+e,t|=0,n||h(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var o=0,i=1,a=0;for(this[t]=255&e;++o<r&&(i*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/i>>0)-a&255;return t+r},S.prototype.writeIntBE=function(e,t,r,n){e=+e,t|=0,n||h(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var o=r-1,i=1,a=0;for(this[t+o]=255&e;0<=--o&&(i*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/i>>0)-a&255;return t+r},S.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||h(this,e,t,1,127,-128),S.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&(e=e<0?255+e+1:e),t+1},S.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||h(this,e,t,2,32767,-32768),S.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Re(this,e,t,!0),t+2},S.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||h(this,e,t,2,32767,-32768),S.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Re(this,e,t,!1),t+2},S.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||h(this,e,t,4,2147483647,-2147483648),S.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Ae(this,e,t,!0),t+4},S.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||h(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),S.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Ae(this,e,t,!1),t+4},S.prototype.writeFloatLE=function(e,t,r){return Pe(this,e,t,!0,r)},S.prototype.writeFloatBE=function(e,t,r){return Pe(this,e,t,!1,r)},S.prototype.writeDoubleLE=function(e,t,r){return Oe(this,e,t,!0,r)},S.prototype.writeDoubleBE=function(e,t,r){return Oe(this,e,t,!1,r)},S.prototype.copy=function(e,t,r,n){if(r=r||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var o,i=(n=e.length-t<n-r?e.length-t+r:n)-r;if(this===e&&r<t&&t<n)for(o=i-1;0<=o;--o)e[o+t]=this[o+r];else if(i<1e3||!S.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},S.prototype.fill=function(e,t,r,n){if("string"==typeof e){var o;if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1!==e.length||(o=e.charCodeAt(0))<256&&(e=o),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!S.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(s=t;s<r;++s)this[s]=e;else for(var i=d(e)?e:Ce(new S(e,n).toString()),a=i.length,s=0;s<r-t;++s)this[s+t]=i[s%a];return this};var ke=/[^+\/0-9A-Za-z-_]/g;function Ce(e,t){t=t||1/0;for(var r,n=e.length,o=null,i=[],a=0;a<n;++a){if(55295<(r=e.charCodeAt(a))&&r<57344){if(!o){if(56319<r){-1<(t-=3)&&i.push(239,191,189);continue}if(a+1===n){-1<(t-=3)&&i.push(239,191,189);continue}o=r;continue}if(r<56320){-1<(t-=3)&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&-1<(t-=3)&&i.push(239,191,189);if(o=null,r<128){if(--t<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function Be(e){var t=function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(ke,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e);re||ne();var r,e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");for(var n="="===t[e-2]?2:"="===t[e-1]?1:0,o=new te(3*e/4-n),i=0<n?e-4:e,a=0,s=0;s<i;s+=4)r=f[t.charCodeAt(s)]<<18|f[t.charCodeAt(s+1)]<<12|f[t.charCodeAt(s+2)]<<6|f[t.charCodeAt(s+3)],o[a++]=r>>16&255,o[a++]=r>>8&255,o[a++]=255&r;return 2==n?(r=f[t.charCodeAt(s)]<<2|f[t.charCodeAt(s+1)]>>4,o[a++]=255&r):1==n&&(r=f[t.charCodeAt(s)]<<10|f[t.charCodeAt(s+1)]<<4|f[t.charCodeAt(s+2)]>>2,o[a++]=r>>8&255,o[a++]=255&r),o}function je(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function Le(e){return null!=e&&(!!e._isBuffer||qe(e)||"function"==typeof(e=e).readFloatLE&&"function"==typeof e.slice&&qe(e.slice(0,0)))}function qe(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}global=V(Object.freeze({__proto__:null,Buffer:S,INSPECT_MAX_BYTES:50,SlowBuffer:function(e){return S.alloc(+(e=+e!=e?0:e))},isBuffer:Le,kMaxLength:global}));function Ie(){throw new Error("setTimeout has not been defined")}function Me(){throw new Error("clearTimeout has not been defined")}var o=Ie,i=Me;function De(t){if(o===setTimeout)return setTimeout(t,0);if((o===Ie||!o)&&setTimeout)return(o=setTimeout)(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}"function"==typeof t.setTimeout&&(o=setTimeout),"function"==typeof t.clearTimeout&&(i=clearTimeout);var p,y=[],Ue=!1,Fe=-1;function ze(){Ue&&p&&(Ue=!1,p.length?y=p.concat(y):Fe=-1,y.length&&xe())}function xe(){if(!Ue){for(var e=De(ze),t=(Ue=!0,y.length);t;){for(p=y,y=[];++Fe<t;)p&&p[Fe].run();Fe=-1,t=y.length}p=null,Ue=!1,!function(t){if(i===clearTimeout)return clearTimeout(t);if((i===Me||!i)&&clearTimeout)return(i=clearTimeout)(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function We(e,t){this.fun=e,this.array=t}We.prototype.run=function(){this.fun.apply(null,this.array)};function b(){}var Ne=b,Ye=b,He=b,$e=b,Ve=b,g=b,_=b;var Ke=t.performance||{},Ge=Ke.now||Ke.mozNow||Ke.msNow||Ke.oNow||Ke.webkitNow||function(){return(new Date).getTime()};var Qe=new Date;var Je={nextTick:function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];y.push(new We(e,t)),1!==y.length||Ue||De(xe)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Ne,addListener:Ye,once:He,off:$e,removeListener:Ve,removeAllListeners:g,emit:_,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*Ge.call(Ke),r=Math.floor(t),t=Math.floor(t%1*1e9);return e&&(r-=e[0],(t-=e[1])<0&&(r--,t+=1e9)),[r,t]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Qe)/1e3}};t={exports:{}};!function(e){{const k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:e=>`Symbol(${e})`;function M(){}function D(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==oo?oo:void 0}const kn=D();function t(e){return"object"==typeof e&&null!==e||"function"==typeof e}const Cn=M,Bn=Promise,jn=Promise.prototype.then,C=Promise.resolve.bind(Bn),Ln=Promise.reject.bind(Bn);function S(e){return new Bn(e)}function U(e){return C(e)}function i(e){return Ln(e)}function T(e,t,r){return jn.call(e,t,r)}function R(e,t,r){T(T(e,t,r),void 0,Cn)}function F(e,t){R(e,t)}function z(e,t){R(e,void 0,t)}function o(e,t,r){return T(e,t,r)}function x(e){T(e,void 0,Cn)}const qn=(()=>{var e=kn&&kn.queueMicrotask;if("function"==typeof e)return e;const t=C(void 0);return e=>T(t,e)})();function W(e,t,r){if("function"!=typeof e)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,r)}function a(e,t,r){try{return U(W(e,t,r))}catch(e){return i(e)}}class B{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(e){const t=this._back;let r=t;16383===t._elements.length&&(r={_elements:[],_next:void 0}),t._elements.push(e),r!==t&&(this._back=r,t._next=r),++this._size}shift(){var e=this._front;let t=e;var r=this._cursor;let n=r+1;const o=e._elements;var i=o[r];return 16384===n&&(t=e._next,n=0),--this._size,this._cursor=n,e!==t&&(this._front=t),o[r]=void 0,i}forEach(e){let t=this._cursor,r=this._front,n=r._elements;for(;!(t===n.length&&void 0===r._next||t===n.length&&(r=r._next,n=r._elements,(t=0)===n.length));)e(n[t]),++t}peek(){var e=this._front,t=this._cursor;return e._elements[t]}}function N(e,t){(e._ownerReadableStream=t)._reader=e,"readable"===t._state?H(e):"closed"===t._state?V(e):$(e,t._storedError)}function Y(e,t){return O(e._ownerReadableStream,t)}function A(e){("readable"===e._ownerReadableStream._state?K:G)(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function s(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function H(r){r._closedPromise=S((e,t)=>{r._closedPromise_resolve=e,r._closedPromise_reject=t})}function $(e,t){H(e),K(e,t)}function V(e){H(e),Q(e)}function K(e,t){void 0!==e._closedPromise_reject&&(x(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function G(e,t){$(e,t)}function Q(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}const In=k("[[AbortSteps]]"),Mn=k("[[ErrorSteps]]"),Dn=k("[[CancelSteps]]"),Un=k("[[PullSteps]]"),Fn=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},zn=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function J(e){return"object"==typeof e||"function"==typeof e}function l(e,t){if(void 0!==e&&!J(e))throw new TypeError(t+" is not an object.")}function u(e,t){if("function"!=typeof e)throw new TypeError(t+" is not a function.")}function Z(e){return"object"==typeof e&&null!==e||"function"==typeof e}function X(e,t){if(!Z(e))throw new TypeError(t+" is not an object.")}function r(e,t,r){if(void 0===e)throw new TypeError(`Parameter ${t} is required in '${r}'.`)}function ee(e,t,r){if(void 0===e)throw new TypeError(t+` is required in '${r}'.`)}function te(e){return Number(e)}function re(e){return 0===e?0:e}function ne(e){return re(zn(e))}function oe(e,t){var r=Number.MAX_SAFE_INTEGER,e=re(Number(e));if(!Fn(e))throw new TypeError(t+" is not a finite number");if((e=ne(e))<0||r<e)throw new TypeError(t+` is outside the accepted range of 0 to ${r}, inclusive`);return Fn(e)&&0!==e?e:0}function ie(e,t){if(!b(e))throw new TypeError(t+" is not a ReadableStream.")}function E(e){return new xn(e)}function ae(e,t){e._reader._readRequests.push(t)}function se(e,t,r){const n=e._reader,o=n._readRequests.shift();r?o._closeSteps():o._chunkSteps(t)}function le(e){return e._reader._readRequests.length}function ue(e){e=e._reader;return void 0!==e&&!!m(e)}class xn{constructor(e){if(r(e,1,"ReadableStreamDefaultReader"),ie(e,"First parameter"),g(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");N(this,e),this._readRequests=new B}get closed(){return m(this)?this._closedPromise:i(fe("closed"))}cancel(e=void 0){return m(this)?void 0===this._ownerReadableStream?i(s("cancel")):Y(this,e):i(fe("cancel"))}read(){if(!m(this))return i(fe("read"));if(void 0===this._ownerReadableStream)return i(s("read from"));let r,n;var e=S((e,t)=>{r=e,n=t});return ce(this,{_chunkSteps:e=>r({value:e,done:!1}),_closeSteps:()=>r({value:void 0,done:!0}),_errorSteps:e=>n(e)}),e}releaseLock(){if(!m(this))throw fe("releaseLock");if(void 0!==this._ownerReadableStream){if(0<this._readRequests.length)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");A(this)}}}function m(e){return t(e)&&(Object.prototype.hasOwnProperty.call(e,"_readRequests")&&e instanceof xn)}function ce(e,t){const r=e._ownerReadableStream;r._disturbed=!0,"closed"===r._state?t._closeSteps():"errored"===r._state?t._errorSteps(r._storedError):r._readableStreamController[Un](t)}function fe(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}Object.defineProperties(xn.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof k.toStringTag&&Object.defineProperty(xn.prototype,k.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});var de=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Wn{constructor(e,t){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=t}next(){var e=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?o(this._ongoingPromise,e,e):e(),this._ongoingPromise}return(e){var t=()=>this._returnSteps(e);return this._ongoingPromise?o(this._ongoingPromise,t,t):t()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});const t=this._reader;if(void 0===t._ownerReadableStream)return i(s("iterate"));let r,n;var e=S((e,t)=>{r=e,n=t});return ce(t,{_chunkSteps:e=>{this._ongoingPromise=void 0,qn(()=>r({value:e,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,A(t),r({value:void 0,done:!0})},_errorSteps:e=>{this._ongoingPromise=void 0,this._isFinished=!0,A(t),n(e)}}),e}_returnSteps(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;var t,r=this._reader;return void 0===r._ownerReadableStream?i(s("finish iterating")):this._preventCancel?(A(r),U({value:e,done:!0})):(t=Y(r,e),A(r),o(t,()=>({value:e,done:!0})))}}const Nn={next(){return pe(this)?this._asyncIteratorImpl.next():i(ye("next"))},return(e){return pe(this)?this._asyncIteratorImpl.return(e):i(ye("return"))}};function he(e,t){e=E(e),e=new Wn(e,t);const r=Object.create(Nn);return r._asyncIteratorImpl=e,r}function pe(e){if(t(e)&&Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))try{return e._asyncIteratorImpl instanceof Wn}catch(e){return}}function ye(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}void 0!==de&&Object.setPrototypeOf(Nn,de);const Yn=Number.isNaN||function(e){return e!=e};function be(e){return e.slice()}function ge(e,t,r,n,o){new Uint8Array(e).set(new Uint8Array(r,n,o),t)}function _e(e,t,r){if(e.slice)return e.slice(t,r);var r=r-t,n=new ArrayBuffer(r);return ge(n,0,e,t,r),n}function me(e){return"number"==typeof e&&(!Yn(e)&&!(e<0))}function we(e){e=_e(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(e)}function ve(e){var t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function Se(e,t,r){if(!me(r)||r===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:r}),e._queueTotalSize+=r}function Te(e){return e._queue.peek().value}function c(e){e._queue=new B,e._queueTotalSize=0}class Hn{constructor(){throw new TypeError("Illegal constructor")}get view(){if(Re(this))return this._view;throw Qe("view")}respond(e){if(!Re(this))throw Qe("respond");if(r(e,1,"respond"),e=oe(e,"First parameter"),void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");this._view.buffer,He(this._associatedReadableByteStreamController,e)}respondWithNewView(e){if(!Re(this))throw Qe("respondWithNewView");if(r(e,1,"respondWithNewView"),!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");e.buffer,$e(this._associatedReadableByteStreamController,e)}}Object.defineProperties(Hn.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),"symbol"==typeof k.toStringTag&&Object.defineProperty(Hn.prototype,k.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class j{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(n(this))return Ne(this);throw Je("byobRequest")}get desiredSize(){if(n(this))return Ye(this);throw Je("desiredSize")}close(){if(!n(this))throw Je("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var e=this._controlledReadableByteStream._state;if("readable"!==e)throw new TypeError(`The stream (in ${e} state) is not in the readable state and cannot be closed`);xe(this)}enqueue(e){if(!n(this))throw Je("enqueue");if(r(e,1,"enqueue"),!ArrayBuffer.isView(e))throw new TypeError("chunk must be an array buffer view");if(0===e.byteLength)throw new TypeError("chunk must have non-zero byteLength");if(0===e.buffer.byteLength)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var t=this._controlledReadableByteStream._state;if("readable"!==t)throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be enqueued to`);We(this,e)}error(e=void 0){if(!n(this))throw Je("error");w(this,e)}[Dn](e){Ae(this),c(this);e=this._cancelAlgorithm(e);return ze(this),e}[Un](t){var e=this._controlledReadableByteStream;if(0<this._queueTotalSize)return r=this._queue.shift(),this._queueTotalSize-=r.byteLength,Be(this),r=new Uint8Array(r.buffer,r.byteOffset,r.byteLength),void t._chunkSteps(r);var r=this._autoAllocateChunkSize;if(void 0!==r){let e;try{e=new ArrayBuffer(r)}catch(e){return void t._errorSteps(e)}r={buffer:e,bufferByteLength:r,byteOffset:0,byteLength:r,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(r)}ae(e,t),f(this)}}function n(e){return t(e)&&(Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")&&e instanceof j)}function Re(e){return t(e)&&(Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")&&e instanceof Hn)}function f(t){Fe(t)&&(t._pulling?t._pullAgain=!0:(t._pulling=!0,R(t._pullAlgorithm(),()=>{t._pulling=!1,t._pullAgain&&(t._pullAgain=!1,f(t))},e=>{w(t,e)})))}function Ae(e){je(e),e._pendingPullIntos=new B}function Ee(e,t){let r=!1;"closed"===e._state&&(r=!0);var n=Pe(t);("default"===t.readerType?se:et)(e,n,r)}function Pe(e){var t=e.bytesFilled,r=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/r)}function Oe(e,t,r,n){e._queue.push({buffer:t,byteOffset:r,byteLength:n}),e._queueTotalSize+=n}function ke(e,t){var r=t.elementSize,n=t.bytesFilled-t.bytesFilled%r,o=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),i=t.bytesFilled+o,i=i-i%r;let a=o,s=!1;n<i&&(a=i-t.bytesFilled,s=!0);const l=e._queue;for(;0<a;){const f=l.peek();var u=Math.min(a,f.byteLength),c=t.byteOffset+t.bytesFilled;ge(t.buffer,c,f.buffer,f.byteOffset,u),f.byteLength===u?l.shift():(f.byteOffset+=u,f.byteLength-=u),e._queueTotalSize-=u,Ce(0,u,t),a-=u}return s}function Ce(e,t,r){r.bytesFilled+=t}function Be(e){0===e._queueTotalSize&&e._closeRequested?(ze(e),Zr(e._controlledReadableByteStream)):f(e)}function je(e){null!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Le(e){for(;0<e._pendingPullIntos.length;){if(0===e._queueTotalSize)return;var t=e._pendingPullIntos.peek();ke(e,t)&&(Ue(e),Ee(e._controlledReadableByteStream,t))}}function qe(e,t,r){var n=e._controlledReadableByteStream;let o=1;t.constructor!==DataView&&(o=t.constructor.BYTES_PER_ELEMENT);const i=t.constructor;var a=t.buffer,a={buffer:a,bufferByteLength:a.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:o,viewConstructor:i,readerType:"byob"};if(0<e._pendingPullIntos.length)return e._pendingPullIntos.push(a),void Xe(n,r);if("closed"===n._state)return t=new i(a.buffer,a.byteOffset,0),void r._closeSteps(t);if(0<e._queueTotalSize){if(ke(e,a))return t=Pe(a),Be(e),void r._chunkSteps(t);if(e._closeRequested)return w(e,t=new TypeError("Insufficient bytes to fill elements in the given buffer")),void r._errorSteps(t)}e._pendingPullIntos.push(a),Xe(n,r),f(e)}function Ie(e){var t=e._controlledReadableByteStream;if(rt(t))for(;0<tt(t);)Ee(t,Ue(e))}function Me(e,t,r){var n;Ce(0,t,r),r.bytesFilled<r.elementSize||(Ue(e),0<(t=r.bytesFilled%r.elementSize)&&(n=r.byteOffset+r.bytesFilled,Oe(e,n=_e(r.buffer,n-t,n),0,n.byteLength)),r.bytesFilled-=t,Ee(e._controlledReadableByteStream,r),Le(e))}function De(e,t){var r=e._pendingPullIntos.peek(),n=(je(e),e._controlledReadableByteStream._state);"closed"===n?Ie(e):Me(e,t,r),f(e)}function Ue(e){return e._pendingPullIntos.shift()}function Fe(e){var t=e._controlledReadableByteStream;return"readable"===t._state&&(!e._closeRequested&&(!!e._started&&(!!(ue(t)&&0<le(t))||(!!(rt(t)&&0<tt(t))||0<Ye(e)))))}function ze(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function xe(e){var t,r=e._controlledReadableByteStream;if(!e._closeRequested&&"readable"===r._state)if(0<e._queueTotalSize)e._closeRequested=!0;else{if(0<e._pendingPullIntos.length)if(0<e._pendingPullIntos.peek().bytesFilled)throw w(e,t=new TypeError("Insufficient bytes to fill elements in the given buffer")),t;ze(e),Zr(r)}}function We(e,t){var r=e._controlledReadableByteStream;if(!e._closeRequested&&"readable"===r._state){var n=t.buffer,o=t.byteOffset,t=t.byteLength;if(0<e._pendingPullIntos.length){const i=e._pendingPullIntos.peek();i.buffer,i.buffer=i.buffer}je(e),ue(r)?0===le(r)?Oe(e,n,o,t):(0<e._pendingPullIntos.length&&Ue(e),se(r,new Uint8Array(n,o,t),!1)):rt(r)?(Oe(e,n,o,t),Le(e)):Oe(e,n,o,t),f(e)}}function w(e,t){var r=e._controlledReadableByteStream;"readable"===r._state&&(Ae(e),c(e),ze(e),Xr(r,t))}function Ne(e){var t,r;return null===e._byobRequest&&0<e._pendingPullIntos.length&&(t=e._pendingPullIntos.peek(),t=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),Ge(r=Object.create(Hn.prototype),e,t),e._byobRequest=r),e._byobRequest}function Ye(e){var t=e._controlledReadableByteStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function He(e,t){const r=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(0===t)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(r.bytesFilled+t>r.byteLength)throw new RangeError("bytesWritten out of range")}r.buffer=r.buffer,De(e,t)}function $e(e,t){const r=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t.byteLength)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(0===t.byteLength)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(r.byteOffset+r.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(r.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(r.bytesFilled+t.byteLength>r.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");var n=t.byteLength;r.buffer=t.buffer,De(e,n)}function Ve(e,t,r,n,o,i,a){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,c(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=i,t._pullAlgorithm=n,t._cancelAlgorithm=o,t._autoAllocateChunkSize=a,t._pendingPullIntos=new B,e._readableStreamController=t,R(U(r()),()=>{t._started=!0,f(t)},e=>{w(t,e)})}function Ke(e,t,r){const n=Object.create(j.prototype);let o=()=>{},i=()=>C(void 0),a=()=>C(void 0);void 0!==t.start&&(o=()=>t.start(n)),void 0!==t.pull&&(i=()=>t.pull(n)),void 0!==t.cancel&&(a=e=>t.cancel(e));var s=t.autoAllocateChunkSize;if(0===s)throw new TypeError("autoAllocateChunkSize must be greater than 0");Ve(e,n,o,i,a,r,s)}function Ge(e,t,r){e._associatedReadableByteStreamController=t,e._view=r}function Qe(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Je(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Ze(e){return new $n(e)}function Xe(e,t){e._reader._readIntoRequests.push(t)}function et(e,t,r){const n=e._reader,o=n._readIntoRequests.shift();r?o._closeSteps(t):o._chunkSteps(t)}function tt(e){return e._reader._readIntoRequests.length}function rt(e){e=e._reader;return void 0!==e&&!!v(e)}Object.defineProperties(j.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof k.toStringTag&&Object.defineProperty(j.prototype,k.toStringTag,{value:"ReadableByteStreamController",configurable:!0});class $n{constructor(e){if(r(e,1,"ReadableStreamBYOBReader"),ie(e,"First parameter"),g(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!n(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");N(this,e),this._readIntoRequests=new B}get closed(){return v(this)?this._closedPromise:i(ot("closed"))}cancel(e=void 0){return v(this)?void 0===this._ownerReadableStream?i(s("cancel")):Y(this,e):i(ot("cancel"))}read(e){if(!v(this))return i(ot("read"));if(!ArrayBuffer.isView(e))return i(new TypeError("view must be an array buffer view"));if(0===e.byteLength)return i(new TypeError("view must have non-zero byteLength"));if(0===e.buffer.byteLength)return i(new TypeError("view's buffer must have non-zero byteLength"));if(e.buffer,void 0===this._ownerReadableStream)return i(s("read from"));let r,n;var t=S((e,t)=>{r=e,n=t});return nt(this,e,{_chunkSteps:e=>r({value:e,done:!1}),_closeSteps:e=>r({value:e,done:!0}),_errorSteps:e=>n(e)}),t}releaseLock(){if(!v(this))throw ot("releaseLock");if(void 0!==this._ownerReadableStream){if(0<this._readIntoRequests.length)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");A(this)}}}function v(e){return t(e)&&(Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")&&e instanceof $n)}function nt(e,t,r){const n=e._ownerReadableStream;n._disturbed=!0,"errored"===n._state?r._errorSteps(n._storedError):qe(n._readableStreamController,t,r)}function ot(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function it(e,t){e=e.highWaterMark;if(void 0===e)return t;if(Yn(e)||e<0)throw new RangeError("Invalid highWaterMark");return e}function at(e){e=e.size;return e||(()=>1)}function st(e,t){l(e,t);var r=null==e?void 0:e.highWaterMark,e=null==e?void 0:e.size;return{highWaterMark:void 0===r?void 0:te(r),size:void 0===e?void 0:lt(e,t+" has member 'size' that")}}function lt(t,e){return u(t,e),e=>te(t(e))}function ut(e,t){l(e,t);var r=null==e?void 0:e.abort,n=null==e?void 0:e.close,o=null==e?void 0:e.start,i=null==e?void 0:e.type,a=null==e?void 0:e.write;return{abort:void 0===r?void 0:ct(r,e,t+" has member 'abort' that"),close:void 0===n?void 0:ft(n,e,t+" has member 'close' that"),start:void 0===o?void 0:dt(o,e,t+" has member 'start' that"),write:void 0===a?void 0:ht(a,e,t+" has member 'write' that"),type:i}}function ct(t,r,e){return u(t,e),e=>a(t,r,[e])}function ft(e,t,r){return u(e,r),()=>a(e,t,[])}function dt(t,r,e){return u(t,e),e=>W(t,r,[e])}function ht(r,n,e){return u(r,e),(e,t)=>a(r,n,[e,t])}function pt(e,t){if(!d(e))throw new TypeError(t+" is not a WritableStream.")}function yt(e){if("object"==typeof e&&null!==e)try{return"boolean"==typeof e.aborted}catch(e){return}}Object.defineProperties($n.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof k.toStringTag&&Object.defineProperty($n.prototype,k.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});const Vn="function"==typeof AbortController;function bt(){if(Vn)return new AbortController}class Kn{constructor(e={},t={}){void 0===e?e=null:X(e,"First parameter");var t=st(t,"Second parameter"),e=ut(e,"First parameter"),r=(mt(this),e.type);if(void 0!==r)throw new RangeError("Invalid type is specified");r=at(t);$t(this,e,it(t,1),r)}get locked(){if(d(this))return wt(this);throw or("locked")}abort(e=void 0){return d(this)?wt(this)?i(new TypeError("Cannot abort a stream that already has a writer")):vt(this,e):i(or("abort"))}close(){return d(this)?wt(this)?i(new TypeError("Cannot close a stream that already has a writer")):P(this)?i(new TypeError("Cannot close an already-closing stream")):St(this):i(or("close"))}getWriter(){if(d(this))return gt(this);throw or("getWriter")}}function gt(e){return new Gn(e)}function _t(e,t,r,n,o=1,i=()=>1){var a=Object.create(Kn.prototype),s=(mt(a),Object.create(L.prototype));return Ht(a,s,e,t,r,n,o,i),a}function mt(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new B,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function d(e){return t(e)&&(Object.prototype.hasOwnProperty.call(e,"_writableStreamController")&&e instanceof Kn)}function wt(e){return void 0!==e._writer}function vt(r,n){if("closed"===r._state||"errored"===r._state)return C(void 0);r._writableStreamController._abortReason=n,null!=(e=r._writableStreamController._abortController)&&e.abort();var e=r._state;if("closed"===e||"errored"===e)return C(void 0);if(void 0!==r._pendingAbortRequest)return r._pendingAbortRequest._promise;let o=!1;"erroring"===e&&(o=!0,n=void 0);e=S((e,t)=>{r._pendingAbortRequest={_promise:void 0,_resolve:e,_reject:t,_reason:n,_wasAlreadyErroring:o}});return r._pendingAbortRequest._promise=e,o||At(r,n),e}function St(r){var e=r._state;if("closed"===e||"errored"===e)return i(new TypeError(`The stream (in ${e} state) is not in the writable state and cannot be closed`));var t=S((e,t)=>{r._closeRequest={_resolve:e,_reject:t}}),n=r._writer;return void 0!==n&&r._backpressure&&"writable"===e&&mr(n),Kt(r._writableStreamController),t}function Tt(r){return S((e,t)=>{r._writeRequests.push({_resolve:e,_reject:t})})}function Rt(e,t){"writable"===e._state?At(e,t):Et(e)}function At(e,t){var r=e._writableStreamController,n=(e._state="erroring",e._storedError=t,e._writer);void 0!==n&&zt(n,t),!Bt(e)&&r._started&&Et(e)}function Et(t){t._state="errored",t._writableStreamController[Mn]();const r=t._storedError;if(t._writeRequests.forEach(e=>{e._reject(r)}),t._writeRequests=new B,void 0===t._pendingAbortRequest)qt(t);else{const n=t._pendingAbortRequest;if(t._pendingAbortRequest=void 0,n._wasAlreadyErroring)return n._reject(r),void qt(t);R(t._writableStreamController[In](n._reason),()=>{n._resolve(),qt(t)},e=>{n._reject(e),qt(t)})}}function Pt(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Ot(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,Rt(e,t)}function kt(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0;"erroring"===e._state&&(e._storedError=void 0)!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0),e._state="closed";e=e._writer;void 0!==e&&dr(e)}function Ct(e,t){e._inFlightCloseRequest._reject(t),(e._inFlightCloseRequest=void 0)!==e._pendingAbortRequest&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),Rt(e,t)}function P(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function Bt(e){return void 0!==e._inFlightWriteRequest||void 0!==e._inFlightCloseRequest}function jt(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Lt(e){e._inFlightWriteRequest=e._writeRequests.shift()}function qt(e){void 0!==e._closeRequest&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);var t=e._writer;void 0!==t&&cr(t,e._storedError)}function It(e,t){var r=e._writer;void 0!==r&&t!==e._backpressure&&(t?gr:mr)(r),e._backpressure=t}Object.defineProperties(Kn.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof k.toStringTag&&Object.defineProperty(Kn.prototype,k.toStringTag,{value:"WritableStream",configurable:!0});class Gn{constructor(e){if(r(e,1,"WritableStreamDefaultWriter"),pt(e,"First parameter"),wt(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");(this._ownerWritableStream=e)._writer=this;var t=e._state;"writable"===t?((!P(e)&&e._backpressure?hr:yr)(this),sr(this)):"erroring"===t?(pr(this,e._storedError),sr(this)):"closed"===t?(yr(this),ur(this)):(pr(this,t=e._storedError),lr(this,t))}get closed(){return h(this)?this._closedPromise:i(p("closed"))}get desiredSize(){if(!h(this))throw p("desiredSize");if(void 0===this._ownerWritableStream)throw ar("desiredSize");return xt(this)}get ready(){return h(this)?this._readyPromise:i(p("ready"))}abort(e=void 0){return h(this)?void 0===this._ownerWritableStream?i(ar("abort")):Mt(this,e):i(p("abort"))}close(){if(!h(this))return i(p("close"));var e=this._ownerWritableStream;return void 0===e?i(ar("close")):P(e)?i(new TypeError("Cannot close an already-closing stream")):Dt(this)}releaseLock(){if(!h(this))throw p("releaseLock");void 0!==this._ownerWritableStream&&Wt(this)}write(e=void 0){return h(this)?void 0===this._ownerWritableStream?i(ar("write to")):Nt(this,e):i(p("write"))}}function h(e){return t(e)&&(Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")&&e instanceof Gn)}function Mt(e,t){return vt(e._ownerWritableStream,t)}function Dt(e){return St(e._ownerWritableStream)}function Ut(e){var t=e._ownerWritableStream,r=t._state;return P(t)||"closed"===r?C(void 0):"errored"===r?i(t._storedError):Dt(e)}function Ft(e,t){("pending"===e._closedPromiseState?cr:fr)(e,t)}function zt(e,t){("pending"===e._readyPromiseState?br:_r)(e,t)}function xt(e){var e=e._ownerWritableStream,t=e._state;return"errored"===t||"erroring"===t?null:"closed"===t?0:Qt(e._writableStreamController)}function Wt(e){const t=e._ownerWritableStream;var r=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");zt(e,r),Ft(e,r),t._writer=void 0,e._ownerWritableStream=void 0}function Nt(e,t){var r=e._ownerWritableStream,n=r._writableStreamController,o=Gt(n,t);if(r!==e._ownerWritableStream)return i(ar("write to"));e=r._state;if("errored"===e)return i(r._storedError);if(P(r)||"closed"===e)return i(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===e)return i(r._storedError);e=Tt(r);return Jt(n,t,o),e}Object.defineProperties(Gn.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),"symbol"==typeof k.toStringTag&&Object.defineProperty(Gn.prototype,k.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});const Qn={};class L{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(Yt(this))return this._abortReason;throw ir("abortReason")}get signal(){if(!Yt(this))throw ir("signal");if(void 0===this._abortController)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(e=void 0){if(!Yt(this))throw ir("error");"writable"===this._controlledWritableStream._state&&nr(this,e)}[In](e){e=this._abortAlgorithm(e);return Vt(this),e}[Mn](){c(this)}}function Yt(e){return t(e)&&(Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")&&e instanceof L)}function Ht(t,r,e,n,o,i,a,s){((r._controlledWritableStream=t)._writableStreamController=r)._queue=void 0,r._queueTotalSize=void 0,c(r),r._abortReason=void 0,r._abortController=bt(),r._started=!1,r._strategySizeAlgorithm=s,r._strategyHWM=a,r._writeAlgorithm=n,r._closeAlgorithm=o,r._abortAlgorithm=i;s=rr(r),It(t,s),a=e();R(U(a),()=>{r._started=!0,Zt(r)},e=>{r._started=!0,Rt(t,e)})}function $t(e,t,r,n){const o=Object.create(L.prototype);let i=()=>{},a=()=>C(void 0),s=()=>C(void 0),l=()=>C(void 0);void 0!==t.start&&(i=()=>t.start(o)),void 0!==t.write&&(a=e=>t.write(e,o)),void 0!==t.close&&(s=()=>t.close()),void 0!==t.abort&&(l=e=>t.abort(e)),Ht(e,o,i,a,s,l,r,n)}function Vt(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Kt(e){Se(e,Qn,0),Zt(e)}function Gt(t,e){try{return t._strategySizeAlgorithm(e)}catch(e){return Xt(t,e),1}}function Qt(e){return e._strategyHWM-e._queueTotalSize}function Jt(t,e,r){try{Se(t,e,r)}catch(e){return void Xt(t,e)}e=t._controlledWritableStream;P(e)||"writable"!==e._state||It(e,rr(t)),Zt(t)}function Zt(e){var t=e._controlledWritableStream;e._started&&void 0===t._inFlightWriteRequest&&("erroring"===t._state?Et(t):0!==e._queue.length&&((t=Te(e))===Qn?er(e):tr(e,t)))}function Xt(e,t){"writable"===e._controlledWritableStream._state&&nr(e,t)}function er(e){const t=e._controlledWritableStream;jt(t),ve(e);var r=e._closeAlgorithm();Vt(e),R(r,()=>{kt(t)},e=>{Ct(t,e)})}function tr(t,e){const r=t._controlledWritableStream;Lt(r),R(t._writeAlgorithm(e),()=>{Pt(r);var e=r._state;ve(t),P(r)||"writable"!==e||(e=rr(t),It(r,e)),Zt(t)},e=>{"writable"===r._state&&Vt(t),Ot(r,e)})}function rr(e){return Qt(e)<=0}function nr(e,t){var r=e._controlledWritableStream;Vt(e),At(r,t)}function or(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function ir(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function p(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function ar(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function sr(r){r._closedPromise=S((e,t)=>{r._closedPromise_resolve=e,r._closedPromise_reject=t,r._closedPromiseState="pending"})}function lr(e,t){sr(e),cr(e,t)}function ur(e){sr(e),dr(e)}function cr(e,t){void 0!==e._closedPromise_reject&&(x(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function fr(e,t){lr(e,t)}function dr(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function hr(r){r._readyPromise=S((e,t)=>{r._readyPromise_resolve=e,r._readyPromise_reject=t}),r._readyPromiseState="pending"}function pr(e,t){hr(e),br(e,t)}function yr(e){hr(e),mr(e)}function br(e,t){void 0!==e._readyPromise_reject&&(x(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function gr(e){hr(e)}function _r(e,t){pr(e,t)}function mr(e){void 0!==e._readyPromise_resolve&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}Object.defineProperties(L.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),"symbol"==typeof k.toStringTag&&Object.defineProperty(L.prototype,k.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});de="undefined"!=typeof DOMException?DOMException:void 0;function wr(e){if("function"==typeof e||"object"==typeof e)try{return new e,1}catch(e){return}}function vr(){function e(e,t){this.message=e||"",this.name=t||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}const Jn=wr(de)?de:vr();function Sr(d,h,p,y,b,g){const _=E(d),m=gt(h);let w=!(d._disturbed=!0),v=C(void 0);return S((r,n)=>{let o;if(void 0!==g){if(o=()=>{const e=new Jn("Aborted","AbortError"),t=[];y||t.push(()=>"writable"===h._state?vt(h,e):C(void 0)),b||t.push(()=>"readable"===d._state?O(d,e):C(void 0)),l(()=>Promise.all(t.map(e=>e())),!0,e)},g.aborted)return void o();g.addEventListener("abort",o)}var e,t,i;if(s(d,_._closedPromise,e=>{y?u(!0,e):l(()=>vt(h,e),!0,e)}),s(h,m._closedPromise,e=>{b?u(!0,e):l(()=>O(d,e),!0,e)}),e=d,t=_._closedPromise,i=()=>{p?u():l(()=>Ut(m))},"closed"===e._state?i():F(t,i),P(h)||"closed"===h._state){const f=new TypeError("the destination writable stream closed before all data could be piped to it");b?u(!0,f):l(()=>O(d,f),!0,f)}function a(){const e=v;return T(v,()=>e!==v?a():void 0)}function s(e,t,r){"errored"===e._state?r(e._storedError):z(t,r)}function l(e,t,r){function n(){R(e(),()=>c(t,r),e=>c(!0,e))}w||(w=!0,"writable"!==h._state||P(h)?n():F(a(),n))}function u(e,t){w||(w=!0,"writable"!==h._state||P(h)?c(e,t):F(a(),()=>c(e,t)))}function c(e,t){Wt(m),A(_),void 0!==g&&g.removeEventListener("abort",o),e?n(t):r(void 0)}x(S((r,n)=>{!function e(t){t?r():T(w?C(!0):T(m._readyPromise,()=>S((t,e)=>{ce(_,{_chunkSteps:e=>{v=T(Nt(m,e),void 0,M),t(!1)},_closeSteps:()=>t(!0),_errorSteps:e})})),e,n)}(!1)}))})}class q{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(Tr(this))return kr(this);throw qr("desiredSize")}close(){if(!Tr(this))throw qr("close");if(!Br(this))throw new TypeError("The stream is not in a state that permits close");Pr(this)}enqueue(e=void 0){if(!Tr(this))throw qr("enqueue");if(Br(this))return Or(this,e);throw new TypeError("The stream is not in a state that permits enqueue")}error(e=void 0){if(!Tr(this))throw qr("error");y(this,e)}[Dn](e){c(this);e=this._cancelAlgorithm(e);return Er(this),e}[Un](e){var t,r=this._controlledReadableStream;0<this._queue.length?(t=ve(this),this._closeRequested&&0===this._queue.length?(Er(this),Zr(r)):Rr(this),e._chunkSteps(t)):(ae(r,e),Rr(this))}}function Tr(e){return t(e)&&(Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")&&e instanceof q)}function Rr(t){Ar(t)&&(t._pulling?t._pullAgain=!0:(t._pulling=!0,R(t._pullAlgorithm(),()=>{t._pulling=!1,t._pullAgain&&(t._pullAgain=!1,Rr(t))},e=>{y(t,e)})))}function Ar(e){var t=e._controlledReadableStream;return!!Br(e)&&(!!e._started&&(!!(g(t)&&0<le(t))||0<kr(e)))}function Er(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Pr(e){var t;Br(e)&&(t=e._controlledReadableStream,e._closeRequested=!0,0===e._queue.length&&(Er(e),Zr(t)))}function Or(t,r){if(Br(t)){var e=t._controlledReadableStream;if(g(e)&&0<le(e))se(e,r,!1);else{let e;try{e=t._strategySizeAlgorithm(r)}catch(e){throw y(t,e),e}try{Se(t,r,e)}catch(e){throw y(t,e),e}}Rr(t)}}function y(e,t){var r=e._controlledReadableStream;"readable"===r._state&&(c(e),Er(e),Xr(r,t))}function kr(e){var t=e._controlledReadableStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function Cr(e){return!Ar(e)}function Br(e){var t=e._controlledReadableStream._state;return!e._closeRequested&&"readable"===t}function jr(e,t,r,n,o,i,a){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,c(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=a,t._strategyHWM=i,t._pullAlgorithm=n,t._cancelAlgorithm=o,e._readableStreamController=t,R(U(r()),()=>{t._started=!0,Rr(t)},e=>{y(t,e)})}function Lr(e,t,r,n){const o=Object.create(q.prototype);let i=()=>{},a=()=>C(void 0),s=()=>C(void 0);void 0!==t.start&&(i=()=>t.start(o)),void 0!==t.pull&&(a=()=>t.pull(o)),void 0!==t.cancel&&(s=e=>t.cancel(e)),jr(e,o,i,a,s,r,n)}function qr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function Ir(e){return(n(e._readableStreamController)?Dr:Mr)(e)}function Mr(t){const r=E(t);let n=!1,o=!1,i=!1,a=!1,s,l,u,c,f;const d=S(e=>{f=e});function h(){if(n)return o=!0,C(void 0);n=!0;var e={_chunkSteps:r=>{qn(()=>{o=!1;var e=r,t=r;i||Or(u._readableStreamController,e),a||Or(c._readableStreamController,t),n=!1,o&&h()})},_closeSteps:()=>{n=!1,i||Pr(u._readableStreamController),a||Pr(c._readableStreamController),i&&a||f(void 0)},_errorSteps:()=>{n=!1}};return ce(r,e),C(void 0)}function e(){}return u=Gr(e,h,function(e){return i=!0,s=e,a&&(e=be([s,l]),e=O(t,e),f(e)),d}),c=Gr(e,h,function(e){return a=!0,l=e,i&&(e=be([s,l]),e=O(t,e),f(e)),d}),z(r._closedPromise,e=>{y(u._readableStreamController,e),y(c._readableStreamController,e),i&&a||f(void 0)}),[u,c]}function Dr(a){let r=E(a),s=!1,l=!1,u=!1,c=!1,f=!1,t,n,d,h,p;const o=S(e=>{p=e});function y(t){z(t._closedPromise,e=>{t===r&&(w(d._readableStreamController,e),w(h._readableStreamController,e),c&&f||p(void 0))})}function i(){v(r)&&(A(r),y(r=E(a)));var e={_chunkSteps:r=>{qn(()=>{l=!1,u=!1;var e=r;let t=r;if(!c&&!f)try{t=we(r)}catch(e){return w(d._readableStreamController,e),w(h._readableStreamController,e),void p(O(a,e))}c||We(d._readableStreamController,e),f||We(h._readableStreamController,t),s=!1,l?g():u&&_()})},_closeSteps:()=>{s=!1,c||xe(d._readableStreamController),f||xe(h._readableStreamController),0<d._readableStreamController._pendingPullIntos.length&&He(d._readableStreamController,0),0<h._readableStreamController._pendingPullIntos.length&&He(h._readableStreamController,0),c&&f||p(void 0)},_errorSteps:()=>{s=!1}};ce(r,e)}function b(e,n){m(r)&&(A(r),y(r=Ze(a)));const o=n?h:d,i=n?d:h;var t={_chunkSteps:r=>{qn(()=>{l=!1,u=!1;var t=n?f:c;if(n?c:f)t||$e(o._readableStreamController,r);else{let e;try{e=we(r)}catch(e){return w(o._readableStreamController,e),w(i._readableStreamController,e),void p(O(a,e))}t||$e(o._readableStreamController,r),We(i._readableStreamController,e)}s=!1,l?g():u&&_()})},_closeSteps:e=>{s=!1;var t=n?f:c,r=n?c:f;t||xe(o._readableStreamController),r||xe(i._readableStreamController),void 0!==e&&(t||$e(o._readableStreamController,e),!r&&0<i._readableStreamController._pendingPullIntos.length&&He(i._readableStreamController,0)),t&&r||p(void 0)},_errorSteps:()=>{s=!1}};nt(r,e,t)}function g(){if(s)return l=!0,C(void 0);s=!0;var e=Ne(d._readableStreamController);return null===e?i():b(e._view,!1),C(void 0)}function _(){if(s)return u=!0,C(void 0);s=!0;var e=Ne(h._readableStreamController);return null===e?i():b(e._view,!0),C(void 0)}function e(){}return d=Qr(e,g,function(e){return c=!0,t=e,f&&(e=be([t,n]),e=O(a,e),p(e)),o}),h=Qr(e,_,function(e){return f=!0,n=e,c&&(e=be([t,n]),e=O(a,e),p(e)),o}),y(r),[d,h]}function Ur(e,t){l(e,t);var r=null==e?void 0:e.autoAllocateChunkSize,n=null==e?void 0:e.cancel,o=null==e?void 0:e.pull,i=null==e?void 0:e.start,a=null==e?void 0:e.type;return{autoAllocateChunkSize:void 0===r?void 0:oe(r,t+" has member 'autoAllocateChunkSize' that"),cancel:void 0===n?void 0:Fr(n,e,t+" has member 'cancel' that"),pull:void 0===o?void 0:zr(o,e,t+" has member 'pull' that"),start:void 0===i?void 0:xr(i,e,t+" has member 'start' that"),type:void 0===a?void 0:Wr(a,t+" has member 'type' that")}}function Fr(t,r,e){return u(t,e),e=>a(t,r,[e])}function zr(t,r,e){return u(t,e),e=>a(t,r,[e])}function xr(t,r,e){return u(t,e),e=>W(t,r,[e])}function Wr(e,t){if("bytes"!==(e=""+e))throw new TypeError(t+` '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Nr(e,t){l(e,t);e=null==e?void 0:e.mode;return{mode:void 0===e?void 0:Yr(e,t+" has member 'mode' that")}}function Yr(e,t){if("byob"!==(e=""+e))throw new TypeError(t+` '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function Hr(e,t){l(e,t);t=null==e?void 0:e.preventCancel;return{preventCancel:Boolean(t)}}function $r(e,t){l(e,t);var r=null==e?void 0:e.preventAbort,n=null==e?void 0:e.preventCancel,o=null==e?void 0:e.preventClose,e=null==e?void 0:e.signal;return void 0!==e&&Vr(e,t+" has member 'signal' that"),{preventAbort:Boolean(r),preventCancel:Boolean(n),preventClose:Boolean(o),signal:e}}function Vr(e,t){if(!yt(e))throw new TypeError(t+" is not an AbortSignal.")}function Kr(e,t){l(e,t);var r=null==e?void 0:e.readable,e=(ee(r,"readable","ReadableWritablePair"),ie(r,t+" has member 'readable' that"),null==e?void 0:e.writable);return ee(e,"writable","ReadableWritablePair"),pt(e,t+" has member 'writable' that"),{readable:r,writable:e}}Object.defineProperties(q.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof k.toStringTag&&Object.defineProperty(q.prototype,k.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});class I{constructor(e={},t={}){void 0===e?e=null:X(e,"First parameter");t=st(t,"Second parameter"),e=Ur(e,"First parameter");if(Jr(this),"bytes"===e.type){if(void 0!==t.size)throw new RangeError("The strategy for a byte stream cannot have a size function");Ke(this,e,it(t,0))}else{var r=at(t);Lr(this,e,it(t,1),r)}}get locked(){if(b(this))return g(this);throw _("locked")}cancel(e=void 0){return b(this)?g(this)?i(new TypeError("Cannot cancel a stream that already has a reader")):O(this,e):i(_("cancel"))}getReader(e=void 0){if(b(this))return(void 0===Nr(e,"First parameter").mode?E:Ze)(this);throw _("getReader")}pipeThrough(e,t={}){if(!b(this))throw _("pipeThrough");r(e,1,"pipeThrough");e=Kr(e,"First parameter"),t=$r(t,"Second parameter");if(g(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(wt(e.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return x(Sr(this,e.writable,t.preventClose,t.preventAbort,t.preventCancel,t.signal)),e.readable}pipeTo(e,t={}){if(!b(this))return i(_("pipeTo"));if(void 0===e)return Ln("Parameter 1 is required in 'pipeTo'.");if(!d(e))return i(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let r;try{r=$r(t,"Second parameter")}catch(e){return i(e)}return g(this)?i(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):wt(e)?i(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Sr(this,e,r.preventClose,r.preventAbort,r.preventCancel,r.signal)}tee(){if(b(this))return be(Ir(this));throw _("tee")}values(e=void 0){if(b(this))return he(this,Hr(e,"First parameter").preventCancel);throw _("values")}}function Gr(e,t,r,n=1,o=()=>1){var i=Object.create(I.prototype),a=(Jr(i),Object.create(q.prototype));return jr(i,a,e,t,r,n,o),i}function Qr(e,t,r){var n=Object.create(I.prototype),o=(Jr(n),Object.create(j.prototype));return Ve(n,o,e,t,r,0,void 0),n}function Jr(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function b(e){return t(e)&&(Object.prototype.hasOwnProperty.call(e,"_readableStreamController")&&e instanceof I)}function g(e){return void 0!==e._reader}function O(e,t){if(e._disturbed=!0,"closed"===e._state)return C(void 0);if("errored"===e._state)return i(e._storedError);Zr(e);const r=e._reader;return void 0!==r&&v(r)&&(r._readIntoRequests.forEach(e=>{e._closeSteps(void 0)}),r._readIntoRequests=new B),o(e._readableStreamController[Dn](t),M)}function Zr(e){e._state="closed";const t=e._reader;void 0!==t&&(Q(t),m(t)&&(t._readRequests.forEach(e=>{e._closeSteps()}),t._readRequests=new B))}function Xr(e,t){e._state="errored",e._storedError=t;const r=e._reader;void 0!==r&&(K(r,t),m(r)?(r._readRequests.forEach(e=>{e._errorSteps(t)}),r._readRequests=new B):(r._readIntoRequests.forEach(e=>{e._errorSteps(t)}),r._readIntoRequests=new B))}function _(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function en(e,t){l(e,t);t=null==e?void 0:e.highWaterMark;return ee(t,"highWaterMark","QueuingStrategyInit"),{highWaterMark:te(t)}}Object.defineProperties(I.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof k.toStringTag&&Object.defineProperty(I.prototype,k.toStringTag,{value:"ReadableStream",configurable:!0}),"symbol"==typeof k.asyncIterator&&Object.defineProperty(I.prototype,k.asyncIterator,{value:I.prototype.values,writable:!0,configurable:!0});const Zn=e=>e.byteLength;try{Object.defineProperty(Zn,"name",{value:"size",configurable:!0})}catch(e){}class Xn{constructor(e){r(e,1,"ByteLengthQueuingStrategy"),e=en(e,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(rn(this))return this._byteLengthQueuingStrategyHighWaterMark;throw tn("highWaterMark")}get size(){if(rn(this))return Zn;throw tn("size")}}function tn(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function rn(e){return t(e)&&(Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")&&e instanceof Xn)}Object.defineProperties(Xn.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof k.toStringTag&&Object.defineProperty(Xn.prototype,k.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});const eo=()=>1;try{Object.defineProperty(eo,"name",{value:"size",configurable:!0})}catch(e){}class to{constructor(e){r(e,1,"CountQueuingStrategy"),e=en(e,"First parameter"),this._countQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(on(this))return this._countQueuingStrategyHighWaterMark;throw nn("highWaterMark")}get size(){if(on(this))return eo;throw nn("size")}}function nn(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function on(e){return t(e)&&(Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")&&e instanceof to)}function an(e,t){l(e,t);var r=null==e?void 0:e.flush,n=null==e?void 0:e.readableType,o=null==e?void 0:e.start,i=null==e?void 0:e.transform,a=null==e?void 0:e.writableType;return{flush:void 0===r?void 0:sn(r,e,t+" has member 'flush' that"),readableType:n,start:void 0===o?void 0:ln(o,e,t+" has member 'start' that"),transform:void 0===i?void 0:un(i,e,t+" has member 'transform' that"),writableType:a}}function sn(t,r,e){return u(t,e),e=>a(t,r,[e])}function ln(t,r,e){return u(t,e),e=>W(t,r,[e])}function un(r,n,e){return u(r,e),(e,t)=>a(r,n,[e,t])}Object.defineProperties(to.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof k.toStringTag&&Object.defineProperty(to.prototype,k.toStringTag,{value:"CountQueuingStrategy",configurable:!0});class ro{constructor(e={},t={},r={}){void 0===e&&(e=null);t=st(t,"Second parameter"),r=st(r,"Third parameter");const n=an(e,"First parameter");if(void 0!==n.readableType)throw new RangeError("Invalid readableType specified");if(void 0!==n.writableType)throw new RangeError("Invalid writableType specified");var e=it(r,0),r=at(r),o=it(t,1),t=at(t);let i;cn(this,S(e=>{i=e}),o,t,e,r),gn(this,n),void 0!==n.start?i(n.start(this._transformStreamController)):i(void 0)}get readable(){if(fn(this))return this._readable;throw On("readable")}get writable(){if(fn(this))return this._writable;throw On("writable")}}function cn(t,e,r,n,o,i){function a(){return e}t._writable=_t(a,function(e){return Tn(t,e)},function(){return An(t)},function(e){return Rn(t,e)},r,n),t._readable=Gr(a,function(){return En(t)},function(e){return hn(t,e),C(void 0)},o,i),t._backpressure=void 0,t._backpressureChangePromise=void 0,t._backpressureChangePromise_resolve=void 0,pn(t,!0),t._transformStreamController=void 0}function fn(e){return t(e)&&(Object.prototype.hasOwnProperty.call(e,"_transformStreamController")&&e instanceof ro)}function dn(e,t){y(e._readable._readableStreamController,t),hn(e,t)}function hn(e,t){_n(e._transformStreamController),Xt(e._writable._writableStreamController,t),e._backpressure&&pn(e,!1)}function pn(t,e){void 0!==t._backpressureChangePromise&&t._backpressureChangePromise_resolve(),t._backpressureChangePromise=S(e=>{t._backpressureChangePromise_resolve=e}),t._backpressure=e}Object.defineProperties(ro.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),"symbol"==typeof k.toStringTag&&Object.defineProperty(ro.prototype,k.toStringTag,{value:"TransformStream",configurable:!0});class no{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(yn(this))return kr(this._controlledTransformStream._readable._readableStreamController);throw Pn("desiredSize")}enqueue(e=void 0){if(!yn(this))throw Pn("enqueue");mn(this,e)}error(e=void 0){if(!yn(this))throw Pn("error");wn(this,e)}terminate(){if(!yn(this))throw Pn("terminate");Sn(this)}}function yn(e){return t(e)&&(Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")&&e instanceof no)}function bn(e,t,r,n){((t._controlledTransformStream=e)._transformStreamController=t)._transformAlgorithm=r,t._flushAlgorithm=n}function gn(e,t){const r=Object.create(no.prototype);let n=e=>{try{return mn(r,e),C(void 0)}catch(e){return i(e)}},o=()=>C(void 0);void 0!==t.transform&&(n=e=>t.transform(e,r)),void 0!==t.flush&&(o=()=>t.flush(r)),bn(e,r,n,o)}function _n(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function mn(t,e){var t=t._controlledTransformStream,r=t._readable._readableStreamController;if(!Br(r))throw new TypeError("Readable side is not in a state that permits enqueue");try{Or(r,e)}catch(e){throw hn(t,e),t._readable._storedError}Cr(r)!==t._backpressure&&pn(t,!0)}function wn(e,t){dn(e._controlledTransformStream,t)}function vn(t,e){return o(t._transformAlgorithm(e),void 0,e=>{throw dn(t._controlledTransformStream,e),e})}function Sn(e){var e=e._controlledTransformStream,t=(Pr(e._readable._readableStreamController),new TypeError("TransformStream terminated"));hn(e,t)}function Tn(t,r){const n=t._transformStreamController;return t._backpressure?o(t._backpressureChangePromise,()=>{var e=t._writable;if("erroring"===e._state)throw e._storedError;return vn(n,r)}):vn(n,r)}function Rn(e,t){return dn(e,t),C(void 0)}function An(t){const r=t._readable,e=t._transformStreamController;var n=e._flushAlgorithm();return _n(e),o(n,()=>{if("errored"===r._state)throw r._storedError;Pr(r._readableStreamController)},e=>{throw dn(t,e),r._storedError})}function En(e){return pn(e,!1),e._backpressureChangePromise}function Pn(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function On(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}Object.defineProperties(no.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof k.toStringTag&&Object.defineProperty(no.prototype,k.toStringTag,{value:"TransformStreamDefaultController",configurable:!0}),e.ByteLengthQueuingStrategy=Xn,e.CountQueuingStrategy=to,e.ReadableByteStreamController=j,e.ReadableStream=I,e.ReadableStreamBYOBReader=$n,e.ReadableStreamBYOBRequest=Hn,e.ReadableStreamDefaultController=q,e.ReadableStreamDefaultReader=xn,e.TransformStream=ro,e.TransformStreamDefaultController=no,e.WritableStream=Kn,e.WritableStreamDefaultController=L,e.WritableStreamDefaultWriter=Gn,Object.defineProperty(e,"__esModule",{value:!0})}}(t.exports);if(!globalThis.ReadableStream)try{const Je=e.default;var m=Je["emitWarning"];try{Je.emitWarning=()=>{},Object.assign(globalThis,D.default),Je.emitWarning=m}catch(e){throw Je.emitWarning=m,e}}catch(e){Object.assign(globalThis,t.exports)}try{const T=global["Blob"];T&&!T.prototype.stream&&(T.prototype.stream=function(e){let n=0;const o=this;return new ReadableStream({type:"bytes",async pull(e){const t=o.slice(n,Math.min(o.size,n+65536));var r=await t.arrayBuffer();n+=r.byteLength,e.enqueue(new Uint8Array(r)),n===o.size&&e.close()}})})}catch(e){}const Ze=65536;async function*Xe(e,t=!0){for(const i of e)if("stream"in i)yield*i.stream();else if(ArrayBuffer.isView(i))if(t){let e=i.byteOffset;for(var r=i.byteOffset+i.byteLength;e!==r;){var n=Math.min(r-e,Ze),n=i.buffer.slice(e,e+n);e+=n.byteLength,yield new Uint8Array(n)}}else yield i;else{let e=0,t=i;for(;e!==t.size;){const a=t.slice(e,Math.min(t.size,e+Ze));var o=await a.arrayBuffer();e+=o.byteLength,yield new Uint8Array(o)}}}Ne=class T{#parts=[];#type="";#size=0;#endings="transparent";constructor(e=[],t={}){if("object"!=typeof e||null===e)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if("function"!=typeof e[Symbol.iterator])throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");null===t&&(t={});const r=new TextEncoder;for(const o of e){let e;e=ArrayBuffer.isView(o)?new Uint8Array(o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength)):o instanceof ArrayBuffer?new Uint8Array(o.slice(0)):o instanceof T?o:r.encode(""+o);var n=ArrayBuffer.isView(e)?e.byteLength:e.size;n&&(this.#size+=n,this.#parts.push(e))}this.#endings=""+(void 0===t.endings?"transparent":t.endings);e=void 0===t.type?"":String(t.type);this.#type=/^[\x20-\x7E]*$/.test(e)?e:""}get size(){return this.#size}get type(){return this.#type}async text(){const e=new TextDecoder;let t="";for await(const r of Xe(this.#parts,!1))t+=e.decode(r,{stream:!0});return t+=e.decode()}async arrayBuffer(){const e=new Uint8Array(this.size);let t=0;for await(const r of Xe(this.#parts,!1))e.set(r,t),t+=r.length;return e.buffer}stream(){const r=Xe(this.#parts,!0);return new globalThis.ReadableStream({type:"bytes",async pull(e){var t=await r.next();t.done?e.close():e.enqueue(t.value)},async cancel(){await r.return()}})}slice(e=0,t=this.size,r=""){const n=this["size"];let o=e<0?Math.max(n+e,0):Math.min(e,n),i=t<0?Math.max(n+t,0):Math.min(t,n);var a=Math.max(i-o,0);const s=[];let l=0;for(const c of this.#parts){if(l>=a)break;const n=ArrayBuffer.isView(c)?c.byteLength:c.size;if(o&&n<=o)o-=n,i-=n;else{let e;ArrayBuffer.isView(c)?(e=c.subarray(o,Math.min(n,i)),l+=e.byteLength):(e=c.slice(o,Math.min(n,i)),l+=e.size),i-=n,s.push(e),o=0}}const u=new T([],{type:String(r).toLowerCase()});return u.#size=a,u.#parts=s,u}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&"object"==typeof e&&"function"==typeof e.constructor&&("function"==typeof e.stream||"function"==typeof e.arrayBuffer)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(Ne.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});const T=Ne;var et=T;const tt=class extends et{#lastModified=0;#name="";constructor(e,t,r={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,r);e=void 0===(r=null===r?{}:r).lastModified?Date.now():Number(r.lastModified);Number.isNaN(e)||(this.#lastModified=e),this.#name=String(t)}get name(){return this.#name}get lastModified(){return this.#lastModified}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof et&&/^(File)$/.test(e[Symbol.toStringTag])}};var rt=tt,{toStringTag:nt,iterator:Ye,hasInstance:He}=Symbol,ot=Math.random,it="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),at=(e,t,r)=>(e+="",/^(Blob|File)$/.test(t&&t[nt])?[(r=void 0!==r?r+"":"File"==t[nt]?t.name:"blob",e),t.name!==r||"blob"==t[nt]?new rt([t],r,t):t]:[e,t+""]),st=(e,t)=>(t?e:e.replace(/\r?\n|\r/g,"\r\n")).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),lt=(e,t,r)=>{if(t.length<r)throw new TypeError(`Failed to execute '${e}' on 'FormData': ${r} arguments required, but only ${t.length} present.`)};const ut=class{#d=[];constructor(...e){if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[nt](){return"FormData"}[Ye](){return this.entries()}static[He](t){return t&&"object"==typeof t&&"FormData"===t[nt]&&!it.some(e=>"function"!=typeof t[e])}append(...e){lt("append",arguments,2),this.#d.push(at(...e))}delete(t){lt("delete",arguments,1),t+="",this.#d=this.#d.filter(([e])=>e!==t)}get(e){lt("get",arguments,1),e+="";for(var t=this.#d,r=t.length,n=0;n<r;n++)if(t[n][0]===e)return t[n][1];return null}getAll(t,r){return lt("getAll",arguments,1),r=[],t+="",this.#d.forEach(e=>e[0]===t&&r.push(e[1])),r}has(t){return lt("has",arguments,1),t+="",this.#d.some(e=>e[0]===t)}forEach(e,t){lt("forEach",arguments,1);for(var[r,n]of this)e.call(t,n,r,this)}set(...t){lt("set",arguments,2);var r=[],n=!0;t=at(...t),this.#d.forEach(e=>{e[0]===t[0]?n=n&&!r.push(t):r.push(e)}),n&&r.push(t),this.#d=r}*entries(){yield*this.#d}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}};class ct extends Error{constructor(e,t){super(e),Error.captureStackTrace(this,this.constructor),this.type=t}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class R extends ct{constructor(e,t,r){super(e,t),r&&(this.code=this.errno=r.code,this.erroredSysCall=r.syscall)}}const ft=Symbol.toStringTag,dt=e=>"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&"function"==typeof e.sort&&"URLSearchParams"===e[ft],ht=e=>e&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&/^(Blob|File)$/.test(e[ft]),pt=(e,t)=>{const r=new URL(t).hostname;t=new URL(e).hostname;return r===t||r.endsWith("."+t)},yt=c.promisify(v.default.pipeline),A=Symbol("Body internals");class bt{constructor(e,{size:t=0}={}){let r=null;var n,o,i,a,s;null===e?e=null:dt(e)?e=u.Buffer.from(e.toString()):ht(e)||u.Buffer.isBuffer(e)||(c.types.isAnyArrayBuffer(e)?e=u.Buffer.from(e):ArrayBuffer.isView(e)?e=u.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof v.default||(e instanceof ut?(n=e,o=et,i=(""+ot()+ot()).replace(/\./g,"").slice(-28).padStart(32,"-"),a=[],s=`--${i}\r
Content-Disposition: form-data; name="`,n.forEach((e,t)=>"string"==typeof e?a.push(s+st(t)+`"\r
\r
${e.replace(/\r(?!\n)|(?<!\r)\n/g,"\r\n")}\r
`):a.push(s+st(t)+`"; filename="${st(e.name,1)}"\r
Content-Type: ${e.type||"application/octet-stream"}\r
\r
`,e,"\r\n")),a.push(`--${i}--`),e=new o(a,{type:"multipart/form-data; boundary="+i}),r=e.type.split("=")[1]):e=u.Buffer.from(String(e))));let l=e;u.Buffer.isBuffer(e)?l=v.default.Readable.from(e):ht(e)&&(l=v.default.Readable.from(e.stream())),this[A]={body:e,stream:l,boundary:r,disturbed:!1,error:null},this.size=t,e instanceof v.default&&e.on("error",e=>{e=e instanceof ct?e:new R(`Invalid response body while trying to fetch ${this.url}: `+e.message,"system",e);this[A].error=e})}get body(){return this[A].stream}get bodyUsed(){return this[A].disturbed}async arrayBuffer(){const{buffer:e,byteOffset:t,byteLength:r}=await gt(this);return e.slice(t,t+r)}async formData(){const e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){const o=new ut;var t,r;for([t,r]of new URLSearchParams(await this.text()))o.append(t,r);return o}const n=(await Promise.resolve().then(function(){return Jt}))["toFormData"];return n(this.body,e)}async blob(){var e=this.headers&&this.headers.get("content-type")||this[A].body&&this[A].body.type||"",t=await this.arrayBuffer();return new et([t],{type:e})}async json(){var e=await this.text();return JSON.parse(e)}async text(){var e=await gt(this);return(new TextDecoder).decode(e)}buffer(){return gt(this)}}async function gt(t){if(t[A].disturbed)throw new TypeError("body used already for: "+t.url);if(t[A].disturbed=!0,t[A].error)throw t[A].error;const e=t["body"];if(null===e)return u.Buffer.alloc(0);if(!(e instanceof v.default))return u.Buffer.alloc(0);const r=[];let n=0;try{for await(const i of e){var o;if(0<t.size&&n+i.length>t.size)throw o=new R(`content size at ${t.url} over limit: `+t.size,"max-size"),e.destroy(o),o;n+=i.length,r.push(i)}}catch(e){throw e instanceof ct?e:new R(`Invalid response body while trying to fetch ${t.url}: `+e.message,"system",e)}if(!0!==e.readableEnded&&!0!==e._readableState.ended)throw new R("Premature close of server response while trying to fetch "+t.url);try{return r.every(e=>"string"==typeof e)?u.Buffer.from(r.join("")):u.Buffer.concat(r,n)}catch(e){throw new R(`Could not create Buffer from response body for ${t.url}: `+e.message,"system",e)}}bt.prototype.buffer=c.deprecate(bt.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer"),Object.defineProperties(bt.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:c.deprecate(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});const _t=(e,t)=>{var r;let n=e[A]["body"];if(e.bodyUsed)throw new Error("cannot clone body after it is used");return n instanceof v.default&&"function"!=typeof n.getBoundary&&(r=new w.PassThrough({highWaterMark:t}),t=new w.PassThrough({highWaterMark:t}),n.pipe(r),n.pipe(t),e[A].stream=r,n=t),n},mt=c.deprecate(e=>e.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),wt=(e,t)=>null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":dt(e)?"application/x-www-form-urlencoded;charset=UTF-8":ht(e)?e.type||null:u.Buffer.isBuffer(e)||c.types.isAnyArrayBuffer(e)||ArrayBuffer.isView(e)?null:e instanceof ut?"multipart/form-data; boundary="+t[A].boundary:e&&"function"==typeof e.getBoundary?"multipart/form-data;boundary="+mt(e):e instanceof v.default?null:"text/plain;charset=UTF-8",vt=e=>{const t=e[A]["body"];return null===t?0:ht(t)?t.size:u.Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},St=async(e,{body:t})=>{null===t?e.end():await yt(t,e)},Tt="function"==typeof Y.default.validateHeaderName?Y.default.validateHeaderName:e=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e))throw e=new TypeError(`Header name must be a valid HTTP token [${e}]`),Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e},Rt="function"==typeof Y.default.validateHeaderValue?Y.default.validateHeaderValue:(e,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t))throw t=new TypeError(`Invalid character in header content ["${e}"]`),Object.defineProperty(t,"code",{value:"ERR_INVALID_CHAR"}),t};class E extends URLSearchParams{constructor(e){let t=[];if(e instanceof E){var r=e.raw();for(const[n,o]of Object.entries(r))t.push(...o.map(e=>[n,e]))}else if(null!=e){if("object"!=typeof e||c.types.isBoxedPrimitive(e))throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");r=e[Symbol.iterator];if(null==r)t.push(...Object.entries(e));else{if("function"!=typeof r)throw new TypeError("Header pairs must be iterable");t=[...e].map(e=>{if("object"!=typeof e||c.types.isBoxedPrimitive(e))throw new TypeError("Each header pair must be an iterable object");return[...e]}).map(e=>{if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");return[...e]})}}return super(t=0<t.length?t.map(([e,t])=>(Tt(e),Rt(e,String(t)),[String(e).toLowerCase(),String(t)])):void 0),new Proxy(this,{get(r,n,e){switch(n){case"append":case"set":return(e,t)=>(Tt(e),Rt(e,String(t)),URLSearchParams.prototype[n].call(r,String(e).toLowerCase(),String(t)));case"delete":case"has":case"getAll":return e=>(Tt(e),URLSearchParams.prototype[n].call(r,String(e).toLowerCase()));case"keys":return()=>(r.sort(),new Set(URLSearchParams.prototype.keys.call(r)).keys());default:return Reflect.get(r,n,e)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){const t=this.getAll(e);if(0===t.length)return null;let r=t.join(", ");return r=/^content-encoding$/i.test(e)?r.toLowerCase():r}forEach(e,t=void 0){for(const r of this.keys())Reflect.apply(e,t,[this.get(r),r,this])}*values(){for(const e of this.keys())yield this.get(e)}*entries(){for(const e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,t)=>(e[t]=this.getAll(t),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,t)=>{var r=this.getAll(t);return e[t]="host"!==t&&1<r.length?r:r[0],e},{})}}Object.defineProperties(E.prototype,["get","entries","forEach","values"].reduce((e,t)=>(e[t]={enumerable:!0},e),{}));const At=new Set([301,302,303,307,308]),Et=e=>At.has(e),P=Symbol("Response internals");class O extends bt{constructor(e=null,t={}){super(e,t);var r=null!=t.status?t.status:200;const n=new E(t.headers);null===e||n.has("Content-Type")||(e=wt(e,this))&&n.append("Content-Type",e),this[P]={type:"default",url:t.url,status:r,statusText:t.statusText||"",headers:n,counter:t.counter,highWaterMark:t.highWaterMark}}get type(){return this[P].type}get url(){return this[P].url||""}get status(){return this[P].status}get ok(){return 200<=this[P].status&&this[P].status<300}get redirected(){return 0<this[P].counter}get statusText(){return this[P].statusText}get headers(){return this[P].headers}get highWaterMark(){return this[P].highWaterMark}clone(){return new O(_t(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,t=302){if(Et(t))return new O(null,{headers:{location:new URL(e).toString()},status:t});throw new RangeError('Failed to execute "redirect" on "response": Invalid status code')}static error(){const e=new O(null,{status:0,statusText:""});return e[P].type="error",e}get[Symbol.toStringTag](){return"Response"}}Object.defineProperties(O.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});const Pt=e=>{if(e.search)return e.search;var t=e.href.length-1,r=e.hash||("#"===e.href[t]?"#":"");return"?"===e.href[t-r.length]?"?":""};function Ot(e,t=!1){return null==e?"no-referrer":(e=new URL(e),/^(about|blob|data):$/.test(e.protocol)?"no-referrer":(e.username="",e.password="",e.hash="",t&&(e.pathname="",e.search=""),e))}const kt=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Ct="strict-origin-when-cross-origin";function Bt(e){return/^about:(blank|srcdoc)$/.test(e)||("data:"===e.protocol||(/^(blob|filesystem):$/.test(e.protocol)||function(e){if(/^(http|ws)s:$/.test(e.protocol))return 1;var t=e.host.replace(/(^\[)|(]$)/g,""),r=F.isIP(t);return!(4!==r||!/^127\./.test(t))||(!(6!==r||!/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t))||!/^(.+\.)*localhost$/.test(e.host)&&"file:"===e.protocol)}(e)))}const k=Symbol("Request internals"),jt=e=>"object"==typeof e&&"object"==typeof e[k],Lt=c.deprecate(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)");class qt extends bt{constructor(e,t={}){let r;if(jt(e)?r=new URL(e.url):(r=new URL(e),e={}),""!==r.username||""!==r.password)throw new TypeError(r+" is an url with embedded credentials.");let n=t.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(n)&&(n=n.toUpperCase()),"data"in t&&Lt(),(null!=t.body||jt(e)&&null!==e.body)&&("GET"===n||"HEAD"===n))throw new TypeError("Request with GET/HEAD method cannot have body");var o=t.body||(jt(e)&&null!==e.body?_t(e):null);super(o,{size:t.size||e.size||0});const i=new E(t.headers||e.headers||{});null===o||i.has("Content-Type")||(o=wt(o,this))&&i.set("Content-Type",o);let a=jt(e)?e.signal:null;if(null!=(a="signal"in t?t.signal:a)&&("object"!=typeof(o=a)||"AbortSignal"!==o[ft]&&"EventTarget"!==o[ft]))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let s=(null==t.referrer?e:t).referrer;s=""===s?"no-referrer":s?(o=new URL(s),/^about:(\/\/)?client$/.test(o)?"client":o):void 0,this[k]={method:n,redirect:t.redirect||e.redirect||"follow",headers:i,parsedURL:r,signal:a,referrer:s},this.follow=void 0===t.follow?void 0===e.follow?20:e.follow:t.follow,this.compress=void 0===t.compress?void 0===e.compress||e.compress:t.compress,this.counter=t.counter||e.counter||0,this.agent=t.agent||e.agent,this.highWaterMark=t.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=t.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=t.referrerPolicy||e.referrerPolicy||""}get method(){return this[k].method}get url(){return U.format(this[k].parsedURL)}get headers(){return this[k].headers}get redirect(){return this[k].redirect}get signal(){return this[k].signal}get referrer(){return"no-referrer"===this[k].referrer?"":"client"===this[k].referrer?"about:client":this[k].referrer?this[k].referrer.toString():void 0}get referrerPolicy(){return this[k].referrerPolicy}set referrerPolicy(e){this[k].referrerPolicy=function(e){if(kt.has(e))return e;throw new TypeError("Invalid referrerPolicy: "+e)}(e)}clone(){return new qt(this)}get[Symbol.toStringTag](){return"Request"}}Object.defineProperties(qt.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});const It=e=>{var t=e[k]["parsedURL"];const r=new E(e[k].headers);r.has("Accept")||r.set("Accept","*/*");let n=null,o=(null===e.body&&/^(post|put)$/i.test(e.method)&&(n="0"),(n=null===e.body||"number"!=typeof(i=vt(e))||Number.isNaN(i)?n:String(i))&&r.set("Content-Length",n),""===e.referrerPolicy&&(e.referrerPolicy=Ct),e.referrer&&"no-referrer"!==e.referrer?e[k].referrer=function(e,{referrerURLCallback:t,referrerOriginCallback:r}={}){if("no-referrer"===e.referrer||""===e.referrerPolicy)return null;var n=e.referrerPolicy;if("about:client"===e.referrer)return"no-referrer";var o=e.referrer;let i=Ot(o),a=Ot(o,!0);4096<i.toString().length&&(i=a),t&&(i=t(i)),r&&(a=r(a));var s=new URL(e.url);switch(n){case"no-referrer":return"no-referrer";case"origin":return a;case"unsafe-url":return i;case"strict-origin":return Bt(i)&&!Bt(s)?"no-referrer":a.toString();case"strict-origin-when-cross-origin":return i.origin===s.origin?i:Bt(i)&&!Bt(s)?"no-referrer":a;case"same-origin":return i.origin===s.origin?i:"no-referrer";case"origin-when-cross-origin":return i.origin===s.origin?i:a;case"no-referrer-when-downgrade":return Bt(i)&&!Bt(s)?"no-referrer":i;default:throw new TypeError("Invalid referrerPolicy: "+n)}}(e):e[k].referrer="no-referrer",e[k].referrer instanceof URL&&r.set("Referer",e.referrer),r.has("User-Agent")||r.set("User-Agent","node-fetch"),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip, deflate, br"),e)["agent"];"function"==typeof o&&(o=o(t)),r.has("Connection")||o||r.set("Connection","close");var i=Pt(t);return{parsedURL:t,options:{path:t.pathname+i,method:e.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:e.insecureHTTPParser,agent:o}}};class Mt extends ct{constructor(e,t="aborted"){super(e,t)}}if(!globalThis.DOMException)try{const Zt=M.default["MessageChannel"],Xt=(new Zt).port1,er=new ArrayBuffer;Xt.postMessage(er,[er,er])}catch(e){"DOMException"===e.constructor.name&&(globalThis.DOMException=e.constructor)}var Dt=globalThis.DOMException;const Ut=z.promises["stat"];const Ft=(e,t,r="")=>new et([new xt({path:t,size:e.size,lastModified:e.mtimeMs,start:0})],{type:r}),zt=(e,t,r="")=>new rt([new xt({path:t,size:e.size,lastModified:e.mtimeMs,start:0})],x.basename(t),{type:r,lastModified:e.mtimeMs});class xt{#path;#start;constructor(e){this.#path=e.path,this.#start=e.start,this.size=e.size,this.lastModified=e.lastModified,this.originalSize=void 0===e.originalSize?e.size:e.originalSize}slice(e,t){return new xt({path:this.#path,lastModified:this.lastModified,originalSize:this.originalSize,size:t-e,start:this.#start+e})}async*stream(){var{mtimeMs:e,size:t}=await Ut(this.#path);if(e>this.lastModified||this.originalSize!==t)throw new Dt("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*z.createReadStream(this.#path,{start:this.#start,end:this.#start+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}const Wt=new Set(["data:","http:","https:"]);var Nt,$e=V(Object.freeze({__proto__:null,FormData:ut,Headers:E,Request:qt,Response:O,FetchError:R,AbortError:Mt,isRedirect:Et,Blob:et,File:rt,fileFromSync:(e,t)=>zt(z.statSync(e),e,t),fileFrom:(t,r)=>Ut(t).then(e=>zt(e,t,r)),blobFromSync:(e,t)=>Ft(z.statSync(e),e,t),blobFrom:(t,r)=>Ut(t).then(e=>Ft(e,t,r)),default:async function _(i,m){return new Promise((c,f)=>{const d=new qt(i,m),{parsedURL:e,options:t}=It(d);if(!Wt.has(e.protocol))throw new TypeError(`node-fetch cannot load ${i}. URL scheme "${e.protocol.replace(/:$/,"")}" is not supported.`);if("data:"===e.protocol){var r=function(e){if(!/^data:/i.test(e))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');var t=(e=e.replace(/\r?\n/g,"")).indexOf(",");if(-1===t||t<=4)throw new TypeError("malformed data: URI");const r=e.substring(5,t).split(";");let n="",o=!1;var i=r[0]||"text/plain";let a=i;for(let e=1;e<r.length;e++)"base64"===r[e]?o=!0:(a+=";"+r[e],0===r[e].indexOf("charset=")&&(n=r[e].substring(8)));r[0]||n.length||(a+=";charset=US-ASCII",n="US-ASCII");var s=o?"base64":"ascii",e=unescape(e.substring(t+1));const l=S.from(e,s);return l.type=i,l.typeFull=a,l.charset=n,l}(d.url);const p=new O(r,{headers:{"Content-Type":r.typeFull}});return void c(p)}const n=("https:"===e.protocol?H:Y).default.request,h=d.signal;let p=null;const o=()=>{var e=new Mt("The operation was aborted.");f(e),d.body&&d.body instanceof v.default.Readable&&d.body.destroy(e),p&&p.body&&p.body.emit("error",e)};if(h&&h.aborted)return void o();const y=()=>{o(),g()},b=n(e.toString(),t),g=(h&&h.addEventListener("abort",y),()=>{b.abort(),h&&h.removeEventListener("abort",y)});b.on("error",e=>{f(new R(`request to ${d.url} failed, reason: `+e.message,"system",e)),g()});{var a=b,s=e=>{p&&p.body&&p.body.destroy(e)};const l=u.Buffer.from("0\r\n\r\n");let n=!1,o=!1,i;a.on("response",e=>{e=e.headers,n="chunked"===e["transfer-encoding"]&&!e["content-length"]}),a.on("socket",e=>{const t=()=>{if(n&&!o){const e=new Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",s(e)}},r=e=>{!(o=0===u.Buffer.compare(e.slice(-5),l))&&i&&(o=0===u.Buffer.compare(i.slice(-3),l.slice(0,3))&&0===u.Buffer.compare(e.slice(-2),l.slice(3))),i=e};e.prependListener("close",t),e.on("data",r),a.on("close",()=>{e.removeListener("close",t),e.removeListener("data",r)})})}Je.version<"v14"&&b.on("socket",r=>{let n;r.prependListener("end",()=>{n=r._eventsCount}),r.prependListener("close",e=>{if(p&&n<r._eventsCount&&!e){const t=new Error("Premature close");t.code="ERR_STREAM_PREMATURE_CLOSE",p.body.emit("error",t)}})}),b.on("response",t=>{b.setTimeout(0),[n=[]]=[t.rawHeaders];const r=new E(n.reduce((e,t,r,n)=>(r%2==0&&e.push(n.slice(r,r+2)),e),[]).filter(([e,t])=>{try{return Tt(e),Rt(e,String(t)),!0}catch{return!1}}));if(Et(t.statusCode)){var n=r.get("Location");let e=null;try{e=null===n?null:new URL(n,d.url)}catch{if("manual"!==d.redirect)return f(new R("uri requested responds with an invalid redirect URL: "+n,"invalid-redirect")),void g()}switch(d.redirect){case"error":return f(new R("uri requested responds with a redirect, redirect mode is set to error: "+d.url,"no-redirect")),void g();case"manual":break;case"follow":{if(null===e)break;if(d.counter>=d.follow)return f(new R("maximum redirect reached at: "+d.url,"max-redirect")),void g();const s={headers:new E(d.headers),follow:d.follow,counter:d.counter+1,agent:d.agent,compress:d.compress,method:d.method,body:_t(d),signal:d.signal,size:d.size,referrer:d.referrer,referrerPolicy:d.referrerPolicy};if(!pt(d.url,e))for(const l of["authorization","www-authenticate","cookie","cookie2"])s.headers.delete(l);if(303!==t.statusCode&&d.body&&m.body instanceof v.default.Readable)return f(new R("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void g();303!==t.statusCode&&(301!==t.statusCode&&302!==t.statusCode||"POST"!==d.method)||(s.method="GET",s.body=void 0,s.headers.delete("content-length"));var o=function(e){let t="";for(const r of(e.get("referrer-policy")||"").split(/[,\s]+/))r&&kt.has(r)&&(t=r);return t}(r);return o&&(s.referrerPolicy=o),c(_(new qt(e,s))),void g()}default:return f(new TypeError(`Redirect option '${d.redirect}' is not a valid value of RequestRedirect`))}}h&&t.once("end",()=>{h.removeEventListener("abort",y)});let i=w.pipeline(t,new w.PassThrough,e=>{e&&f(e)});Je.version<"v12.10"&&t.on("aborted",y);const a={url:d.url,status:t.statusCode,statusText:t.statusMessage,headers:r,size:d.size,counter:d.counter,highWaterMark:d.highWaterMark};if(n=r.get("Content-Encoding"),!d.compress||"HEAD"===d.method||null===n||204===t.statusCode||304===t.statusCode)return p=new O(i,a),void c(p);var e={flush:$.default.Z_SYNC_FLUSH,finishFlush:$.default.Z_SYNC_FLUSH};if("gzip"===n||"x-gzip"===n)return i=w.pipeline(i,$.default.createGunzip(e),e=>{e&&f(e)}),p=new O(i,a),void c(p);if("deflate"===n||"x-deflate"===n){const u=w.pipeline(t,new w.PassThrough,e=>{e&&f(e)});return u.once("data",e=>{i=8==(15&e[0])?w.pipeline(i,$.default.createInflate(),e=>{e&&f(e)}):w.pipeline(i,$.default.createInflateRaw(),e=>{e&&f(e)}),p=new O(i,a),c(p)}),void u.once("end",()=>{p||(p=new O(i,a),c(p))})}if("br"===n)return i=w.pipeline(i,$.default.createBrotliDecompress(),e=>{e&&f(e)}),p=new O(i,a),void c(p);p=new O(i,a),c(p)}),St(b,d).catch(f)})}})),C=W,Yt=C.__importStar(N),Ht=global,Ve=(C.__importDefault($e),window.fetch.bind(window)),g=Nt=Nt||{},_=((_=g.TrustType||(g.TrustType={})).CrossAccount="Cross Account",_.InnerAccount="Inner Account",(_=g.PseudoBoolean||(g.PseudoBoolean={}))[_.True=1]="True",_[_.False=0]="False",B.prototype.create=function(e){return new B(C.__assign(C.__assign({},this.config),e))},B.prototype.getAccounts=function(r){return C.__awaiter(this,void 0,void 0,function(){var t;return C.__generator(this,function(e){switch(e.label){case 0:return[4,this.internalFetch("getAccounts",r)];case 1:return t=e.sent(),[2,Object.keys(t.accountListRole).map(function(e){return{account:e,role:t.accountListRole[e][0].role,iamKeyActive:t.accountListRole[e][0].iamKeyActive,maxKeyDuration:t.accountListRole[e][0].maxKeyDuration,skypieaAccount:t.accountListRole[e][0].skypieaAccount}})]}})})},B.prototype.getKeys=function(t){return C.__awaiter(this,void 0,void 0,function(){return C.__generator(this,function(e){switch(e.label){case 0:return[4,this.internalFetch("getKeys",t)];case 1:return[2,j(e.sent(),["accessKey","secretKey","sessionToken","consoleURL"])]}})})},B.prototype.getIAMKeys=function(t){return C.__awaiter(this,void 0,void 0,function(){return C.__generator(this,function(e){switch(e.label){case 0:return[4,this.internalFetch("getIAMKeys",t)];case 1:return[2,j(e.sent(),["accessKey","secretKey","sessionToken","consoleURL"])]}})})},B.prototype.getAllAWSRoleTypes=function(r){return C.__awaiter(this,void 0,void 0,function(){var t;return C.__generator(this,function(e){switch(e.label){case 0:return t=r.getDynamicValues?"allAwsRoleTypes?getDynamicValues=true":"allAwsRoleTypes",[4,this.internalFetch(t,r,"GET")];case 1:return[2,e.sent().roleTypes]}})})},B.prototype.getAWSRoleTypes=function(r){return C.__awaiter(this,void 0,void 0,function(){var t;return C.__generator(this,function(e){switch(e.label){case 0:return[4,this.internalFetch("getAWSRoleTypes",r)];case 1:return t=e.sent(),[2,JSON.parse(t.roleTypes)]}})})},B.prototype.getNonServiceAWSRoleTypes=function(r){return C.__awaiter(this,void 0,void 0,function(){var t;return C.__generator(this,function(e){switch(e.label){case 0:return[4,this.internalFetch("getNonServiceAWSRoleTypes",r)];case 1:return t=e.sent(),[2,JSON.parse(t.roleTypes)]}})})},B.prototype.createRole=function(n){return C.__awaiter(this,void 0,void 0,function(){var t,r;return C.__generator(this,function(e){switch(e.label){case 0:return r=null!=n.roleType,t=null!=n.trustPolicy,r==t?[3,2]:[4,this.internalFetch("createRole",n)];case 1:return(r=e.sent()).denyArns=r.denyArns.split(","),[2,j(r,["roleArn","denyArns","instanceProfileArn","addedRoleToInstanceProfile","tags"])];case 2:throw new Error("Must include roleType or trustPolicy, but not both.")}})})},B.prototype.createNonServiceRole=function(r){return C.__awaiter(this,void 0,void 0,function(){var t;return C.__generator(this,function(e){switch(e.label){case 0:return[4,this.internalFetch("createNonServiceRole",r)];case 1:return(t=e.sent()).denyArns=t.denyArns.split(","),[2,j(t,["roleArn","denyArns","instanceProfileArn","addedRoleToInstanceProfile","tags"])]}})})},B.prototype.awsAccountRoles=function(t){return C.__awaiter(this,void 0,void 0,function(){return C.__generator(this,function(e){switch(e.label){case 0:return[4,this.internalFetch("awsAccountRoles?account="+t.account,t,"GET")];case 1:return[2,e.sent().awsRoleList]}})})},B.prototype.listAWSAccountRoles=function(r){return C.__awaiter(this,void 0,void 0,function(){var t;return C.__generator(this,function(e){switch(e.label){case 0:return[4,this.internalFetch("listAWSAccountRoles",r)];case 1:return t=e.sent(),[2,JSON.parse(t.jsonAWSRoleList).map(function(e){return e.split("/").slice(-1)[0]})]}})})},B.prototype.getAccountRole=function(r){return C.__awaiter(this,void 0,void 0,function(){var t;return C.__generator(this,function(e){switch(e.label){case 0:return[4,this.internalFetch("getAccountRole",r)];case 1:if((t=e.sent()).roleExists)return[2,C.__assign(C.__assign({},j(t,["roleArn","isMachineIdentity","tags"])),{instanceProfileArn:t.instanceProfileARN})];throw new Error("Role "+r.roleName+" does not exist in this account")}})})},B.prototype.updateRole=function(r){return C.__awaiter(this,void 0,void 0,function(){var t;return C.__generator(this,function(e){switch(e.label){case 0:return[4,this.internalFetch("role",r,"PATCH")];case 1:if((t=e.sent()).roleExists)return[2,C.__assign(C.__assign({},j(t,["roleArn","isMachineIdentity","tags"])),{instanceProfileArn:t.instanceProfileARN})];throw new Error("Role "+r.roleName+" does not exist in this account")}})})},B.prototype.deleteRole=function(t){return C.__awaiter(this,void 0,void 0,function(){return C.__generator(this,function(e){switch(e.label){case 0:return[4,this.internalFetch("deleteRole",t)];case 1:return e.sent(),[2,!0]}})})},B.prototype.addRoleMachineIdentity=function(t){return C.__awaiter(this,void 0,void 0,function(){return C.__generator(this,function(e){switch(e.label){case 0:return[4,this.internalFetch("roleMachineIdentity",t)];case 1:return[2,j(e.sent(),["machineIdentityArn"])]}})})},B.prototype.deleteRoleMachineIdentity=function(t){return C.__awaiter(this,void 0,void 0,function(){return C.__generator(this,function(e){switch(e.label){case 0:return[4,this.internalFetch("roleMachineIdentity",t,"DELETE")];case 1:return[2,j(e.sent(),["machineIdentityArn"])]}})})},B.prototype.getUserAccess=function(r){return C.__awaiter(this,void 0,void 0,function(){var t;return C.__generator(this,function(e){switch(e.label){case 0:return t=r.accountId,[4,this.internalFetch("userAccess/"+t,r,"GET")];case 1:return[2,e.sent().users]}})})},B.prototype.getUserAccessByRole=function(r){return C.__awaiter(this,void 0,void 0,function(){var t;return C.__generator(this,function(e){switch(e.label){case 0:return t=r.accountId,[4,this.internalFetch("reports/users-by-role?accountId="+t,r,"GET")];case 1:return[2,e.sent().users]}})})},B.prototype.getUserRoleAccess=function(r){return C.__awaiter(this,void 0,void 0,function(){var t;return C.__generator(this,function(e){switch(e.label){case 0:return t=r.accountId,[4,this.internalFetch("userAccess/roles/"+t,r)];case 1:return[2,e.sent().roles]}})})},B.prototype.getAccountOwners=function(r){return C.__awaiter(this,void 0,void 0,function(){var t;return C.__generator(this,function(e){switch(e.label){case 0:return t=r.accountId,[4,this.internalFetch("userAccess/owners/"+t,r,"GET")];case 1:return[2,e.sent().accountOwners]}})})},B.prototype.createAccessKeys=function(t){return C.__awaiter(this,void 0,void 0,function(){return C.__generator(this,function(e){switch(e.label){case 0:return[4,this.internalFetch("accessKeys",t)];case 1:return[2,j(e.sent(),["iamUserArn","accessKey","secretKey","addedIAMUserToGroup"])]}})})},B.prototype.deleteIAMUser=function(t){return C.__awaiter(this,void 0,void 0,function(){return C.__generator(this,function(e){switch(e.label){case 0:return[4,this.internalFetch("IAMUser",t,"DELETE")];case 1:return e.sent(),[2,!0]}})})},B.prototype.version=function(t){return C.__awaiter(this,void 0,void 0,function(){return C.__generator(this,function(e){switch(e.label){case 0:return[4,this.internalFetch("version",t,"GET")];case 1:return[2,j(e.sent(),["version"])]}})})},B.prototype.getLoginRole=function(n){return C.__awaiter(this,void 0,void 0,function(){var t,r;return C.__generator(this,function(e){switch(e.label){case 0:return t=n.accountId,r=n.role,[4,this.internalFetch("loginRoles/id/"+t+"/"+r,n,"GET")];case 1:return[2,j(e.sent().loginRole,["account","role","iamKeyActive","maxKeyDuration"])]}})})},B.prototype.getAccessToken=function(t){return C.__awaiter(this,void 0,void 0,function(){return C.__generator(this,function(e){switch(e.label){case 0:return[4,this.internalFetch("accessToken",t)];case 1:return[2,j(e.sent(),["accessToken","expiresIn"])]}})})},B.prototype.getRefreshTokens=function(t){return C.__awaiter(this,void 0,void 0,function(){return C.__generator(this,function(e){switch(e.label){case 0:return[4,this.internalFetch("refreshTokens",t,"GET")];case 1:return[2,e.sent().refreshTokens.map(function(e){return j(e,["clientId","id","userId","value"])})]}})})},B.prototype.revoke=function(t){return C.__awaiter(this,void 0,void 0,function(){return C.__generator(this,function(e){switch(e.label){case 0:return[4,this.internalFetch("revoke",t)];case 1:return[2,"Success"==e.sent().statusMessage]}})})},B.prototype.getCostTotals=function(t){return C.__awaiter(this,void 0,void 0,function(){return C.__generator(this,function(e){switch(e.label){case 0:return[4,this.internalFetch("costTotals/"+t.accountId,t,"GET")];case 1:return[2,j(e.sent().costTotals,["awsAccountId","yyyy","mm","dd","daily","weekly","monthly","yearly","dailyCostsByService","monthlyCostsByService"])]}})})},B.prototype.internalFetch=function(s,l,u){return void 0===l&&(l={}),void 0===u&&(u="POST"),C.__awaiter(this,void 0,void 0,function(){var t,r,n,o,i,a;return C.__generator(this,function(e){switch(e.label){case 0:return t=C.__assign(C.__assign({},this.config),l),r=C.__assign({},t),n={"Content-Type":"application/json","User-Agent":"AlksJS/"+Yt.version},void 0!==t.accessToken?(n.Authorization="Bearer "+t.accessToken,delete r.accessToken):void 0!==t.accessKey?(n["ALKS-STS-Access-Key"]=t.accessKey,n["ALKS-STS-Secret-Key"]=t.secretKey,n["ALKS-STS-Session-Token"]=t.sessionToken,delete r.accessKey,delete r.secretKey,delete r.sessionToken):void 0!==t.userid&&(console.error("The userid and password properties are deprecated and should be replaced with an access token"),a=function(e){void 0===e&&(e="");return Ht.Buffer.from(e).toString("base64")}(t.userid+":"+t.password),n.Authorization="Basic "+a,delete r.userid,delete r.password),t.userAgent&&(n["User-Agent"]+=" "+t.userAgent,delete r.userAgent),[4,t._fetch(t.baseUrl+"/"+s,{method:u,headers:n,body:"GET"==u?void 0:JSON.stringify(r)})];case 1:o=e.sent(),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,o.json()];case 3:return i=e.sent(),[3,5];case 4:return a=e.sent(),i={errors:[a.message]},[3,5];case 5:if(o.ok)return[2,i];throw new Vt(o,i)}})})},B);function B(e){this.config=e}g.Alks=_,$t=Error,C.__extends(Kt,$t);var $t,Vt=Kt;function Kt(e,t){var r=this,n=Array.isArray(null==t?void 0:t.errors)?t.errors:[],n=(e.statusText&&n.unshift(e.statusText),n.join("; "));return(r=$t.call(this,n)||this).status=e.status,r.message=n,Object.assign(r,t),r}function j(r,e){return e.reduce(function(e,t){return e[t]=r[t],e},{})}g.AlksError=Vt;e=_.prototype.create.call({},{_fetch:Ve}),g.create=_.prototype.create.bind(e),g.getAccounts=_.prototype.getAccounts.bind(e),g.getKeys=_.prototype.getKeys.bind(e),g.getIAMKeys=_.prototype.getIAMKeys.bind(e),g.getAllAWSRoleTypes=_.prototype.getAllAWSRoleTypes.bind(e),g.getAWSRoleTypes=_.prototype.getAWSRoleTypes.bind(e),g.getNonServiceAWSRoleTypes=_.prototype.getNonServiceAWSRoleTypes.bind(e),g.createRole=_.prototype.createRole.bind(e),g.createNonServiceRole=_.prototype.createNonServiceRole.bind(e),g.awsAccountRoles=_.prototype.awsAccountRoles.bind(e),g.listAWSAccountRoles=_.prototype.listAWSAccountRoles.bind(e),g.getAccountRole=_.prototype.getAccountRole.bind(e),g.updateRole=_.prototype.updateRole.bind(e),g.deleteRole=_.prototype.deleteRole.bind(e),g.addRoleMachineIdentity=_.prototype.addRoleMachineIdentity.bind(e),g.deleteRoleMachineIdentity=_.prototype.deleteRoleMachineIdentity.bind(e),g.getUserAccess=_.prototype.getUserAccess.bind(e),g.getUserAccessByRole=_.prototype.getUserAccessByRole.bind(e),g.getUserRoleAccess=_.prototype.getUserRoleAccess.bind(e),g.getAccountOwners=_.prototype.getAccountOwners.bind(e),g.createAccessKeys=_.prototype.createAccessKeys.bind(e),g.deleteIAMUser=_.prototype.deleteIAMUser.bind(e),g.version=_.prototype.version.bind(e),g.getLoginRole=_.prototype.getLoginRole.bind(e),g.getAccessToken=_.prototype.getAccessToken.bind(e),g.getRefreshTokens=_.prototype.getRefreshTokens.bind(e),g.revoke=_.prototype.revoke.bind(e),g.getCostTotals=_.prototype.getCostTotals.bind(e),D=Nt,m=0;const L={START_BOUNDARY:m++,HEADER_FIELD_START:m++,HEADER_FIELD:m++,HEADER_VALUE_START:m++,HEADER_VALUE:m++,HEADER_VALUE_ALMOST_DONE:m++,HEADERS_ALMOST_DONE:m++,PART_DATA_START:m++,PART_DATA:+m,END:9};const q={PART_BOUNDARY:1,LAST_BOUNDARY:2},Gt=()=>{};class Qt{constructor(t){this.index=0,this.flags=0,this.onHeaderEnd=Gt,this.onHeaderField=Gt,this.onHeadersEnd=Gt,this.onHeaderValue=Gt,this.onPartBegin=Gt,this.onPartData=Gt,this.onPartEnd=Gt,this.boundaryChars={},t="\r\n--"+t;const r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e),this.boundaryChars[r[e]]=!0;this.boundary=r,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=L.START_BOUNDARY}write(n){let o=0;var e=n.length;let t=this.index,{lookbehind:r,boundary:i,boundaryChars:a,index:s,state:l,flags:u}=this;var c=this.boundary.length,f=c-1,d=n.length;let h;var p=e=>{this[e+"Mark"]=o},y=e=>{delete this[e+"Mark"]};const b=(e,t,r,n)=>{void 0!==t&&t===r||this[e](n&&n.subarray(t,r))};var g,_=(e,t)=>{var r=e+"Mark";r in this&&(t?(b(e,this[r],o,n),delete this[r]):(b(e,this[r],n.length,n),this[r]=0))};for(o=0;o<e;o++)switch(h=n[o],l){case L.START_BOUNDARY:if(s===i.length-2){if(45===h)u|=q.LAST_BOUNDARY;else if(13!==h)return;s++;break}if(s-1==i.length-2){if(u&q.LAST_BOUNDARY&&45===h)l=L.END,u=0;else{if(u&q.LAST_BOUNDARY||10!==h)return;s=0,b("onPartBegin"),l=L.HEADER_FIELD_START}break}h!==i[s+2]&&(s=-2),h===i[s+2]&&s++;break;case L.HEADER_FIELD_START:l=L.HEADER_FIELD,p("onHeaderField"),s=0;case L.HEADER_FIELD:if(13===h){y("onHeaderField"),l=L.HEADERS_ALMOST_DONE;break}if(s++,45===h)break;if(58===h){if(1===s)return;_("onHeaderField",!0),l=L.HEADER_VALUE_START;break}if((g=32|h)<97||122<g)return;break;case L.HEADER_VALUE_START:if(32===h)break;p("onHeaderValue"),l=L.HEADER_VALUE;case L.HEADER_VALUE:13===h&&(_("onHeaderValue",!0),b("onHeaderEnd"),l=L.HEADER_VALUE_ALMOST_DONE);break;case L.HEADER_VALUE_ALMOST_DONE:if(10!==h)return;l=L.HEADER_FIELD_START;break;case L.HEADERS_ALMOST_DONE:if(10!==h)return;b("onHeadersEnd"),l=L.PART_DATA_START;break;case L.PART_DATA_START:l=L.PART_DATA,p("onPartData");case L.PART_DATA:if(0===(t=s)){for(o+=f;o<d&&!(n[o]in a);)o+=c;o-=f,h=n[o]}if(s<i.length)i[s]===h?(0===s&&_("onPartData",!0),s++):s=0;else if(s===i.length)s++,13===h?u|=q.PART_BOUNDARY:45===h?u|=q.LAST_BOUNDARY:s=0;else if(s-1===i.length)if(u&q.PART_BOUNDARY){if(s=0,10===h){u&=~q.PART_BOUNDARY,b("onPartEnd"),b("onPartBegin"),l=L.HEADER_FIELD_START;break}}else u&q.LAST_BOUNDARY&&45===h?(b("onPartEnd"),l=L.END,u=0):s=0;0<s?r[s-1]=h:0<t&&(g=new Uint8Array(r.buffer,r.byteOffset,r.byteLength),b("onPartData",0,t,g),t=0,p("onPartData"),o--);break;case L.END:break;default:throw new Error("Unexpected state entered: "+l)}_("onHeaderField"),_("onHeaderValue"),_("onPartData"),this.index=s,this.state=l,this.flags=u}end(){if(this.state===L.HEADER_FIELD_START&&0===this.index||this.state===L.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==L.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}var Jt=Object.freeze({__proto__:null,toFormData:async function(e,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");if(!(t=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i)))throw new TypeError("no or bad content-type header, no multipart boundary");const r=new Qt(t[1]||t[2]);let n,o,i,a,s,l;const u=[],c=new ut,f=e=>{i+=y.decode(e,{stream:!0})},d=e=>{u.push(e)},h=()=>{var e=new rt(u,l,{type:s});c.append(a,e)},p=()=>{c.append(a,i)},y=new TextDecoder("utf-8");y.decode(),r.onPartBegin=function(){r.onPartData=f,r.onPartEnd=p,n="",o="",i="",a="",s="",l=null,u.length=0},r.onHeaderField=function(e){n+=y.decode(e,{stream:!0})},r.onHeaderValue=function(e){o+=y.decode(e,{stream:!0})},r.onHeaderEnd=function(){var e;o+=y.decode(),"content-disposition"===(n=n.toLowerCase())?((e=o.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i))&&(a=e[2]||e[3]||""),(l=function(t){if(t=t.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i)){const r=t[2]||t[3]||"";let e=r.slice(r.lastIndexOf("\\")+1);return e=(e=e.replace(/%22/g,'"')).replace(/&#(\d{4});/g,(e,t)=>String.fromCharCode(t))}}(o))&&(r.onPartData=d,r.onPartEnd=h)):"content-type"===n&&(s=o),o="",n=""};for await(const b of e)r.write(b);return r.end(),c}});I.default=D,Object.defineProperty(I,"__esModule",{value:!0}),Object.assign(I,D)});
