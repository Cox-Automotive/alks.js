((global,t)=>{"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((global="undefined"!=typeof globalThis?globalThis:global||self).alks={})})(this,function(t){var global=window||this,e="undefined"!=typeof document?document.currentScript:null,x=function(t,e){return(x=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}))(t,e)};var f=function(){return(f=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function o(t,s,u,c){return new(u=u||Promise)(function(r,e){function n(t){try{i(c.next(t))}catch(t){e(t)}}function o(t){try{i(c.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?r(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(n,o)}i((c=c.apply(t,s||[])).next())})}function h(n,o){var i,s,u,c={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=t(0),a.throw=t(1),a.return=t(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function t(r){return function(t){var e=[r,t];if(i)throw new TypeError("Generator is already executing.");for(;c=a&&e[a=0]?0:c;)try{if(i=1,s&&(u=2&e[0]?s.return:e[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,e[1])).done)return u;switch(s=0,(e=u?[2&e[0],u.value]:e)[0]){case 0:case 1:u=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,s=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!(u=0<(u=c.trys).length&&u[u.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!u||e[1]>u[0]&&e[1]<u[3]))c.label=e[1];else if(6===e[0]&&c.label<u[1])c.label=u[1],u=e;else{if(!(u&&c.label<u[2])){u[2]&&c.ops.pop(),c.trys.pop();continue}c.label=u[2],c.ops.push(e)}}e=o.call(n,c)}catch(t){e=[6,t],s=0}finally{i=u=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}}var global=void 0!==global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},c=[],a=[],C="undefined"!=typeof Uint8Array?Uint8Array:Array,l=!1;function Y(){l=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=t.length;e<r;++e)c[e]=t[e],a[t.charCodeAt(e)]=e;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63}function F(t,e,r){for(var n,o=[],i=e;i<r;i+=3)n=(t[i]<<16)+(t[i+1]<<8)+t[i+2],o.push(c[n>>18&63]+c[n>>12&63]+c[n>>6&63]+c[63&n]);return o.join("")}function j(t){l||Y();for(var e,r=t.length,n=r%3,o="",i=[],s=0,u=r-n;s<u;s+=16383)i.push(F(t,s,u<s+16383?u:s+16383));return 1==n?(e=t[r-1],o=(o+=c[e>>2])+c[e<<4&63]+"=="):2==n&&(e=(t[r-2]<<8)+t[r-1],o=(o=(o+=c[e>>10])+c[e>>4&63])+c[e<<2&63]+"="),i.push(o),i.join("")}function r(t,e,r,n,o){var i,s,u=8*o-n-1,c=(1<<u)-1,a=c>>1,f=-7,h=r?o-1:0,l=r?-1:1,o=t[e+h];for(h+=l,i=o&(1<<-f)-1,o>>=-f,f+=u;0<f;i=256*i+t[e+h],h+=l,f-=8);for(s=i&(1<<-f)-1,i>>=-f,f+=n;0<f;s=256*s+t[e+h],h+=l,f-=8);if(0===i)i=1-a;else{if(i===c)return s?NaN:1/0*(o?-1:1);s+=Math.pow(2,n),i-=a}return(o?-1:1)*s*Math.pow(2,i-n)}function D(t,e,r,n,o,i){var s,u,c=8*i-o-1,a=(1<<c)-1,f=a>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,l=n?0:i-1,p=n?1:-1,i=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=a):(s=Math.floor(Math.log(e)/Math.LN2),e*(n=Math.pow(2,-s))<1&&(s--,n*=2),2<=(e+=1<=s+f?h/n:h*Math.pow(2,1-f))*n&&(s++,n/=2),a<=s+f?(u=0,s=a):1<=s+f?(u=(e*n-1)*Math.pow(2,o),s+=f):(u=e*Math.pow(2,f-1)*Math.pow(2,o),s=0));8<=o;t[r+l]=255&u,l+=p,u/=256,o-=8);for(s=s<<o|u,c+=o;0<c;t[r+l]=255&s,l+=p,s/=256,c-=8);t[r+l-p]|=128*i}var N={}.toString,K=Array.isArray||function(t){return"[object Array]"==N.call(t)};function n(){return p.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(n()<e)throw new RangeError("Invalid typed array length");return p.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=p.prototype:(t=null===t?new p(e):t).length=e,t}function p(t,e,r){if(!(p.TYPED_ARRAY_SUPPORT||this instanceof p))return new p(t,e,r);if("number"!=typeof t)return z(this,t,e,r);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return i(this,t)}function z(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer){var o=t,i=e,s=r;if(i.byteLength,s<0||i.byteLength<s)throw new RangeError("'offset' is out of bounds");if(i.byteLength<s+(n||0))throw new RangeError("'length' is out of bounds");return i=void 0===s&&void 0===n?new Uint8Array(i):void 0===n?new Uint8Array(i,s):new Uint8Array(i,s,n),p.TYPED_ARRAY_SUPPORT?(o=i).__proto__=p.prototype:o=G(o,i),o}if("string"!=typeof e){s=t,n=e;if(d(n))return i=0|q(n.length),0!==(s=u(s,i)).length&&n.copy(s,0,0,i),s;if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||(t=>t!=t)(n.length)?u(s,0):G(s,n);if("Buffer"===n.type&&K(n.data))return G(s,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}o=t,n=e,t=r;if(p.isEncoding(t="string"==typeof t&&""!==t?t:"utf8"))return e=0|J(n,t),o=(n=(o=u(o,e)).write(n,t))!==e?o.slice(0,n):o;throw new TypeError('"encoding" must be a valid string encoding')}function W(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function i(t,e){if(W(e),t=u(t,e<0?0:0|q(e)),!p.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function G(t,e){var r=e.length<0?0:0|q(e.length);t=u(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function q(t){if(n()<=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function d(t){return null!=t&&t._isBuffer}function J(t,e){if(d(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;var r=(t="string"!=typeof t?""+t:t).length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return A(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return it(t).length;default:if(n)return A(t).length;e=(""+e).toLowerCase(),n=!0}}function V(t,e,r){var n,o=!1;if((e=void 0===e||e<0?0:e)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":var i=this,s=e,u=r,c=i.length;(!u||u<0||c<u)&&(u=c);for(var a="",f=s=!s||s<0?0:s;f<u;++f)a+=(t=>t<16?"0"+t.toString(16):t.toString(16))(i[f]);return a;case"utf8":case"utf-8":return X(this,e,r);case"ascii":var h=this,c=e,l=r,p="";l=Math.min(h.length,l);for(var d=c;d<l;++d)p+=String.fromCharCode(127&h[d]);return p;case"latin1":case"binary":var y=this,s=e,g=r,v="";g=Math.min(y.length,g);for(var w=s;w<g;++w)v+=String.fromCharCode(y[w]);return v;case"base64":return A=this,n=r,0===(b=e)&&n===A.length?j(A):j(A.slice(b,n));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var A=e,b=r,m=this.slice(A,b),R="",T=0;T<m.length;T+=2)R+=String.fromCharCode(m[T]+256*m[T+1]);return R;default:if(o)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),o=!0}}function s(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function H(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,(r=(r=isNaN(r)?o?0:t.length-1:r)<0?t.length+r:r)>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if(d(e="string"==typeof e?p.from(e,n):e))return 0===e.length?-1:Z(t,e,r,n,o);if("number"==typeof e)return e&=255,p.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(o?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,e,r):Z(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function Z(t,e,r,n,o){var i=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s/=i=2,u/=2,r/=2}function c(t,e){return 1===i?t[e]:t.readUInt16BE(e*i)}if(o)for(var a=-1,f=r;f<s;f++)if(c(t,f)===c(e,-1===a?0:f-a)){if(f-(a=-1===a?f:a)+1===u)return a*i}else-1!==a&&(f-=f-a),a=-1;else for(f=r=s<r+u?s-u:r;0<=f;f--){for(var h=!0,l=0;l<u;l++)if(c(t,f+l)!==c(e,l)){h=!1;break}if(h)return f}return-1}function $(t,e,r,n){return b((t=>{for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e})(e),t,r,n)}function Q(t,e,r,n){return b(((t,e)=>{for(var r,n,o=[],i=0;i<t.length&&!((e-=2)<0);++i)r=t.charCodeAt(i),n=r>>8,o.push(r%256),o.push(n);return o})(e,t.length-r),t,r,n)}function X(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var i,s,u,c,a=t[o],f=null,h=239<a?4:223<a?3:191<a?2:1;if(o+h<=r)switch(h){case 1:a<128&&(f=a);break;case 2:128==(192&(i=t[o+1]))&&127<(c=(31&a)<<6|63&i)&&(f=c);break;case 3:i=t[o+1],s=t[o+2],128==(192&i)&&128==(192&s)&&2047<(c=(15&a)<<12|(63&i)<<6|63&s)&&(c<55296||57343<c)&&(f=c);break;case 4:i=t[o+1],s=t[o+2],u=t[o+3],128==(192&i)&&128==(192&s)&&128==(192&u)&&65535<(c=(15&a)<<18|(63&i)<<12|(63&s)<<6|63&u)&&c<1114112&&(f=c)}null===f?(f=65533,h=1):65535<f&&(n.push((f-=65536)>>>10&1023|55296),f=56320|1023&f),n.push(f),o+=h}var l=n,p=l.length;if(p<=tt)return String.fromCharCode.apply(String,l);for(var d="",y=0;y<p;)d+=String.fromCharCode.apply(String,l.slice(y,y+=tt));return d}p.TYPED_ARRAY_SUPPORT=void 0===global.TYPED_ARRAY_SUPPORT||global.TYPED_ARRAY_SUPPORT,p.poolSize=8192,p._augment=function(t){return t.__proto__=p.prototype,t},p.from=function(t,e,r){return z(null,t,e,r)},p.TYPED_ARRAY_SUPPORT&&(p.prototype.__proto__=Uint8Array.prototype,p.__proto__=Uint8Array),p.alloc=function(t,e,r){return n=null,e=e,r=r,W(t=t),!(t<=0)&&void 0!==e?"string"==typeof r?u(n,t).fill(e,r):u(n,t).fill(e):u(n,t);var n},p.allocUnsafe=function(t){return i(null,t)},p.allocUnsafeSlow=function(t){return i(null,t)},p.isBuffer=function(t){return null!=t&&(!!t._isBuffer||st(t)||(t=>"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&st(t.slice(0,0)))(t))},p.compare=function(t,e){if(!d(t)||!d(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},p.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(t,e){if(!K(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return p.alloc(0);if(void 0===e)for(o=e=0;o<t.length;++o)e+=t[o].length;for(var r=p.allocUnsafe(e),n=0,o=0;o<t.length;++o){var i=t[o];if(!d(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,n),n+=i.length}return r},p.byteLength=J,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)s(this,e,e+1);return this},p.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)s(this,e,e+3),s(this,e+1,e+2);return this},p.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)s(this,e,e+7),s(this,e+1,e+6),s(this,e+2,e+5),s(this,e+3,e+4);return this},p.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?X(this,0,t):V.apply(this,arguments)},p.prototype.equals=function(t){if(d(t))return this===t||0===p.compare(this,t);throw new TypeError("Argument must be a Buffer")},p.prototype.inspect=function(){var t="";return 0<this.length&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length)&&(t+=" ... "),"<Buffer "+t+">"},p.prototype.compare=function(t,e,r,n,o){if(!d(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),(e=void 0===e?0:e)<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(o<=n&&r<=e)return 0;if(o<=n)return-1;if(r<=e)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),u=Math.min(i,s),c=this.slice(n,o),a=t.slice(e,r),f=0;f<u;++f)if(c[f]!==a[f]){i=c[f],s=a[f];break}return i<s?-1:s<i?1:0},p.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},p.prototype.indexOf=function(t,e,r){return H(this,t,e,r,!0)},p.prototype.lastIndexOf=function(t,e,r){return H(this,t,e,r,!1)},p.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||o<r)&&(r=o),0<t.length&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var i,s,u,c=!1;;)switch(n){case"hex":var a=this,f=t,h=e,l=r,p=(h=Number(h)||0,a.length-h);if((!l||p<(l=Number(l)))&&(l=p),(p=f.length)%2!=0)throw new TypeError("Invalid hex string");p/2<l&&(l=p/2);for(var d=0;d<l;++d){var y=parseInt(f.substr(2*d,2),16);if(isNaN(y))return d;a[h+d]=y}return d;case"utf8":case"utf-8":return p=e,u=r,b(A(t,(s=this).length-p),s,p,u);case"ascii":return $(this,t,e,r);case"latin1":case"binary":return $(this,t,e,r);case"base64":return s=this,u=e,i=r,b(it(t),s,u,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,t,e,r);default:if(c)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),c=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;function y(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(r<t+e)throw new RangeError("Trying to access beyond buffer length")}function g(t,e,r,n,o,i){if(!d(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<e||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function v(t,e,r,n){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-r,2);o<i;++o)t[r+o]=(e&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function w(t,e,r,n){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-r,4);o<i;++o)t[r+o]=e>>>8*(n?o:3-o)&255}function et(t,e,r,n){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function rt(t,e,r,n,o){return o||et(t,0,r,4),D(t,e,r,n,23,4),r+4}function nt(t,e,r,n,o){return o||et(t,0,r,8),D(t,e,r,n,52,8),r+8}p.prototype.slice=function(t,e){var r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t),p.TYPED_ARRAY_SUPPORT)(o=this.subarray(t,e)).__proto__=p.prototype;else for(var n=e-t,o=new p(n,void 0),i=0;i<n;++i)o[i]=this[i+t];return o},p.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||y(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},p.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||y(t,e,this.length);for(var n=this[t+--e],o=1;0<e&&(o*=256);)n+=this[t+--e]*o;return n},p.prototype.readUInt8=function(t,e){return e||y(t,1,this.length),this[t]},p.prototype.readUInt16LE=function(t,e){return e||y(t,2,this.length),this[t]|this[t+1]<<8},p.prototype.readUInt16BE=function(t,e){return e||y(t,2,this.length),this[t]<<8|this[t+1]},p.prototype.readUInt32LE=function(t,e){return e||y(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},p.prototype.readUInt32BE=function(t,e){return e||y(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},p.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||y(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return(o*=128)<=n&&(n-=Math.pow(2,8*e)),n},p.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||y(t,e,this.length);for(var n=e,o=1,i=this[t+--n];0<n&&(o*=256);)i+=this[t+--n]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*e)),i},p.prototype.readInt8=function(t,e){return e||y(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},p.prototype.readInt16LE=function(t,e){e||y(t,2,this.length);e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},p.prototype.readInt16BE=function(t,e){e||y(t,2,this.length);e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},p.prototype.readInt32LE=function(t,e){return e||y(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},p.prototype.readInt32BE=function(t,e){return e||y(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},p.prototype.readFloatLE=function(t,e){return e||y(t,4,this.length),r(this,t,!0,23,4)},p.prototype.readFloatBE=function(t,e){return e||y(t,4,this.length),r(this,t,!1,23,4)},p.prototype.readDoubleLE=function(t,e){return e||y(t,8,this.length),r(this,t,!0,52,8)},p.prototype.readDoubleBE=function(t,e){return e||y(t,8,this.length),r(this,t,!1,52,8)},p.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||g(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},p.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||g(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[e+o]=255&t;0<=--o&&(i*=256);)this[e+o]=t/i&255;return e+r},p.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||g(this,t,e,1,255,0),p.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},p.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||g(this,t,e,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):v(this,t,e,!0),e+2},p.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||g(this,t,e,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):v(this,t,e,!1),e+2},p.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||g(this,t,e,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):w(this,t,e,!0),e+4},p.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||g(this,t,e,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):w(this,t,e,!1),e+4},p.prototype.writeIntLE=function(t,e,r,n){t=+t,e|=0,n||g(this,t,e,r,(n=Math.pow(2,8*r-1))-1,-n);var o=0,i=1,s=0;for(this[e]=255&t;++o<r&&(i*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/i>>0)-s&255;return e+r},p.prototype.writeIntBE=function(t,e,r,n){t=+t,e|=0,n||g(this,t,e,r,(n=Math.pow(2,8*r-1))-1,-n);var o=r-1,i=1,s=0;for(this[e+o]=255&t;0<=--o&&(i*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/i>>0)-s&255;return e+r},p.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||g(this,t,e,1,127,-128),p.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&(t=t<0?255+t+1:t),e+1},p.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||g(this,t,e,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):v(this,t,e,!0),e+2},p.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||g(this,t,e,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):v(this,t,e,!1),e+2},p.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||g(this,t,e,4,2147483647,-2147483648),p.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):w(this,t,e,!0),e+4},p.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||g(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):w(this,t,e,!1),e+4},p.prototype.writeFloatLE=function(t,e,r){return rt(this,t,e,!0,r)},p.prototype.writeFloatBE=function(t,e,r){return rt(this,t,e,!1,r)},p.prototype.writeDoubleLE=function(t,e,r){return nt(this,t,e,!0,r)},p.prototype.writeDoubleBE=function(t,e,r){return nt(this,t,e,!1,r)},p.prototype.copy=function(t,e,r,n){if(r=r||0,n||0===n||(n=this.length),e>=t.length&&(e=t.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===t.length||0===this.length)return 0;if((e=e||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var o,i=(n=t.length-e<n-r?t.length-e+r:n)-r;if(this===t&&r<e&&e<n)for(o=i-1;0<=o;--o)t[o+e]=this[o+r];else if(i<1e3||!p.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},p.prototype.fill=function(t,e,r,n){if("string"==typeof t){var o;if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length&&(o=t.charCodeAt(0))<256&&(t=o),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!p.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(!(r<=e))if(e>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(t=t||0))for(u=e;u<r;++u)this[u]=t;else for(var i=d(t)?t:A(new p(t,n).toString()),s=i.length,u=0;u<r-e;++u)this[u+e]=i[u%s];return this};var ot=/[^+\/0-9A-Za-z-_]/g;function A(t,e){e=e||1/0;for(var r,n=t.length,o=null,i=[],s=0;s<n;++s){if(55295<(r=t.charCodeAt(s))&&r<57344){if(!o){if(56319<r){-1<(e-=3)&&i.push(239,191,189);continue}if(s+1===n){-1<(e-=3)&&i.push(239,191,189);continue}o=r;continue}if(r<56320){-1<(e-=3)&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&-1<(e-=3)&&i.push(239,191,189);if(o=null,r<128){if(--e<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function it(t){var e=(t=>{var e;if((t=((e=t).trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(ot,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t})(t);l||Y();var r,t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");for(var n="="===e[t-2]?2:"="===e[t-1]?1:0,o=new C(3*t/4-n),i=0<n?t-4:t,s=0,u=0;u<i;u+=4)r=a[e.charCodeAt(u)]<<18|a[e.charCodeAt(u+1)]<<12|a[e.charCodeAt(u+2)]<<6|a[e.charCodeAt(u+3)],o[s++]=r>>16&255,o[s++]=r>>8&255,o[s++]=255&r;return 2==n?(r=a[e.charCodeAt(u)]<<2|a[e.charCodeAt(u+1)]>>4,o[s++]=255&r):1==n&&(r=a[e.charCodeAt(u)]<<10|a[e.charCodeAt(u+1)]<<4|a[e.charCodeAt(u+2)]>>2,o[s++]=r>>8&255,o[s++]=255&r),o}function b(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}function st(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function ut(){throw new Error("setTimeout has not been defined")}function ct(){throw new Error("clearTimeout has not been defined")}var m=ut,R=ct;function at(e){if(m===setTimeout)return setTimeout(e,0);if((m===ut||!m)&&setTimeout)return(m=setTimeout)(e,0);try{return m(e,0)}catch(t){try{return m.call(null,e,0)}catch(t){return m.call(this,e,0)}}}"function"==typeof global.setTimeout&&(m=setTimeout),"function"==typeof global.clearTimeout&&(R=clearTimeout);var T,E=[],_=!1,S=-1;function ft(){_&&T&&(_=!1,T.length?E=T.concat(E):S=-1,E.length)&&ht()}function ht(){if(!_){for(var t=at(ft),e=(_=!0,E.length);e;){for(T=E,E=[];++S<e;)T&&T[S].run();S=-1,e=E.length}T=null,_=!1,!function(e){if(R===clearTimeout)return clearTimeout(e);if((R===ct||!R)&&clearTimeout)return(R=clearTimeout)(e);try{R(e)}catch(t){try{return R.call(null,e)}catch(t){return R.call(this,e)}}}(t)}}function lt(t,e){this.fun=t,this.array=e}lt.prototype.run=function(){this.fun.apply(null,this.array)};function P(){}var pt=P,I=P,U=P,O=P,dt=P,yt=P,gt=P;var M=global.performance||{},vt=M.now||M.mozNow||M.msNow||M.oNow||M.webkitNow||function(){return(new Date).getTime()};var wt=new Date;var At={nextTick:function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];E.push(new lt(t,e)),1!==E.length||_||at(ht)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:pt,addListener:I,once:U,off:O,removeListener:dt,removeAllListeners:yt,emit:gt,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*vt.call(M),r=Math.floor(e),e=Math.floor(e%1*1e9);return t&&(r-=t[0],(e-=t[1])<0)&&(r--,e+=1e9),[r,e]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-wt)/1e3}};function bt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function mt(r){var e,n;return r.__esModule?r:("function"==typeof(e=r.default)?(n=function t(){return this instanceof t?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)}).prototype=e.prototype:n={},Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(r).forEach(function(t){var e=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(n,t,e.get?e:{enumerable:!0,get:function(){return r[t]}})}),n)}var Rt=mt(Object.freeze({__proto__:null,default:{}}));function Tt(t,e){for(var r=0,n=t.length-1;0<=n;n--){var o=t[n];"."===o?t.splice(n,1):".."===o?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;)t.unshift("..");return t}var Et=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,_t=function(t){return Et.exec(t).slice(1)};function B(){for(var t="",e=!1,r=arguments.length-1;-1<=r&&!e;r--){var n=0<=r?arguments[r]:"/";if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(t=n+"/"+t,e="/"===n.charAt(0))}return(e?"/":"")+(t=Tt(Lt(t.split("/"),function(t){return!!t}),!e).join("/"))||"."}function St(t){var e=Pt(t),r="/"===Ct(t,-1);return(t=(t=Tt(Lt(t.split("/"),function(t){return!!t}),!e).join("/"))||e?t:".")&&r&&(t+="/"),(e?"/":"")+t}function Pt(t){return"/"===t.charAt(0)}function It(){return St(Lt(Array.prototype.slice.call(arguments,0),function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))}function Ut(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;0<=r&&""===t[r];r--);return r<e?[]:t.slice(e,r-e+1)}t=B(t).substr(1),e=B(e).substr(1);for(var n=r(t.split("/")),o=r(e.split("/")),i=Math.min(n.length,o.length),s=i,u=0;u<i;u++)if(n[u]!==o[u]){s=u;break}for(var c=[],u=s;u<n.length;u++)c.push("..");return(c=c.concat(o.slice(s))).join("/")}function Ot(t){var t=_t(t),e=t[0],t=t[1];return e||t?e+(t=t&&t.substr(0,t.length-1)):"."}function Mt(t,e){t=_t(t)[2];return t=e&&t.substr(-1*e.length)===e?t.substr(0,t.length-e.length):t}function Bt(t){return _t(t)[3]}global={extname:Bt,basename:Mt,dirname:Ot,sep:"/",delimiter:":",relative:Ut,join:It,isAbsolute:Pt,normalize:St,resolve:B};function Lt(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}var kt,xt,Ct="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)},Yt=mt(Object.freeze({__proto__:null,basename:Mt,default:global,delimiter:":",dirname:Ot,extname:Bt,isAbsolute:Pt,join:It,normalize:St,relative:Ut,resolve:B,sep:"/"})),Ft=mt(Object.freeze({__proto__:null,default:{}}));var jt,Dt,Nt=bt((()=>{if(!xt){xt=1;let r=Rt,n=Yt,o=Ft;kt=function(t){return(t=>{try{return o.lstatSync(t).isDirectory()}catch(t){}})(t=t||At.cwd())&&(t=n.join(t,"index.js")),r.createRequire?r.createRequire(t):r.createRequireFromPath?r.createRequireFromPath(t):(t=t,(e=new r.Module(t,null)).filename=t,e.paths=r.Module._nodeModulePaths(n.dirname(t)),e._compile("module.exports = require;",t),e.exports);var e}}return kt})())("undefined"==typeof document&&"undefined"==typeof location?require("url").pathToFileURL(__filename).href:"undefined"==typeof document?location.href:e&&"SCRIPT"===e.tagName.toUpperCase()&&e.src||new URL("alks.umd.js",document.baseURI).href)("../package.json"),pt=window.fetch.bind(window);function L(t){this.config=t}function k(r,t){return t.reduce(function(t,e){return t[e]=r[e],t},{})}I=jt=jt||{},(U=I.TrustType||(I.TrustType={})).CrossAccount="Cross Account",U.InnerAccount="Inner Account",(U=I.PseudoBoolean||(I.PseudoBoolean={}))[U.True=1]="True",U[U.False=0]="False",L.prototype.create=function(t){return new L(f(f({},this.config),t))},L.prototype.getAccounts=function(r){return o(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("getAccounts",r)];case 1:return e=t.sent(),[2,Object.keys(e.accountListRole).map(function(t){return{account:t,role:e.accountListRole[t][0].role,iamKeyActive:e.accountListRole[t][0].iamKeyActive,maxKeyDuration:e.accountListRole[t][0].maxKeyDuration,securityLevel:e.accountListRole[t][0].securityLevel,skypieaAccount:e.accountListRole[t][0].skypieaAccount}})]}})})},L.prototype.getKeys=function(e){return o(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("getKeys",e)];case 1:return[2,k(t.sent(),["accessKey","secretKey","sessionToken","consoleURL","sessionTime"])]}})})},L.prototype.getIAMKeys=function(e){return o(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("getIAMKeys",e)];case 1:return[2,k(t.sent(),["accessKey","secretKey","sessionToken","consoleURL","sessionTime"])]}})})},L.prototype.getAllAWSRoleTypes=function(r){return o(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return e=r.getDynamicValues?"allAwsRoleTypes?getDynamicValues=true":"allAwsRoleTypes",[4,this.internalFetch(e,r,"GET")];case 1:return[2,t.sent().roleTypes]}})})},L.prototype.getAWSRoleTypes=function(r){return o(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("getAWSRoleTypes",r)];case 1:return e=t.sent(),[2,JSON.parse(e.roleTypes)]}})})},L.prototype.getNonServiceAWSRoleTypes=function(r){return o(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("getNonServiceAWSRoleTypes",r)];case 1:return e=t.sent(),[2,JSON.parse(e.roleTypes)]}})})},L.prototype.createRole=function(r){return o(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return null!=r.roleType==(null!=r.trustPolicy)?[3,2]:[4,this.internalFetch("createRole",r)];case 1:return(e=t.sent()).denyArns=e.denyArns.split(","),[2,k(e,["roleArn","denyArns","instanceProfileArn","addedRoleToInstanceProfile","tags"])];case 2:throw new Error("Must include roleType or trustPolicy, but not both.")}})})},L.prototype.createNonServiceRole=function(r){return o(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("createNonServiceRole",r)];case 1:return(e=t.sent()).denyArns=e.denyArns.split(","),[2,k(e,["roleArn","denyArns","instanceProfileArn","addedRoleToInstanceProfile","tags"])]}})})},L.prototype.awsAccountRoles=function(e){return o(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("awsAccountRoles?account=".concat(e.account),e,"GET")];case 1:return[2,t.sent().awsRoleList]}})})},L.prototype.listAWSAccountRoles=function(r){return o(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("listAWSAccountRoles",r)];case 1:return e=t.sent(),[2,JSON.parse(e.jsonAWSRoleList).map(function(t){return t.split("/").slice(-1)[0]})]}})})},L.prototype.getAccountRole=function(r){return o(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("getAccountRole",r)];case 1:if((e=t.sent()).roleExists)return[2,f(f({},k(e,["roleArn","isMachineIdentity","tags","maxSessionDurationInSeconds"])),{instanceProfileArn:e.instanceProfileARN})];throw new Error("Role ".concat(r.roleName," does not exist in this account"))}})})},L.prototype.updateRole=function(r){return o(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("role",r,"PATCH")];case 1:if((e=t.sent()).roleExists)return[2,f(f({},k(e,["roleArn","isMachineIdentity","tags"])),{instanceProfileArn:e.instanceProfileARN})];throw new Error("Role ".concat(r.roleName," does not exist in this account"))}})})},L.prototype.deleteRole=function(e){return o(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("deleteRole",e)];case 1:return t.sent(),[2,!0]}})})},L.prototype.addRoleMachineIdentity=function(e){return o(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("roleMachineIdentity",e)];case 1:return[2,k(t.sent(),["machineIdentityArn"])]}})})},L.prototype.deleteRoleMachineIdentity=function(e){return o(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("roleMachineIdentity",e,"DELETE")];case 1:return[2,k(t.sent(),["machineIdentityArn"])]}})})},L.prototype.getUserAccess=function(r){return o(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return e=r.accountId,[4,this.internalFetch("userAccess/".concat(e),r,"GET")];case 1:return[2,t.sent().users]}})})},L.prototype.getUserAccessByRole=function(r){return o(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return e=r.accountId,[4,this.internalFetch("reports/users-by-role?accountId=".concat(e),r,"GET")];case 1:return[2,t.sent().users]}})})},L.prototype.getUserRoleAccess=function(r){return o(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return e=r.accountId,[4,this.internalFetch("userAccess/roles/".concat(e),r)];case 1:return[2,t.sent().roles]}})})},L.prototype.getAccountOwners=function(r){return o(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return e=r.accountId,[4,this.internalFetch("userAccess/owners/".concat(e),r,"GET")];case 1:return[2,t.sent().accountOwners]}})})},L.prototype.createAccessKeys=function(e){return o(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("accessKeys",e)];case 1:return[2,k(t.sent(),["iamUserArn","accessKey","secretKey","addedIAMUserToGroup","tags"])]}})})},L.prototype.getIamUser=function(e){return o(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("iam-users/id/".concat(e.account,"/").concat(e.iamUserName),e,"GET")];case 1:return[2,k(t.sent().item,["arn","accountId","userName","accessKey","tags"])]}})})},L.prototype.updateIamUser=function(r){return o(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return delete(e=f(f({},r),{user:{tags:r.tags}})).tags,[4,this.internalFetch("iam-users/id/".concat(r.account,"/").concat(r.iamUserName),e,"PATCH")];case 1:return[2,k(t.sent().item,["arn","accountId","userName","accessKey","tags"])]}})})},L.prototype.deleteIAMUser=function(e){return o(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("IAMUser",e,"DELETE")];case 1:return t.sent(),[2,!0]}})})},L.prototype.version=function(e){return o(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("version",e,"GET")];case 1:return[2,k(t.sent(),["version"])]}})})},L.prototype.getLoginRole=function(n){return o(this,void 0,void 0,function(){var e,r;return h(this,function(t){switch(t.label){case 0:return e=n.accountId,r=n.role,[4,this.internalFetch("loginRoles/id/".concat(e,"/").concat(r),n,"GET")];case 1:return[2,k(t.sent().loginRole,["account","role","iamKeyActive","maxKeyDuration","securityLevel"])]}})})},L.prototype.getAccessToken=function(e){return o(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("accessToken",e)];case 1:return[2,k(t.sent(),["accessToken","expiresIn"])]}})})},L.prototype.getRefreshTokens=function(e){return o(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("refreshTokens",e,"GET")];case 1:return[2,t.sent().refreshTokens.map(function(t){return k(t,["clientId","id","userId","value"])})]}})})},L.prototype.revoke=function(e){return o(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("revoke",e)];case 1:return[2,"Success"==t.sent().statusMessage]}})})},L.prototype.getCostTotals=function(e){return o(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("costTotals/".concat(e.accountId),e,"GET")];case 1:return[2,k(t.sent().costTotals,["awsAccountId","yyyy","mm","dd","daily","weekly","monthly","yearly","dailyCostsByService","monthlyCostsByService"])]}})})},L.prototype.internalFetch=function(t){return o(this,arguments,void 0,function(e,r,n){var o,i,s,u,c,a;return void 0===r&&(r={}),void 0===n&&(n="POST"),h(this,function(t){switch(t.label){case 0:return a=f(f({},this.config),r),o=f({},a),i={"Content-Type":"application/json","User-Agent":"AlksJS/".concat(Nt.version)},void 0!==a.accessToken?(i.Authorization="Bearer ".concat(a.accessToken),delete o.accessToken):void 0!==a.accessKey?(i["ALKS-STS-Access-Key"]=a.accessKey,i["ALKS-STS-Secret-Key"]=a.secretKey,i["ALKS-STS-Session-Token"]=a.sessionToken,delete o.accessKey,delete o.secretKey,delete o.sessionToken):void 0!==a.userid&&(console.error("The userid and password properties are deprecated and should be replaced with an access token"),s=(t=>p.from(t=void 0===t?"":t).toString("base64"))("".concat(a.userid,":").concat(a.password)),i.Authorization="Basic ".concat(s),delete o.userid,delete o.password),a.userAgent&&(i["User-Agent"]+=" ".concat(a.userAgent),delete o.userAgent),s="".concat(a.baseUrl,"/").concat(e),[4,a._fetch(s,{method:n,headers:i,credentials:"omit",body:"GET"==n?void 0:JSON.stringify(o)})];case 1:u=t.sent(),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,u.json()];case 3:return c=t.sent(),[3,5];case 4:return a=t.sent(),c={errors:[a.message]},[3,5];case 5:if(this.config.requestLogger)try{this.config.requestLogger({method:n,url:s,statusCode:u.status,statusMessage:c.statusMessage,requestId:c.requestId})}catch(t){}if(u.ok)return[2,c];throw new Dt(u,c)}})})},U=L,I.Alks=U,Dt=(o=>{var t=n,e=o;if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}function n(t,e){var r=this,n=Array.isArray(null==e?void 0:e.errors)?e.errors:[],n=(t.statusText&&n.unshift(t.statusText),n.join("; "));return(r=o.call(this,n)||this).status=t.status,r.message=n,Object.assign(r,e),r}return x(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r),n})(Error),I.AlksError=Dt,O=U.prototype.create.call({},{_fetch:pt}),I.create=U.prototype.create.bind(O),I.getAccounts=U.prototype.getAccounts.bind(O),I.getKeys=U.prototype.getKeys.bind(O),I.getIAMKeys=U.prototype.getIAMKeys.bind(O),I.getAllAWSRoleTypes=U.prototype.getAllAWSRoleTypes.bind(O),I.getAWSRoleTypes=U.prototype.getAWSRoleTypes.bind(O),I.getNonServiceAWSRoleTypes=U.prototype.getNonServiceAWSRoleTypes.bind(O),I.createRole=U.prototype.createRole.bind(O),I.createNonServiceRole=U.prototype.createNonServiceRole.bind(O),I.awsAccountRoles=U.prototype.awsAccountRoles.bind(O),I.listAWSAccountRoles=U.prototype.listAWSAccountRoles.bind(O),I.getAccountRole=U.prototype.getAccountRole.bind(O),I.updateRole=U.prototype.updateRole.bind(O),I.deleteRole=U.prototype.deleteRole.bind(O),I.addRoleMachineIdentity=U.prototype.addRoleMachineIdentity.bind(O),I.deleteRoleMachineIdentity=U.prototype.deleteRoleMachineIdentity.bind(O),I.getUserAccess=U.prototype.getUserAccess.bind(O),I.getUserAccessByRole=U.prototype.getUserAccessByRole.bind(O),I.getUserRoleAccess=U.prototype.getUserRoleAccess.bind(O),I.getAccountOwners=U.prototype.getAccountOwners.bind(O),I.createAccessKeys=U.prototype.createAccessKeys.bind(O),I.getIamUser=U.prototype.getIamUser.bind(O),I.updateIamUser=U.prototype.updateIamUser.bind(O),I.deleteIAMUser=U.prototype.deleteIAMUser.bind(O),I.version=U.prototype.version.bind(O),I.getLoginRole=U.prototype.getLoginRole.bind(O),I.getAccessToken=U.prototype.getAccessToken.bind(O),I.getRefreshTokens=U.prototype.getRefreshTokens.bind(O),I.revoke=U.prototype.revoke.bind(O),I.getCostTotals=U.prototype.getCostTotals.bind(O);dt=jt;t.default=dt,Object.defineProperty(t,"__esModule",{value:!0}),Object.assign(t,alks)});
