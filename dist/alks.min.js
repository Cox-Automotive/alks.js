var alks=function(){"use strict";var t=window.fetch.bind(window),n=function(e){this.defaults=Object.assign({},{_fetch:t},e)};n.prototype.create=function(e){return new n(e)},n.prototype.getAccounts=function(e){return this._doFetch("getAccounts",e).then(function(t){return Object.keys(t.accountListRole).map(function(e){return{account:e,role:t.accountListRole[e][0].role,iamKeyActive:t.accountListRole[e][0].iamKeyActive}})})},n.prototype.getKeys=function(e){return this._doFetch("getKeys",e).then(function(e){return o(e,["accessKey","secretKey","sessionToken"])})},n.prototype.getIAMKeys=function(e){return this._doFetch("getIAMKeys",e).then(function(e){return o(e,["accessKey","secretKey","sessionToken"])})},n.prototype.getAWSRoleTypes=function(e){return this._doFetch("getAWSRoleTypes",e).then(function(e){return JSON.parse(e.roleTypes)})},n.prototype.createRole=function(e){return this._doFetch("createRole",e).then(function(e){return e.denyArns=e.denyArns.split(","),o(e,["roleArn","denyArns","instanceProfileArn","addedRoleToInstanceProfile"])})},n.prototype.listAWSAccountRoles=function(e){return this._doFetch("listAWSAccountRoles",e).then(function(e){return JSON.parse(e.jsonAWSRoleList).map(function(e){return e.split("/").slice(-1)[0]})})},n.prototype.getAccountRole=function(t){return this._doFetch("getAccountRole",t).then(function(e){if(!e.roleExists)throw new Error("Role "+t.roleName+" does not exist in this account");return e.roleARN})},n.prototype.deleteRole=function(e){return this._doFetch("deleteRole",e).then(function(){return!0})},n.prototype._doFetch=function(e,t){void 0===t&&(t={});var n=Object.assign({},this.defaults,t),o=n._fetch(n.baseUrl+"/"+e+"/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),r=o.then(function(e){return e.json()}).catch(function(){});return Promise.all([o,r]).then(function(e){var t=e[0],n=e[1];if(!t.ok)throw n&&n.statusMessage&&"Success"!==n.statusMessage?new Error(n.statusMessage):n&&n.errors&&n.errors.length?new Error(n.errors[0]):new Error(t.statusText);return n})};var o=function(n,e){return e.reduce(function(e,t){return e[t]=n[t],e},{})};return new n}();
