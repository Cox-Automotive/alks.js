var alks=function(){"use strict";var e=window.fetch.bind(window),t=function(t){this.defaults=Object.assign({},{_fetch:e},t)};t.prototype.create=function(e){return new t(e)},t.prototype.getAccounts=function(e){return this._doFetch("getAccounts",e).then(function(e){return Object.keys(e.accountListRole).map(function(t){return{account:t,role:e.accountListRole[t][0].role,iamKeyActive:e.accountListRole[t][0].iamKeyActive}})})},t.prototype.getKeys=function(e){return this._doFetch("getKeys",e).then(function(e){return n(e,["accessKey","secretKey","sessionToken"])})},t.prototype.getIAMKeys=function(e){return this._doFetch("getIAMKeys",e).then(function(e){return n(e,["accessKey","secretKey","sessionToken"])})},t.prototype.getAWSRoleTypes=function(e){return this._doFetch("getAWSRoleTypes",e).then(function(e){return JSON.parse(e.roleTypes)})},t.prototype.createRole=function(e){return this._doFetch("createRole",e).then(function(e){return e.denyArns=e.denyArns.split(","),n(e,["roleArn","denyArns","instanceProfileArn","addedRoleToInstanceProfile"])})},t.prototype.listAWSAccountRoles=function(e){return this._doFetch("listAWSAccountRoles",e).then(function(e){return JSON.parse(e.jsonAWSRoleList).map(function(e){return e.split("/").slice(-1)[0]})})},t.prototype.getAccountRole=function(e){return this._doFetch("getAccountRole",e).then(function(t){if(!t.roleExists)throw new Error("Role "+e.roleName+" does not exist in this account");return t.roleARN})},t.prototype.deleteRole=function(e){return this._doFetch("deleteRole",e).then(function(){return!0})},t.prototype._doFetch=function(e,t){void 0===t&&(t={});var n=Object.assign({},this.defaults,t),o=n._fetch(n.baseUrl+"/"+e+"/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),r=o.then(function(e){return e.json()}).catch(function(){});return Promise.all([o,r]).then(function(e){var t=e[0],n=e[1];if(!t.ok)throw n&&n.statusMessage&&"Success"!==n.statusMessage?new Error(n.statusMessage):n&&n.errors&&n.errors.length?new Error(n.errors[0]):new Error(t.statusText);return n})};var n=function(e,t){return t.reduce(function(t,n){return t[n]=e[n],t},{})};return new t}();
