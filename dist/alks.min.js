!function(global,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((global="undefined"!=typeof globalThis?globalThis:global||self).alks={})}(this,function(t){"use strict";var e=window||this;function r(r){if(r.__esModule)return r;var n=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(r).forEach(function(t){var e=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(n,t,e.get?e:{enumerable:!0,get:function(){return r[t]}})}),n}var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};var o=function(){return(o=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var i=Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]};function a(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function f(t){return this instanceof f?(this.v=t,this):new f(t)}var u=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};var c=r(Object.freeze({__proto__:null,__extends:function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},get __assign(){return o},__rest:function(t,e){var r={};for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(r[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,o=Object.getOwnPropertySymbols(t);n<o.length;n++)e.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(r[o[n]]=t[o[n]]);return r},__decorate:function(t,e,r,n){var o,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;0<=a;a--)(o=t[a])&&(s=(i<3?o(s):3<i?o(e,r,s):o(e,r))||s);return 3<i&&s&&Object.defineProperty(e,r,s),s},__param:function(r,n){return function(t,e){n(t,e,r)}},__metadata:function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},__awaiter:function(t,s,a,u){return new(a=a||Promise)(function(r,e){function n(t){try{i(u.next(t))}catch(t){e(t)}}function o(t){try{i(u.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?r(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,o)}i((u=u.apply(t,s||[])).next())})},__generator:function(r,n){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,i=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(r,a)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},__createBinding:i,__exportStar:function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||i(e,t,r)},__values:a,__read:s,__spread:function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t},__spreadArrays:function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),o=0,e=0;e<r;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n},__spreadArray:function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||((n=n||Array.prototype.slice.call(e,0,o))[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},__await:f,__asyncGenerator:function(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=r.apply(t,e||[]),i=[],s={};return n("next"),n("throw"),n("return"),s[Symbol.asyncIterator]=function(){return this},s;function n(n){o[n]&&(s[n]=function(r){return new Promise(function(t,e){1<i.push([n,r,t,e])||a(n,r)})})}function a(t,e){try{(r=o[t](e)).value instanceof f?Promise.resolve(r.value.v).then(u,c):l(i[0][2],r)}catch(t){l(i[0][3],t)}var r}function u(t){a("next",t)}function c(t){a("throw",t)}function l(t,e){t(e),i.shift(),i.length&&a(i[0][0],i[0][1])}},__asyncDelegator:function(n){var o,t={};return e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t;function e(e,r){t[e]=n[e]?function(t){return(o=!o)?{value:f(n[e](t)),done:"return"===e}:r?r(t):t}:r}},__asyncValues:function(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=s[Symbol.asyncIterator];return e?e.call(s):(s=a(s),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=s[i]&&function(o){return new Promise(function(t,e){var r,n;o=s[i](o),r=t,t=e,n=o.done,e=o.value,Promise.resolve(e).then(function(t){r({value:t,done:n})},t)})}}},__makeTemplateObject:function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},__importStar:function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return u(e,t),e},__importDefault:function(t){return t&&t.__esModule?t:{default:t}},__classPrivateFieldGet:function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)},__classPrivateFieldSet:function(t,e,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(t,r):o?o.value=r:e.set(t,r),r}})),l={name:"alks.js",version:"2.8.1",description:"JavaScript client for the ALKS API, usable in both modern browsers and node.js",main:"dist/alks.cjs.js",types:"dist/src/alks.d.ts",unpkg:"dist/alks.min.js",browser:"dist/alks.umd.js",module:"dist/alks.esm.js",scripts:{rmdirs:"rimraf dist lib",mkdirs:"mkdirp dist lib",clean:"npm run rmdirs && npm run mkdirs",rollup:"rollup -c rollup.config.js",minify:'uglifyjs -m reserved=["global"] -c < dist/alks.umd.js > dist/alks.min.js',build:"npm run clean && npm run compile && npm run rollup && npm run minify",lint:"prettier --write --no-error-on-unmatched-pattern {src,test}/**/*.{ts,js,json,md}",test:"npm run build && npm run lint && npm run mocha",mocha:"nyc mocha test/test.js",coverage:"nyc report --reporter=lcov --reporter=text",docs:"typedoc src/alks.ts",prepare:"husky install",compile:"tsc"},files:["dist/"],repository:{type:"git",url:"https://github.com/Cox-Automotive/alks.js.git"},author:{name:"Cox Automotive",email:"paul.ofallon@coxautoinc.com",url:"https://github.com/Cox-Automotive/"},bugs:{url:"https://github.com/Cox-Automotive/alks.js/issues"},license:"MIT",engines:{node:">=14.0.0"},dependencies:{encoding:"^0.1.13",tslib:"^2.3.1"},devDependencies:{"@rollup/plugin-commonjs":"^19.0.0","@rollup/plugin-node-resolve":"^13.0.0","@rollup/plugin-typescript":"^8.2.1","@types/node":"^15.14.9","@types/node-fetch":"^2.5.10",browserify:"^17.0.0",chai:"^4.3.4","chai-as-promised":"^7.1.1",eslint:"^7.25.0","eslint-plugin-jsdoc":"^4.1.1","fetch-mock":"^12.2.0",husky:"^6.0.0","lint-staged":"^11.0.0",mkdirp:"^1.0.4",mocha:"^10.0.0",nyc:"^15.1.0",prettier:"^2.3.0",rimraf:"^3.0.2",rollup:"^2.47.0","rollup-plugin-json":"^3.1.0","rollup-plugin-node-polyfills":"^0.2.1","rollup-plugin-replace":"^2.2.0",sinon:"^10.0.0",tslint:"^6.1.3",typedoc:"^0.22.15",typescript:"^4.2.4","uglify-js":"^3.13.6"},prettier:{singleQuote:!0,semi:!0,arrowParens:"always",endOfLine:"lf",trailingComma:"es5"},"lint-staged":{"{src,test}/**/*.{js,ts,json,md}":["prettier --write"]}},e=void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},h=[],p=[],d="undefined"!=typeof Uint8Array?Uint8Array:Array,y=!1;function g(){y=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=t.length;e<r;++e)h[e]=t[e],p[t.charCodeAt(e)]=e;p["-".charCodeAt(0)]=62,p["_".charCodeAt(0)]=63}function w(t,e,r){for(var n,o=[],i=e;i<r;i+=3)n=(t[i]<<16)+(t[i+1]<<8)+t[i+2],o.push(h[n>>18&63]+h[n>>12&63]+h[n>>6&63]+h[63&n]);return o.join("")}function v(t){var e;y||g();for(var r=t.length,n=r%3,o="",i=[],s=0,a=r-n;s<a;s+=16383)i.push(w(t,s,a<s+16383?a:s+16383));return 1==n?(e=t[r-1],o+=h[e>>2],o+=h[e<<4&63],o+="=="):2==n&&(e=(t[r-2]<<8)+t[r-1],o+=h[e>>10],o+=h[e>>4&63],o+=h[e<<2&63],o+="="),i.push(o),i.join("")}function _(t,e,r,n,o){var i,s,a=8*o-n-1,u=(1<<a)-1,c=u>>1,l=-7,f=r?o-1:0,h=r?-1:1,r=t[e+f];for(f+=h,i=r&(1<<-l)-1,r>>=-l,l+=a;0<l;i=256*i+t[e+f],f+=h,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=n;0<l;s=256*s+t[e+f],f+=h,l-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(r?-1:1);s+=Math.pow(2,n),i-=c}return(r?-1:1)*s*Math.pow(2,i-n)}function b(t,e,r,n,o,i){var s,a,u=8*i-o-1,c=(1<<u)-1,l=c>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,p=n?1:-1,i=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(n=Math.pow(2,-s))<1&&(s--,n*=2),2<=(e+=1<=s+l?f/n:f*Math.pow(2,1-l))*n&&(s++,n/=2),c<=s+l?(a=0,s=c):1<=s+l?(a=(e*n-1)*Math.pow(2,o),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,o),s=0));8<=o;t[r+h]=255&a,h+=p,a/=256,o-=8);for(s=s<<o|a,u+=o;0<u;t[r+h]=255&s,h+=p,s/=256,u-=8);t[r+h-p]|=128*i}var A={}.toString,m=Array.isArray||function(t){return"[object Array]"==A.call(t)};E.TYPED_ARRAY_SUPPORT=void 0===e.TYPED_ARRAY_SUPPORT||e.TYPED_ARRAY_SUPPORT;e=R();function R(){return E.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function T(t,e){if(R()<e)throw new RangeError("Invalid typed array length");return E.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=E.prototype:(t=null===t?new E(e):t).length=e,t}function E(t,e,r){if(!(E.TYPED_ARRAY_SUPPORT||this instanceof E))return new E(t,e,r);if("number"!=typeof t)return S(this,t,e,r);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return I(this,t)}function S(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);E.TYPED_ARRAY_SUPPORT?(t=e).__proto__=E.prototype:t=O(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!E.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|j(e,r),r=(t=T(t,n)).write(e,r);r!==n&&(t=t.slice(0,r));return t}(t,e,r):function(t,e){if(k(e)){var r=0|U(e.length);return 0===(t=T(t,r)).length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?T(t,0):O(t,e);if("Buffer"===e.type&&m(e.data))return O(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function P(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function I(t,e){if(P(e),t=T(t,e<0?0:0|U(e)),!E.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function O(t,e){var r=e.length<0?0:0|U(e.length);t=T(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function U(t){if(t>=R())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+R().toString(16)+" bytes");return 0|t}function k(t){return null!=t&&t._isBuffer}function j(t,e){if(k(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;var r=(t="string"!=typeof t?""+t:t).length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Q(t).length;default:if(n)return q(t).length;e=(""+e).toLowerCase(),n=!0}}function B(t,e,r){var n,o,i,s=!1;if((e=void 0===e||e<0?0:e)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return function(t,e,r){var n=t.length;(!e||e<0)&&(e=0);(!r||r<0||n<r)&&(r=n);for(var o="",i=e;i<r;++i)o+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(t[i]);return o}(this,e,r);case"utf8":case"utf-8":return F(this,e,r);case"ascii":return function(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}(this,e,r);case"latin1":case"binary":return function(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}(this,e,r);case"base64":return n=this,i=r,0===(o=e)&&i===n.length?v(n):v(n.slice(o,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}(this,e,r);default:if(s)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}function x(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function M(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,(r=(r=isNaN(r)?o?0:t.length-1:r)<0?t.length+r:r)>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if(k(e="string"==typeof e?E.from(e,n):e))return 0===e.length?-1:L(t,e,r,n,o);if("number"==typeof e)return e&=255,E.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(o?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,e,r):L(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function L(t,e,r,n,o){var i=1,s=t.length,a=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s/=i=2,a/=2,r/=2}function u(t,e){return 1===i?t[e]:t.readUInt16BE(e*i)}if(o)for(var c=-1,l=r;l<s;l++)if(u(t,l)===u(e,-1===c?0:l-c)){if(l-(c=-1===c?l:c)+1===a)return c*i}else-1!==c&&(l-=l-c),c=-1;else for(l=r=s<r+a?s-a:r;0<=l;l--){for(var f=!0,h=0;h<a;h++)if(u(t,l+h)!==u(e,h)){f=!1;break}if(f)return l}return-1}function C(t,e,r,n){return X(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function Y(t,e,r,n){return X(function(t,e){for(var r,n,o=[],i=0;i<t.length&&!((e-=2)<0);++i)n=t.charCodeAt(i),r=n>>8,n=n%256,o.push(n),o.push(r);return o}(e,t.length-r),t,r,n)}function F(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var i,s,a,u,c=t[o],l=null,f=239<c?4:223<c?3:191<c?2:1;if(o+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(i=t[o+1]))&&127<(u=(31&c)<<6|63&i)&&(l=u);break;case 3:i=t[o+1],s=t[o+2],128==(192&i)&&128==(192&s)&&2047<(u=(15&c)<<12|(63&i)<<6|63&s)&&(u<55296||57343<u)&&(l=u);break;case 4:i=t[o+1],s=t[o+2],a=t[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)&&u<1114112&&(l=u)}null===l?(l=65533,f=1):65535<l&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),o+=f}return function(t){var e=t.length;if(e<=D)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=D));return r}(n)}E.poolSize=8192,E._augment=function(t){return t.__proto__=E.prototype,t},E.from=function(t,e,r){return S(null,t,e,r)},E.TYPED_ARRAY_SUPPORT&&(E.prototype.__proto__=Uint8Array.prototype,E.__proto__=Uint8Array),E.alloc=function(t,e,r){return n=null,e=e,r=r,P(t=t),!(t<=0)&&void 0!==e?"string"==typeof r?T(n,t).fill(e,r):T(n,t).fill(e):T(n,t);var n},E.allocUnsafe=function(t){return I(null,t)},E.allocUnsafeSlow=function(t){return I(null,t)},E.isBuffer=Z,E.compare=function(t,e){if(!k(t)||!k(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},E.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},E.concat=function(t,e){if(!m(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return E.alloc(0);if(void 0===e)for(o=e=0;o<t.length;++o)e+=t[o].length;for(var r=E.allocUnsafe(e),n=0,o=0;o<t.length;++o){var i=t[o];if(!k(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,n),n+=i.length}return r},E.byteLength=j,E.prototype._isBuffer=!0,E.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)x(this,e,e+1);return this},E.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)x(this,e,e+3),x(this,e+1,e+2);return this},E.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)x(this,e,e+7),x(this,e+1,e+6),x(this,e+2,e+5),x(this,e+3,e+4);return this},E.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?F(this,0,t):B.apply(this,arguments)},E.prototype.equals=function(t){if(!k(t))throw new TypeError("Argument must be a Buffer");return this===t||0===E.compare(this,t)},E.prototype.inspect=function(){var t="";return 0<this.length&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(t+=" ... ")),"<Buffer "+t+">"},E.prototype.compare=function(t,e,r,n,o){if(!k(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),(e=void 0===e?0:e)<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(o<=n&&r<=e)return 0;if(o<=n)return-1;if(r<=e)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(i,s),u=this.slice(n,o),c=t.slice(e,r),l=0;l<a;++l)if(u[l]!==c[l]){i=u[l],s=c[l];break}return i<s?-1:s<i?1:0},E.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},E.prototype.indexOf=function(t,e,r){return M(this,t,e,r,!0)},E.prototype.lastIndexOf=function(t,e,r){return M(this,t,e,r,!1)},E.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||o<r)&&(r=o),0<t.length&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var i,s,a,u=!1;;)switch(n){case"hex":return function(t,e,r,n){r=Number(r)||0;var o=t.length-r;if((!n||o<(n=Number(n)))&&(n=o),(o=e.length)%2!=0)throw new TypeError("Invalid hex string");o/2<n&&(n=o/2);for(var i=0;i<n;++i){var s=parseInt(e.substr(2*i,2),16);if(isNaN(s))return i;t[r+i]=s}return i}(this,t,e,r);case"utf8":case"utf-8":return s=e,a=r,X(q(t,(i=this).length-s),i,s,a);case"ascii":return C(this,t,e,r);case"latin1":case"binary":return C(this,t,e,r);case"base64":return i=this,s=e,a=r,X(Q(t),i,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,t,e,r);default:if(u)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),u=!0}},E.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var D=4096;function K(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(r<t+e)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,r,n,o,i){if(!k(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<e||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function W(t,e,r,n){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-r,2);o<i;++o)t[r+o]=(e&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function G(t,e,r,n){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-r,4);o<i;++o)t[r+o]=e>>>8*(n?o:3-o)&255}function z(t,e,r,n){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function J(t,e,r,n,o){return o||z(t,0,r,4),b(t,e,r,n,23,4),r+4}function V(t,e,r,n,o){return o||z(t,0,r,8),b(t,e,r,n,52,8),r+8}E.prototype.slice=function(t,e){var r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t),E.TYPED_ARRAY_SUPPORT)(o=this.subarray(t,e)).__proto__=E.prototype;else for(var n=e-t,o=new E(n,void 0),i=0;i<n;++i)o[i]=this[i+t];return o},E.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||K(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},E.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||K(t,e,this.length);for(var n=this[t+--e],o=1;0<e&&(o*=256);)n+=this[t+--e]*o;return n},E.prototype.readUInt8=function(t,e){return e||K(t,1,this.length),this[t]},E.prototype.readUInt16LE=function(t,e){return e||K(t,2,this.length),this[t]|this[t+1]<<8},E.prototype.readUInt16BE=function(t,e){return e||K(t,2,this.length),this[t]<<8|this[t+1]},E.prototype.readUInt32LE=function(t,e){return e||K(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},E.prototype.readUInt32BE=function(t,e){return e||K(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},E.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||K(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return(o*=128)<=n&&(n-=Math.pow(2,8*e)),n},E.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||K(t,e,this.length);for(var n=e,o=1,i=this[t+--n];0<n&&(o*=256);)i+=this[t+--n]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*e)),i},E.prototype.readInt8=function(t,e){return e||K(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},E.prototype.readInt16LE=function(t,e){e||K(t,2,this.length);t=this[t]|this[t+1]<<8;return 32768&t?4294901760|t:t},E.prototype.readInt16BE=function(t,e){e||K(t,2,this.length);t=this[t+1]|this[t]<<8;return 32768&t?4294901760|t:t},E.prototype.readInt32LE=function(t,e){return e||K(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},E.prototype.readInt32BE=function(t,e){return e||K(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},E.prototype.readFloatLE=function(t,e){return e||K(t,4,this.length),_(this,t,!0,23,4)},E.prototype.readFloatBE=function(t,e){return e||K(t,4,this.length),_(this,t,!1,23,4)},E.prototype.readDoubleLE=function(t,e){return e||K(t,8,this.length),_(this,t,!0,52,8)},E.prototype.readDoubleBE=function(t,e){return e||K(t,8,this.length),_(this,t,!1,52,8)},E.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||N(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},E.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||N(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[e+o]=255&t;0<=--o&&(i*=256);)this[e+o]=t/i&255;return e+r},E.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,1,255,0),E.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},E.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,2,65535,0),E.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):W(this,t,e,!0),e+2},E.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,2,65535,0),E.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):W(this,t,e,!1),e+2},E.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,4,4294967295,0),E.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):G(this,t,e,!0),e+4},E.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,4,4294967295,0),E.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):G(this,t,e,!1),e+4},E.prototype.writeIntLE=function(t,e,r,n){t=+t,e|=0,n||N(this,t,e,r,(n=Math.pow(2,8*r-1))-1,-n);var o=0,i=1,s=0;for(this[e]=255&t;++o<r&&(i*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/i>>0)-s&255;return e+r},E.prototype.writeIntBE=function(t,e,r,n){t=+t,e|=0,n||N(this,t,e,r,(n=Math.pow(2,8*r-1))-1,-n);var o=r-1,i=1,s=0;for(this[e+o]=255&t;0<=--o&&(i*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/i>>0)-s&255;return e+r},E.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,1,127,-128),E.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&(t=t<0?255+t+1:t),e+1},E.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,2,32767,-32768),E.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):W(this,t,e,!0),e+2},E.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,2,32767,-32768),E.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):W(this,t,e,!1),e+2},E.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,4,2147483647,-2147483648),E.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):G(this,t,e,!0),e+4},E.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),E.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):G(this,t,e,!1),e+4},E.prototype.writeFloatLE=function(t,e,r){return J(this,t,e,!0,r)},E.prototype.writeFloatBE=function(t,e,r){return J(this,t,e,!1,r)},E.prototype.writeDoubleLE=function(t,e,r){return V(this,t,e,!0,r)},E.prototype.writeDoubleBE=function(t,e,r){return V(this,t,e,!1,r)},E.prototype.copy=function(t,e,r,n){if(r=r||0,n||0===n||(n=this.length),e>=t.length&&(e=t.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===t.length||0===this.length)return 0;if((e=e||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var o,i=(n=t.length-e<n-r?t.length-e+r:n)-r;if(this===t&&r<e&&e<n)for(o=i-1;0<=o;--o)t[o+e]=this[o+r];else if(i<1e3||!E.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},E.prototype.fill=function(t,e,r,n){if("string"==typeof t){var o;if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1!==t.length||(o=t.charCodeAt(0))<256&&(t=o),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!E.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;if(e>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(t=t||0))for(a=e;a<r;++a)this[a]=t;else for(var i=k(t)?t:q(new E(t,n).toString()),s=i.length,a=0;a<r-e;++a)this[a+e]=i[a%s];return this};var H=/[^+\/0-9A-Za-z-_]/g;function q(t,e){var r;e=e||1/0;for(var n=t.length,o=null,i=[],s=0;s<n;++s){if(55295<(r=t.charCodeAt(s))&&r<57344){if(!o){if(56319<r){-1<(e-=3)&&i.push(239,191,189);continue}if(s+1===n){-1<(e-=3)&&i.push(239,191,189);continue}o=r;continue}if(r<56320){-1<(e-=3)&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&-1<(e-=3)&&i.push(239,191,189);if(o=null,r<128){if(--e<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function Q(t){return function(t){var e;y||g();var r=t.length;if(0<r%4)throw new Error("Invalid string. Length must be a multiple of 4");for(var n="="===t[r-2]?2:"="===t[r-1]?1:0,o=new d(3*r/4-n),i=0<n?r-4:r,s=0,a=0;a<i;a+=4,0)e=p[t.charCodeAt(a)]<<18|p[t.charCodeAt(a+1)]<<12|p[t.charCodeAt(a+2)]<<6|p[t.charCodeAt(a+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=255&e;return 2==n?(e=p[t.charCodeAt(a)]<<2|p[t.charCodeAt(a+1)]>>4,o[s++]=255&e):1==n&&(e=p[t.charCodeAt(a)]<<10|p[t.charCodeAt(a+1)]<<4|p[t.charCodeAt(a+2)]>>2,o[s++]=e>>8&255,o[s++]=255&e),o}(function(t){var e;if((t=((e=t).trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(H,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function X(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}function Z(t){return null!=t&&(!!t._isBuffer||$(t)||"function"==typeof(t=t).readFloatLE&&"function"==typeof t.slice&&$(t.slice(0,0)))}function $(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var e=r(Object.freeze({__proto__:null,Buffer:E,INSPECT_MAX_BYTES:50,SlowBuffer:function(t){return E.alloc(+(t=+t!=t?0:t))},isBuffer:Z,kMaxLength:e})),tt=c,et=tt.__importStar(l),rt=e,nt=window.fetch.bind(window);!function(t){(e=t.TrustType||(t.TrustType={})).CrossAccount="Cross Account",e.InnerAccount="Inner Account",(s=t.PseudoBoolean||(t.PseudoBoolean={}))[s.True=1]="True",s[s.False=0]="False";var e=(r.prototype.create=function(t){return new r(tt.__assign(tt.__assign({},this.config),t))},r.prototype.getAccounts=function(r){return tt.__awaiter(this,void 0,void 0,function(){var e;return tt.__generator(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("getAccounts",r)];case 1:return e=t.sent(),[2,Object.keys(e.accountListRole).map(function(t){return{account:t,role:e.accountListRole[t][0].role,iamKeyActive:e.accountListRole[t][0].iamKeyActive,maxKeyDuration:e.accountListRole[t][0].maxKeyDuration,securityLevel:e.accountListRole[t][0].securityLevel,skypieaAccount:e.accountListRole[t][0].skypieaAccount}})]}})})},r.prototype.getKeys=function(e){return tt.__awaiter(this,void 0,void 0,function(){return tt.__generator(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("getKeys",e)];case 1:return[2,i(t.sent(),["accessKey","secretKey","sessionToken","consoleURL","sessionTime"])]}})})},r.prototype.getIAMKeys=function(e){return tt.__awaiter(this,void 0,void 0,function(){return tt.__generator(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("getIAMKeys",e)];case 1:return[2,i(t.sent(),["accessKey","secretKey","sessionToken","consoleURL","sessionTime"])]}})})},r.prototype.getAllAWSRoleTypes=function(r){return tt.__awaiter(this,void 0,void 0,function(){var e;return tt.__generator(this,function(t){switch(t.label){case 0:return e=r.getDynamicValues?"allAwsRoleTypes?getDynamicValues=true":"allAwsRoleTypes",[4,this.internalFetch(e,r,"GET")];case 1:return[2,t.sent().roleTypes]}})})},r.prototype.getAWSRoleTypes=function(r){return tt.__awaiter(this,void 0,void 0,function(){var e;return tt.__generator(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("getAWSRoleTypes",r)];case 1:return e=t.sent(),[2,JSON.parse(e.roleTypes)]}})})},r.prototype.getNonServiceAWSRoleTypes=function(r){return tt.__awaiter(this,void 0,void 0,function(){var e;return tt.__generator(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("getNonServiceAWSRoleTypes",r)];case 1:return e=t.sent(),[2,JSON.parse(e.roleTypes)]}})})},r.prototype.createRole=function(n){return tt.__awaiter(this,void 0,void 0,function(){var e,r;return tt.__generator(this,function(t){switch(t.label){case 0:return e=null!=n.roleType,r=null!=n.trustPolicy,e==r?[3,2]:[4,this.internalFetch("createRole",n)];case 1:return(r=t.sent()).denyArns=r.denyArns.split(","),[2,i(r,["roleArn","denyArns","instanceProfileArn","addedRoleToInstanceProfile","tags"])];case 2:throw new Error("Must include roleType or trustPolicy, but not both.")}})})},r.prototype.createNonServiceRole=function(r){return tt.__awaiter(this,void 0,void 0,function(){var e;return tt.__generator(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("createNonServiceRole",r)];case 1:return(e=t.sent()).denyArns=e.denyArns.split(","),[2,i(e,["roleArn","denyArns","instanceProfileArn","addedRoleToInstanceProfile","tags"])]}})})},r.prototype.awsAccountRoles=function(e){return tt.__awaiter(this,void 0,void 0,function(){return tt.__generator(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("awsAccountRoles?account="+e.account,e,"GET")];case 1:return[2,t.sent().awsRoleList]}})})},r.prototype.listAWSAccountRoles=function(r){return tt.__awaiter(this,void 0,void 0,function(){var e;return tt.__generator(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("listAWSAccountRoles",r)];case 1:return e=t.sent(),[2,JSON.parse(e.jsonAWSRoleList).map(function(t){return t.split("/").slice(-1)[0]})]}})})},r.prototype.getAccountRole=function(r){return tt.__awaiter(this,void 0,void 0,function(){var e;return tt.__generator(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("getAccountRole",r)];case 1:if(!(e=t.sent()).roleExists)throw new Error("Role "+r.roleName+" does not exist in this account");return[2,tt.__assign(tt.__assign({},i(e,["roleArn","isMachineIdentity","tags","maxSessionDurationInSeconds"])),{instanceProfileArn:e.instanceProfileARN})]}})})},r.prototype.updateRole=function(r){return tt.__awaiter(this,void 0,void 0,function(){var e;return tt.__generator(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("role",r,"PATCH")];case 1:if(!(e=t.sent()).roleExists)throw new Error("Role "+r.roleName+" does not exist in this account");return[2,tt.__assign(tt.__assign({},i(e,["roleArn","isMachineIdentity","tags"])),{instanceProfileArn:e.instanceProfileARN})]}})})},r.prototype.deleteRole=function(e){return tt.__awaiter(this,void 0,void 0,function(){return tt.__generator(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("deleteRole",e)];case 1:return t.sent(),[2,!0]}})})},r.prototype.addRoleMachineIdentity=function(e){return tt.__awaiter(this,void 0,void 0,function(){return tt.__generator(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("roleMachineIdentity",e)];case 1:return[2,i(t.sent(),["machineIdentityArn"])]}})})},r.prototype.deleteRoleMachineIdentity=function(e){return tt.__awaiter(this,void 0,void 0,function(){return tt.__generator(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("roleMachineIdentity",e,"DELETE")];case 1:return[2,i(t.sent(),["machineIdentityArn"])]}})})},r.prototype.getUserAccess=function(r){return tt.__awaiter(this,void 0,void 0,function(){var e;return tt.__generator(this,function(t){switch(t.label){case 0:return e=r.accountId,[4,this.internalFetch("userAccess/"+e,r,"GET")];case 1:return[2,t.sent().users]}})})},r.prototype.getUserAccessByRole=function(r){return tt.__awaiter(this,void 0,void 0,function(){var e;return tt.__generator(this,function(t){switch(t.label){case 0:return e=r.accountId,[4,this.internalFetch("reports/users-by-role?accountId="+e,r,"GET")];case 1:return[2,t.sent().users]}})})},r.prototype.getUserRoleAccess=function(r){return tt.__awaiter(this,void 0,void 0,function(){var e;return tt.__generator(this,function(t){switch(t.label){case 0:return e=r.accountId,[4,this.internalFetch("userAccess/roles/"+e,r)];case 1:return[2,t.sent().roles]}})})},r.prototype.getAccountOwners=function(r){return tt.__awaiter(this,void 0,void 0,function(){var e;return tt.__generator(this,function(t){switch(t.label){case 0:return e=r.accountId,[4,this.internalFetch("userAccess/owners/"+e,r,"GET")];case 1:return[2,t.sent().accountOwners]}})})},r.prototype.createAccessKeys=function(e){return tt.__awaiter(this,void 0,void 0,function(){return tt.__generator(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("accessKeys",e)];case 1:return[2,i(t.sent(),["iamUserArn","accessKey","secretKey","addedIAMUserToGroup","tags"])]}})})},r.prototype.getIamUser=function(e){return tt.__awaiter(this,void 0,void 0,function(){return tt.__generator(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("iam-users/id/"+e.account+"/"+e.iamUserName,e,"GET")];case 1:return[2,i(t.sent().item,["arn","accountId","userName","accessKey","tags"])]}})})},r.prototype.updateIamUser=function(r){return tt.__awaiter(this,void 0,void 0,function(){var e;return tt.__generator(this,function(t){switch(t.label){case 0:return delete(e=tt.__assign(tt.__assign({},r),{user:{tags:r.tags}})).tags,[4,this.internalFetch("iam-users/id/"+r.account+"/"+r.iamUserName,e,"PATCH")];case 1:return[2,i(t.sent().item,["arn","accountId","userName","accessKey","tags"])]}})})},r.prototype.deleteIAMUser=function(e){return tt.__awaiter(this,void 0,void 0,function(){return tt.__generator(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("IAMUser",e,"DELETE")];case 1:return t.sent(),[2,!0]}})})},r.prototype.version=function(e){return tt.__awaiter(this,void 0,void 0,function(){return tt.__generator(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("version",e,"GET")];case 1:return[2,i(t.sent(),["version"])]}})})},r.prototype.getLoginRole=function(n){return tt.__awaiter(this,void 0,void 0,function(){var e,r;return tt.__generator(this,function(t){switch(t.label){case 0:return e=n.accountId,r=n.role,[4,this.internalFetch("loginRoles/id/"+e+"/"+r,n,"GET")];case 1:return[2,i(t.sent().loginRole,["account","role","iamKeyActive","maxKeyDuration","securityLevel"])]}})})},r.prototype.getAccessToken=function(e){return tt.__awaiter(this,void 0,void 0,function(){return tt.__generator(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("accessToken",e)];case 1:return[2,i(t.sent(),["accessToken","expiresIn"])]}})})},r.prototype.getRefreshTokens=function(e){return tt.__awaiter(this,void 0,void 0,function(){return tt.__generator(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("refreshTokens",e,"GET")];case 1:return[2,t.sent().refreshTokens.map(function(t){return i(t,["clientId","id","userId","value"])})]}})})},r.prototype.revoke=function(e){return tt.__awaiter(this,void 0,void 0,function(){return tt.__generator(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("revoke",e)];case 1:return[2,"Success"==t.sent().statusMessage]}})})},r.prototype.getCostTotals=function(e){return tt.__awaiter(this,void 0,void 0,function(){return tt.__generator(this,function(t){switch(t.label){case 0:return[4,this.internalFetch("costTotals/"+e.accountId,e,"GET")];case 1:return[2,i(t.sent().costTotals,["awsAccountId","yyyy","mm","dd","daily","weekly","monthly","yearly","dailyCostsByService","monthlyCostsByService"])]}})})},r.prototype.internalFetch=function(a,u,c){return void 0===u&&(u={}),void 0===c&&(c="POST"),tt.__awaiter(this,void 0,void 0,function(){var e,r,n,o,i,s;return tt.__generator(this,function(t){switch(t.label){case 0:return e=tt.__assign(tt.__assign({},this.config),u),s=tt.__assign({},e),r={"Content-Type":"application/json","User-Agent":"AlksJS/"+et.version},void 0!==e.accessToken?(r.Authorization="Bearer "+e.accessToken,delete s.accessToken):void 0!==e.accessKey?(r["ALKS-STS-Access-Key"]=e.accessKey,r["ALKS-STS-Secret-Key"]=e.secretKey,r["ALKS-STS-Session-Token"]=e.sessionToken,delete s.accessKey,delete s.secretKey,delete s.sessionToken):void 0!==e.userid&&(console.error("The userid and password properties are deprecated and should be replaced with an access token"),n=function(t){void 0===t&&(t="");return rt.Buffer.from(t).toString("base64")}(e.userid+":"+e.password),r.Authorization="Basic "+n,delete s.userid,delete s.password),e.userAgent&&(r["User-Agent"]+=" "+e.userAgent,delete s.userAgent),[4,e._fetch(e.baseUrl+"/"+a,{method:c,headers:r,credentials:"omit",body:"GET"==c?void 0:JSON.stringify(s)})];case 1:o=t.sent(),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,o.json()];case 3:return i=t.sent(),[3,5];case 4:return s=t.sent(),i={errors:[s.message]},[3,5];case 5:if(!o.ok)throw new l(o,i);return[2,i]}})})},r);function r(t){this.config=t}t.Alks=e;var o,l=(o=Error,tt.__extends(n,o),n);function n(t,e){var r=this,n=Array.isArray(null==e?void 0:e.errors)?e.errors:[];t.statusText&&n.unshift(t.statusText);n=n.join("; ");return(r=o.call(this,n)||this).status=t.status,r.message=n,Object.assign(r,e),r}function i(r,t){return t.reduce(function(t,e){return t[e]=r[e],t},{})}t.AlksError=l;var s=e.prototype.create.call({},{_fetch:nt});t.create=e.prototype.create.bind(s),t.getAccounts=e.prototype.getAccounts.bind(s),t.getKeys=e.prototype.getKeys.bind(s),t.getIAMKeys=e.prototype.getIAMKeys.bind(s),t.getAllAWSRoleTypes=e.prototype.getAllAWSRoleTypes.bind(s),t.getAWSRoleTypes=e.prototype.getAWSRoleTypes.bind(s),t.getNonServiceAWSRoleTypes=e.prototype.getNonServiceAWSRoleTypes.bind(s),t.createRole=e.prototype.createRole.bind(s),t.createNonServiceRole=e.prototype.createNonServiceRole.bind(s),t.awsAccountRoles=e.prototype.awsAccountRoles.bind(s),t.listAWSAccountRoles=e.prototype.listAWSAccountRoles.bind(s),t.getAccountRole=e.prototype.getAccountRole.bind(s),t.updateRole=e.prototype.updateRole.bind(s),t.deleteRole=e.prototype.deleteRole.bind(s),t.addRoleMachineIdentity=e.prototype.addRoleMachineIdentity.bind(s),t.deleteRoleMachineIdentity=e.prototype.deleteRoleMachineIdentity.bind(s),t.getUserAccess=e.prototype.getUserAccess.bind(s),t.getUserAccessByRole=e.prototype.getUserAccessByRole.bind(s),t.getUserRoleAccess=e.prototype.getUserRoleAccess.bind(s),t.getAccountOwners=e.prototype.getAccountOwners.bind(s),t.createAccessKeys=e.prototype.createAccessKeys.bind(s),t.getIamUser=e.prototype.getIamUser.bind(s),t.updateIamUser=e.prototype.updateIamUser.bind(s),t.deleteIAMUser=e.prototype.deleteIAMUser.bind(s),t.version=e.prototype.version.bind(s),t.getLoginRole=e.prototype.getLoginRole.bind(s),t.getAccessToken=e.prototype.getAccessToken.bind(s),t.getRefreshTokens=e.prototype.getRefreshTokens.bind(s),t.revoke=e.prototype.revoke.bind(s),t.getCostTotals=e.prototype.getCostTotals.bind(s)}(ot=ot||{});var ot=ot;t.default=ot,Object.defineProperty(t,"__esModule",{value:!0}),Object.assign(t,ot)});
